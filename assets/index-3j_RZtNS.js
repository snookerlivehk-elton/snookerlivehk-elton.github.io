var cg=Object.defineProperty;var ug=(t,e,n)=>e in t?cg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var de=(t,e,n)=>ug(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function hg(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var xh={exports:{}},Io={},bh={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ti=Symbol.for("react.element"),fg=Symbol.for("react.portal"),pg=Symbol.for("react.fragment"),mg=Symbol.for("react.strict_mode"),gg=Symbol.for("react.profiler"),yg=Symbol.for("react.provider"),vg=Symbol.for("react.context"),wg=Symbol.for("react.forward_ref"),xg=Symbol.for("react.suspense"),bg=Symbol.for("react.memo"),_g=Symbol.for("react.lazy"),Pu=Symbol.iterator;function kg(t){return t===null||typeof t!="object"?null:(t=Pu&&t[Pu]||t["@@iterator"],typeof t=="function"?t:null)}var _h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kh=Object.assign,Sh={};function Vr(t,e,n){this.props=t,this.context=e,this.refs=Sh,this.updater=n||_h}Vr.prototype.isReactComponent={};Vr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jh(){}jh.prototype=Vr.prototype;function ic(t,e,n){this.props=t,this.context=e,this.refs=Sh,this.updater=n||_h}var oc=ic.prototype=new jh;oc.constructor=ic;kh(oc,Vr.prototype);oc.isPureReactComponent=!0;var Tu=Array.isArray,Ch=Object.prototype.hasOwnProperty,ac={current:null},Eh={key:!0,ref:!0,__self:!0,__source:!0};function Nh(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ch.call(e,r)&&!Eh.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ti,type:t,key:i,ref:o,props:s,_owner:ac.current}}function Sg(t,e){return{$$typeof:ti,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lc(t){return typeof t=="object"&&t!==null&&t.$$typeof===ti}function jg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Iu=/\/+/g;function ia(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jg(""+t.key):e.toString(36)}function Li(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ti:case fg:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ia(o,0):r,Tu(s)?(n="",t!=null&&(n=t.replace(Iu,"$&/")+"/"),Li(s,e,n,"",function(u){return u})):s!=null&&(lc(s)&&(s=Sg(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Iu,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Tu(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+ia(i,l);o+=Li(i,e,n,c,s)}else if(c=kg(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+ia(i,l++),o+=Li(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function fi(t,e,n){if(t==null)return t;var r=[],s=0;return Li(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Cg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var et={current:null},Di={transition:null},Eg={ReactCurrentDispatcher:et,ReactCurrentBatchConfig:Di,ReactCurrentOwner:ac};function Rh(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:fi,forEach:function(t,e,n){fi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fi(t,function(){e++}),e},toArray:function(t){return fi(t,function(e){return e})||[]},only:function(t){if(!lc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Vr;se.Fragment=pg;se.Profiler=gg;se.PureComponent=ic;se.StrictMode=mg;se.Suspense=xg;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Eg;se.act=Rh;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=kh({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ac.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Ch.call(e,c)&&!Eh.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ti,type:t.type,key:s,ref:i,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:vg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yg,_context:t},t.Consumer=t};se.createElement=Nh;se.createFactory=function(t){var e=Nh.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:wg,render:t}};se.isValidElement=lc;se.lazy=function(t){return{$$typeof:_g,_payload:{_status:-1,_result:t},_init:Cg}};se.memo=function(t,e){return{$$typeof:bg,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=Di.transition;Di.transition={};try{t()}finally{Di.transition=e}};se.unstable_act=Rh;se.useCallback=function(t,e){return et.current.useCallback(t,e)};se.useContext=function(t){return et.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return et.current.useDeferredValue(t)};se.useEffect=function(t,e){return et.current.useEffect(t,e)};se.useId=function(){return et.current.useId()};se.useImperativeHandle=function(t,e,n){return et.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return et.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return et.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return et.current.useMemo(t,e)};se.useReducer=function(t,e,n){return et.current.useReducer(t,e,n)};se.useRef=function(t){return et.current.useRef(t)};se.useState=function(t){return et.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return et.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return et.current.useTransition()};se.version="18.3.1";bh.exports=se;var g=bh.exports;const Ph=dg(g);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng=g,Rg=Symbol.for("react.element"),Pg=Symbol.for("react.fragment"),Tg=Object.prototype.hasOwnProperty,Ig=Ng.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Og={key:!0,ref:!0,__self:!0,__source:!0};function Th(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Tg.call(e,r)&&!Og.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Rg,type:t,key:i,ref:o,props:s,_owner:Ig.current}}Io.Fragment=Pg;Io.jsx=Th;Io.jsxs=Th;xh.exports=Io;var a=xh.exports,Va={},Ih={exports:{}},ft={},Oh={exports:{}},$h={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(b,N){var R=b.length;b.push(N);e:for(;0<R;){var S=R-1>>>1,D=b[S];if(0<s(D,N))b[S]=N,b[R]=D,R=S;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var N=b[0],R=b.pop();if(R!==N){b[0]=R;e:for(var S=0,D=b.length,z=D>>>1;S<z;){var $=2*(S+1)-1,V=b[$],X=$+1,Z=b[X];if(0>s(V,R))X<D&&0>s(Z,V)?(b[S]=Z,b[X]=R,S=X):(b[S]=V,b[$]=R,S=$);else if(X<D&&0>s(Z,R))b[S]=Z,b[X]=R,S=X;else break e}}return N}function s(b,N){var R=b.sortIndex-N.sortIndex;return R!==0?R:b.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,y=!1,x=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(b){for(var N=n(u);N!==null;){if(N.callback===null)r(u);else if(N.startTime<=b)r(u),N.sortIndex=N.expirationTime,e(c,N);else break;N=n(u)}}function _(b){if(w=!1,p(b),!x)if(n(c)!==null)x=!0,k(E);else{var N=n(u);N!==null&&A(_,N.startTime-b)}}function E(b,N){x=!1,w&&(w=!1,v(I),I=-1),y=!0;var R=m;try{for(p(N),h=n(c);h!==null&&(!(h.expirationTime>N)||b&&!Q());){var S=h.callback;if(typeof S=="function"){h.callback=null,m=h.priorityLevel;var D=S(h.expirationTime<=N);N=t.unstable_now(),typeof D=="function"?h.callback=D:h===n(c)&&r(c),p(N)}else r(c);h=n(c)}if(h!==null)var z=!0;else{var $=n(u);$!==null&&A(_,$.startTime-N),z=!1}return z}finally{h=null,m=R,y=!1}}var T=!1,P=null,I=-1,B=5,L=-1;function Q(){return!(t.unstable_now()-L<B)}function Y(){if(P!==null){var b=t.unstable_now();L=b;var N=!0;try{N=P(!0,b)}finally{N?J():(T=!1,P=null)}}else T=!1}var J;if(typeof f=="function")J=function(){f(Y)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,F=O.port2;O.port1.onmessage=Y,J=function(){F.postMessage(null)}}else J=function(){j(Y,0)};function k(b){P=b,T||(T=!0,J())}function A(b,N){I=j(function(){b(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,k(E))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(b){switch(m){case 1:case 2:case 3:var N=3;break;default:N=m}var R=m;m=N;try{return b()}finally{m=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,N){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var R=m;m=b;try{return N()}finally{m=R}},t.unstable_scheduleCallback=function(b,N,R){var S=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?S+R:S):R=S,b){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=R+D,b={id:d++,callback:N,priorityLevel:b,startTime:R,expirationTime:D,sortIndex:-1},R>S?(b.sortIndex=R,e(u,b),n(c)===null&&b===n(u)&&(w?(v(I),I=-1):w=!0,A(_,R-S))):(b.sortIndex=D,e(c,b),x||y||(x=!0,k(E))),b},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(b){var N=m;return function(){var R=m;m=N;try{return b.apply(this,arguments)}finally{m=R}}}})($h);Oh.exports=$h;var $g=Oh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag=g,ht=$g;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ah=new Set,Ls={};function nr(t,e){Dr(t,e),Dr(t+"Capture",e)}function Dr(t,e){for(Ls[t]=e,t=0;t<e.length;t++)Ah.add(e[t])}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ka=Object.prototype.hasOwnProperty,Lg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ou={},$u={};function Dg(t){return Ka.call($u,t)?!0:Ka.call(Ou,t)?!1:Lg.test(t)?$u[t]=!0:(Ou[t]=!0,!1)}function Bg(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Mg(t,e,n,r){if(e===null||typeof e>"u"||Bg(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ve[t]=new tt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ve[e]=new tt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ve[t]=new tt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ve[t]=new tt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ve[t]=new tt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ve[t]=new tt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ve[t]=new tt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ve[t]=new tt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ve[t]=new tt(t,5,!1,t.toLowerCase(),null,!1,!1)});var cc=/[\-:]([a-z])/g;function uc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cc,uc);Ve[e]=new tt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cc,uc);Ve[e]=new tt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cc,uc);Ve[e]=new tt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ve[t]=new tt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ve.xlinkHref=new tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ve[t]=new tt(t,1,!1,t.toLowerCase(),null,!0,!0)});function dc(t,e,n,r){var s=Ve.hasOwnProperty(e)?Ve[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Mg(e,n,s,r)&&(n=null),r||s===null?Dg(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var un=Ag.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pi=Symbol.for("react.element"),mr=Symbol.for("react.portal"),gr=Symbol.for("react.fragment"),hc=Symbol.for("react.strict_mode"),Ja=Symbol.for("react.profiler"),Lh=Symbol.for("react.provider"),Dh=Symbol.for("react.context"),fc=Symbol.for("react.forward_ref"),Qa=Symbol.for("react.suspense"),Ga=Symbol.for("react.suspense_list"),pc=Symbol.for("react.memo"),gn=Symbol.for("react.lazy"),Bh=Symbol.for("react.offscreen"),Au=Symbol.iterator;function ns(t){return t===null||typeof t!="object"?null:(t=Au&&t[Au]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,oa;function ms(t){if(oa===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);oa=e&&e[1]||""}return`
`+oa+t}var aa=!1;function la(t,e){if(!t||aa)return"";aa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{aa=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ms(t):""}function Ug(t){switch(t.tag){case 5:return ms(t.type);case 16:return ms("Lazy");case 13:return ms("Suspense");case 19:return ms("SuspenseList");case 0:case 2:case 15:return t=la(t.type,!1),t;case 11:return t=la(t.type.render,!1),t;case 1:return t=la(t.type,!0),t;default:return""}}function Ya(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gr:return"Fragment";case mr:return"Portal";case Ja:return"Profiler";case hc:return"StrictMode";case Qa:return"Suspense";case Ga:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Dh:return(t.displayName||"Context")+".Consumer";case Lh:return(t._context.displayName||"Context")+".Provider";case fc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case pc:return e=t.displayName||null,e!==null?e:Ya(t.type)||"Memo";case gn:e=t._payload,t=t._init;try{return Ya(t(e))}catch{}}return null}function Fg(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ya(e);case 8:return e===hc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function On(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Mh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zg(t){var e=Mh(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function mi(t){t._valueTracker||(t._valueTracker=zg(t))}function Uh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Mh(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ro(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xa(t,e){var n=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Lu(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=On(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Fh(t,e){e=e.checked,e!=null&&dc(t,"checked",e,!1)}function Za(t,e){Fh(t,e);var n=On(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?el(t,e.type,n):e.hasOwnProperty("defaultValue")&&el(t,e.type,On(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Du(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function el(t,e,n){(e!=="number"||ro(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var gs=Array.isArray;function Er(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+On(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function tl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bu(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(gs(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:On(n)}}function zh(t,e){var n=On(e.value),r=On(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Mu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Wh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Wh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gi,qh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gi=gi||document.createElement("div"),gi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ds(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wg=["Webkit","ms","Moz","O"];Object.keys(bs).forEach(function(t){Wg.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bs[e]=bs[t]})});function Hh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bs.hasOwnProperty(t)&&bs[t]?(""+e).trim():e+"px"}function Vh(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Hh(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var qg=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rl(t,e){if(e){if(qg[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function sl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var il=null;function mc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ol=null,Nr=null,Rr=null;function Uu(t){if(t=si(t)){if(typeof ol!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Do(e),ol(t.stateNode,t.type,e))}}function Kh(t){Nr?Rr?Rr.push(t):Rr=[t]:Nr=t}function Jh(){if(Nr){var t=Nr,e=Rr;if(Rr=Nr=null,Uu(t),e)for(t=0;t<e.length;t++)Uu(e[t])}}function Qh(t,e){return t(e)}function Gh(){}var ca=!1;function Yh(t,e,n){if(ca)return t(e,n);ca=!0;try{return Qh(t,e,n)}finally{ca=!1,(Nr!==null||Rr!==null)&&(Gh(),Jh())}}function Bs(t,e){var n=t.stateNode;if(n===null)return null;var r=Do(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var al=!1;if(sn)try{var rs={};Object.defineProperty(rs,"passive",{get:function(){al=!0}}),window.addEventListener("test",rs,rs),window.removeEventListener("test",rs,rs)}catch{al=!1}function Hg(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var _s=!1,so=null,io=!1,ll=null,Vg={onError:function(t){_s=!0,so=t}};function Kg(t,e,n,r,s,i,o,l,c){_s=!1,so=null,Hg.apply(Vg,arguments)}function Jg(t,e,n,r,s,i,o,l,c){if(Kg.apply(this,arguments),_s){if(_s){var u=so;_s=!1,so=null}else throw Error(U(198));io||(io=!0,ll=u)}}function rr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Xh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fu(t){if(rr(t)!==t)throw Error(U(188))}function Qg(t){var e=t.alternate;if(!e){if(e=rr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Fu(s),t;if(i===r)return Fu(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Zh(t){return t=Qg(t),t!==null?ef(t):null}function ef(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ef(t);if(e!==null)return e;t=t.sibling}return null}var tf=ht.unstable_scheduleCallback,zu=ht.unstable_cancelCallback,Gg=ht.unstable_shouldYield,Yg=ht.unstable_requestPaint,Pe=ht.unstable_now,Xg=ht.unstable_getCurrentPriorityLevel,gc=ht.unstable_ImmediatePriority,nf=ht.unstable_UserBlockingPriority,oo=ht.unstable_NormalPriority,Zg=ht.unstable_LowPriority,rf=ht.unstable_IdlePriority,Oo=null,Kt=null;function ey(t){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Oo,t,void 0,(t.current.flags&128)===128)}catch{}}var At=Math.clz32?Math.clz32:ry,ty=Math.log,ny=Math.LN2;function ry(t){return t>>>=0,t===0?32:31-(ty(t)/ny|0)|0}var yi=64,vi=4194304;function ys(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ao(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=ys(l):(i&=o,i!==0&&(r=ys(i)))}else o=n&~s,o!==0?r=ys(o):i!==0&&(r=ys(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-At(e),s=1<<n,r|=t[n],e&=~s;return r}function sy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iy(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-At(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=sy(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function cl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sf(){var t=yi;return yi<<=1,!(yi&4194240)&&(yi=64),t}function ua(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ni(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-At(e),t[e]=n}function oy(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-At(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function yc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-At(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var fe=0;function of(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var af,vc,lf,cf,uf,ul=!1,wi=[],kn=null,Sn=null,jn=null,Ms=new Map,Us=new Map,vn=[],ay="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wu(t,e){switch(t){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":Ms.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Us.delete(e.pointerId)}}function ss(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=si(e),e!==null&&vc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ly(t,e,n,r,s){switch(e){case"focusin":return kn=ss(kn,t,e,n,r,s),!0;case"dragenter":return Sn=ss(Sn,t,e,n,r,s),!0;case"mouseover":return jn=ss(jn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ms.set(i,ss(Ms.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Us.set(i,ss(Us.get(i)||null,t,e,n,r,s)),!0}return!1}function df(t){var e=Hn(t.target);if(e!==null){var n=rr(e);if(n!==null){if(e=n.tag,e===13){if(e=Xh(n),e!==null){t.blockedOn=e,uf(t.priority,function(){lf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=dl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);il=r,n.target.dispatchEvent(r),il=null}else return e=si(n),e!==null&&vc(e),t.blockedOn=n,!1;e.shift()}return!0}function qu(t,e,n){Bi(t)&&n.delete(e)}function cy(){ul=!1,kn!==null&&Bi(kn)&&(kn=null),Sn!==null&&Bi(Sn)&&(Sn=null),jn!==null&&Bi(jn)&&(jn=null),Ms.forEach(qu),Us.forEach(qu)}function is(t,e){t.blockedOn===e&&(t.blockedOn=null,ul||(ul=!0,ht.unstable_scheduleCallback(ht.unstable_NormalPriority,cy)))}function Fs(t){function e(s){return is(s,t)}if(0<wi.length){is(wi[0],t);for(var n=1;n<wi.length;n++){var r=wi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kn!==null&&is(kn,t),Sn!==null&&is(Sn,t),jn!==null&&is(jn,t),Ms.forEach(e),Us.forEach(e),n=0;n<vn.length;n++)r=vn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vn.length&&(n=vn[0],n.blockedOn===null);)df(n),n.blockedOn===null&&vn.shift()}var Pr=un.ReactCurrentBatchConfig,lo=!0;function uy(t,e,n,r){var s=fe,i=Pr.transition;Pr.transition=null;try{fe=1,wc(t,e,n,r)}finally{fe=s,Pr.transition=i}}function dy(t,e,n,r){var s=fe,i=Pr.transition;Pr.transition=null;try{fe=4,wc(t,e,n,r)}finally{fe=s,Pr.transition=i}}function wc(t,e,n,r){if(lo){var s=dl(t,e,n,r);if(s===null)xa(t,e,r,co,n),Wu(t,r);else if(ly(s,t,e,n,r))r.stopPropagation();else if(Wu(t,r),e&4&&-1<ay.indexOf(t)){for(;s!==null;){var i=si(s);if(i!==null&&af(i),i=dl(t,e,n,r),i===null&&xa(t,e,r,co,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else xa(t,e,r,null,n)}}var co=null;function dl(t,e,n,r){if(co=null,t=mc(r),t=Hn(t),t!==null)if(e=rr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Xh(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return co=t,null}function hf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xg()){case gc:return 1;case nf:return 4;case oo:case Zg:return 16;case rf:return 536870912;default:return 16}default:return 16}}var bn=null,xc=null,Mi=null;function ff(){if(Mi)return Mi;var t,e=xc,n=e.length,r,s="value"in bn?bn.value:bn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Mi=s.slice(t,1<r?1-r:void 0)}function Ui(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xi(){return!0}function Hu(){return!1}function pt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xi:Hu,this.isPropagationStopped=Hu,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xi)},persist:function(){},isPersistent:xi}),e}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bc=pt(Kr),ri=Ce({},Kr,{view:0,detail:0}),hy=pt(ri),da,ha,os,$o=Ce({},ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_c,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==os&&(os&&t.type==="mousemove"?(da=t.screenX-os.screenX,ha=t.screenY-os.screenY):ha=da=0,os=t),da)},movementY:function(t){return"movementY"in t?t.movementY:ha}}),Vu=pt($o),fy=Ce({},$o,{dataTransfer:0}),py=pt(fy),my=Ce({},ri,{relatedTarget:0}),fa=pt(my),gy=Ce({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),yy=pt(gy),vy=Ce({},Kr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wy=pt(vy),xy=Ce({},Kr,{data:0}),Ku=pt(xy),by={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_y={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ky={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ky[t])?!!e[t]:!1}function _c(){return Sy}var jy=Ce({},ri,{key:function(t){if(t.key){var e=by[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ui(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_y[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_c,charCode:function(t){return t.type==="keypress"?Ui(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ui(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Cy=pt(jy),Ey=Ce({},$o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ju=pt(Ey),Ny=Ce({},ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_c}),Ry=pt(Ny),Py=Ce({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ty=pt(Py),Iy=Ce({},$o,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Oy=pt(Iy),$y=[9,13,27,32],kc=sn&&"CompositionEvent"in window,ks=null;sn&&"documentMode"in document&&(ks=document.documentMode);var Ay=sn&&"TextEvent"in window&&!ks,pf=sn&&(!kc||ks&&8<ks&&11>=ks),Qu=" ",Gu=!1;function mf(t,e){switch(t){case"keyup":return $y.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yr=!1;function Ly(t,e){switch(t){case"compositionend":return gf(e);case"keypress":return e.which!==32?null:(Gu=!0,Qu);case"textInput":return t=e.data,t===Qu&&Gu?null:t;default:return null}}function Dy(t,e){if(yr)return t==="compositionend"||!kc&&mf(t,e)?(t=ff(),Mi=xc=bn=null,yr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pf&&e.locale!=="ko"?null:e.data;default:return null}}var By={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!By[t.type]:e==="textarea"}function yf(t,e,n,r){Kh(r),e=uo(e,"onChange"),0<e.length&&(n=new bc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ss=null,zs=null;function My(t){Nf(t,0)}function Ao(t){var e=xr(t);if(Uh(e))return t}function Uy(t,e){if(t==="change")return e}var vf=!1;if(sn){var pa;if(sn){var ma="oninput"in document;if(!ma){var Xu=document.createElement("div");Xu.setAttribute("oninput","return;"),ma=typeof Xu.oninput=="function"}pa=ma}else pa=!1;vf=pa&&(!document.documentMode||9<document.documentMode)}function Zu(){Ss&&(Ss.detachEvent("onpropertychange",wf),zs=Ss=null)}function wf(t){if(t.propertyName==="value"&&Ao(zs)){var e=[];yf(e,zs,t,mc(t)),Yh(My,e)}}function Fy(t,e,n){t==="focusin"?(Zu(),Ss=e,zs=n,Ss.attachEvent("onpropertychange",wf)):t==="focusout"&&Zu()}function zy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ao(zs)}function Wy(t,e){if(t==="click")return Ao(e)}function qy(t,e){if(t==="input"||t==="change")return Ao(e)}function Hy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dt=typeof Object.is=="function"?Object.is:Hy;function Ws(t,e){if(Dt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ka.call(e,s)||!Dt(t[s],e[s]))return!1}return!0}function ed(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function td(t,e){var n=ed(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ed(n)}}function xf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bf(){for(var t=window,e=ro();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ro(t.document)}return e}function Sc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Vy(t){var e=bf(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&xf(n.ownerDocument.documentElement,n)){if(r!==null&&Sc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=td(n,i);var o=td(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ky=sn&&"documentMode"in document&&11>=document.documentMode,vr=null,hl=null,js=null,fl=!1;function nd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fl||vr==null||vr!==ro(r)||(r=vr,"selectionStart"in r&&Sc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),js&&Ws(js,r)||(js=r,r=uo(hl,"onSelect"),0<r.length&&(e=new bc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=vr)))}function bi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wr={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionend:bi("Transition","TransitionEnd")},ga={},_f={};sn&&(_f=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);function Lo(t){if(ga[t])return ga[t];if(!wr[t])return t;var e=wr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _f)return ga[t]=e[n];return t}var kf=Lo("animationend"),Sf=Lo("animationiteration"),jf=Lo("animationstart"),Cf=Lo("transitionend"),Ef=new Map,rd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(t,e){Ef.set(t,e),nr(e,[t])}for(var ya=0;ya<rd.length;ya++){var va=rd[ya],Jy=va.toLowerCase(),Qy=va[0].toUpperCase()+va.slice(1);An(Jy,"on"+Qy)}An(kf,"onAnimationEnd");An(Sf,"onAnimationIteration");An(jf,"onAnimationStart");An("dblclick","onDoubleClick");An("focusin","onFocus");An("focusout","onBlur");An(Cf,"onTransitionEnd");Dr("onMouseEnter",["mouseout","mouseover"]);Dr("onMouseLeave",["mouseout","mouseover"]);Dr("onPointerEnter",["pointerout","pointerover"]);Dr("onPointerLeave",["pointerout","pointerover"]);nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nr("onBeforeInput",["compositionend","keypress","textInput","paste"]);nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gy=new Set("cancel close invalid load scroll toggle".split(" ").concat(vs));function sd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Jg(r,e,void 0,t),t.currentTarget=null}function Nf(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;sd(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;sd(s,l,u),i=c}}}if(io)throw t=ll,io=!1,ll=null,t}function ve(t,e){var n=e[vl];n===void 0&&(n=e[vl]=new Set);var r=t+"__bubble";n.has(r)||(Rf(e,t,2,!1),n.add(r))}function wa(t,e,n){var r=0;e&&(r|=4),Rf(n,t,r,e)}var _i="_reactListening"+Math.random().toString(36).slice(2);function qs(t){if(!t[_i]){t[_i]=!0,Ah.forEach(function(n){n!=="selectionchange"&&(Gy.has(n)||wa(n,!1,t),wa(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_i]||(e[_i]=!0,wa("selectionchange",!1,e))}}function Rf(t,e,n,r){switch(hf(e)){case 1:var s=uy;break;case 4:s=dy;break;default:s=wc}n=s.bind(null,e,n,t),s=void 0,!al||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function xa(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Hn(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Yh(function(){var u=i,d=mc(n),h=[];e:{var m=Ef.get(t);if(m!==void 0){var y=bc,x=t;switch(t){case"keypress":if(Ui(n)===0)break e;case"keydown":case"keyup":y=Cy;break;case"focusin":x="focus",y=fa;break;case"focusout":x="blur",y=fa;break;case"beforeblur":case"afterblur":y=fa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=py;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Ry;break;case kf:case Sf:case jf:y=yy;break;case Cf:y=Ty;break;case"scroll":y=hy;break;case"wheel":y=Oy;break;case"copy":case"cut":case"paste":y=wy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Ju}var w=(e&4)!==0,j=!w&&t==="scroll",v=w?m!==null?m+"Capture":null:m;w=[];for(var f=u,p;f!==null;){p=f;var _=p.stateNode;if(p.tag===5&&_!==null&&(p=_,v!==null&&(_=Bs(f,v),_!=null&&w.push(Hs(f,_,p)))),j)break;f=f.return}0<w.length&&(m=new y(m,x,null,n,d),h.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==il&&(x=n.relatedTarget||n.fromElement)&&(Hn(x)||x[on]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=u,x=x?Hn(x):null,x!==null&&(j=rr(x),x!==j||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=u),y!==x)){if(w=Vu,_="onMouseLeave",v="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(w=Ju,_="onPointerLeave",v="onPointerEnter",f="pointer"),j=y==null?m:xr(y),p=x==null?m:xr(x),m=new w(_,f+"leave",y,n,d),m.target=j,m.relatedTarget=p,_=null,Hn(d)===u&&(w=new w(v,f+"enter",x,n,d),w.target=p,w.relatedTarget=j,_=w),j=_,y&&x)t:{for(w=y,v=x,f=0,p=w;p;p=ar(p))f++;for(p=0,_=v;_;_=ar(_))p++;for(;0<f-p;)w=ar(w),f--;for(;0<p-f;)v=ar(v),p--;for(;f--;){if(w===v||v!==null&&w===v.alternate)break t;w=ar(w),v=ar(v)}w=null}else w=null;y!==null&&id(h,m,y,w,!1),x!==null&&j!==null&&id(h,j,x,w,!0)}}e:{if(m=u?xr(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var E=Uy;else if(Yu(m))if(vf)E=qy;else{E=zy;var T=Fy}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=Wy);if(E&&(E=E(t,u))){yf(h,E,n,d);break e}T&&T(t,m,u),t==="focusout"&&(T=m._wrapperState)&&T.controlled&&m.type==="number"&&el(m,"number",m.value)}switch(T=u?xr(u):window,t){case"focusin":(Yu(T)||T.contentEditable==="true")&&(vr=T,hl=u,js=null);break;case"focusout":js=hl=vr=null;break;case"mousedown":fl=!0;break;case"contextmenu":case"mouseup":case"dragend":fl=!1,nd(h,n,d);break;case"selectionchange":if(Ky)break;case"keydown":case"keyup":nd(h,n,d)}var P;if(kc)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else yr?mf(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(pf&&n.locale!=="ko"&&(yr||I!=="onCompositionStart"?I==="onCompositionEnd"&&yr&&(P=ff()):(bn=d,xc="value"in bn?bn.value:bn.textContent,yr=!0)),T=uo(u,I),0<T.length&&(I=new Ku(I,t,null,n,d),h.push({event:I,listeners:T}),P?I.data=P:(P=gf(n),P!==null&&(I.data=P)))),(P=Ay?Ly(t,n):Dy(t,n))&&(u=uo(u,"onBeforeInput"),0<u.length&&(d=new Ku("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=P))}Nf(h,e)})}function Hs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function uo(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Bs(t,n),i!=null&&r.unshift(Hs(t,i,s)),i=Bs(t,e),i!=null&&r.push(Hs(t,i,s))),t=t.return}return r}function ar(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function id(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Bs(n,i),c!=null&&o.unshift(Hs(n,c,l))):s||(c=Bs(n,i),c!=null&&o.push(Hs(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Yy=/\r\n?/g,Xy=/\u0000|\uFFFD/g;function od(t){return(typeof t=="string"?t:""+t).replace(Yy,`
`).replace(Xy,"")}function ki(t,e,n){if(e=od(e),od(t)!==e&&n)throw Error(U(425))}function ho(){}var pl=null,ml=null;function gl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yl=typeof setTimeout=="function"?setTimeout:void 0,Zy=typeof clearTimeout=="function"?clearTimeout:void 0,ad=typeof Promise=="function"?Promise:void 0,e0=typeof queueMicrotask=="function"?queueMicrotask:typeof ad<"u"?function(t){return ad.resolve(null).then(t).catch(t0)}:yl;function t0(t){setTimeout(function(){throw t})}function ba(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Fs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Fs(e)}function Cn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ld(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Jr=Math.random().toString(36).slice(2),Vt="__reactFiber$"+Jr,Vs="__reactProps$"+Jr,on="__reactContainer$"+Jr,vl="__reactEvents$"+Jr,n0="__reactListeners$"+Jr,r0="__reactHandles$"+Jr;function Hn(t){var e=t[Vt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[on]||n[Vt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ld(t);t!==null;){if(n=t[Vt])return n;t=ld(t)}return e}t=n,n=t.parentNode}return null}function si(t){return t=t[Vt]||t[on],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Do(t){return t[Vs]||null}var wl=[],br=-1;function Ln(t){return{current:t}}function we(t){0>br||(t.current=wl[br],wl[br]=null,br--)}function ge(t,e){br++,wl[br]=t.current,t.current=e}var $n={},Ge=Ln($n),ot=Ln(!1),Gn=$n;function Br(t,e){var n=t.type.contextTypes;if(!n)return $n;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function at(t){return t=t.childContextTypes,t!=null}function fo(){we(ot),we(Ge)}function cd(t,e,n){if(Ge.current!==$n)throw Error(U(168));ge(Ge,e),ge(ot,n)}function Pf(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,Fg(t)||"Unknown",s));return Ce({},n,r)}function po(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$n,Gn=Ge.current,ge(Ge,t),ge(ot,ot.current),!0}function ud(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Pf(t,e,Gn),r.__reactInternalMemoizedMergedChildContext=t,we(ot),we(Ge),ge(Ge,t)):we(ot),ge(ot,n)}var Zt=null,Bo=!1,_a=!1;function Tf(t){Zt===null?Zt=[t]:Zt.push(t)}function s0(t){Bo=!0,Tf(t)}function Dn(){if(!_a&&Zt!==null){_a=!0;var t=0,e=fe;try{var n=Zt;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Zt=null,Bo=!1}catch(s){throw Zt!==null&&(Zt=Zt.slice(t+1)),tf(gc,Dn),s}finally{fe=e,_a=!1}}return null}var _r=[],kr=0,mo=null,go=0,gt=[],yt=0,Yn=null,en=1,tn="";function Fn(t,e){_r[kr++]=go,_r[kr++]=mo,mo=t,go=e}function If(t,e,n){gt[yt++]=en,gt[yt++]=tn,gt[yt++]=Yn,Yn=t;var r=en;t=tn;var s=32-At(r)-1;r&=~(1<<s),n+=1;var i=32-At(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,en=1<<32-At(e)+s|n<<s|r,tn=i+t}else en=1<<i|n<<s|r,tn=t}function jc(t){t.return!==null&&(Fn(t,1),If(t,1,0))}function Cc(t){for(;t===mo;)mo=_r[--kr],_r[kr]=null,go=_r[--kr],_r[kr]=null;for(;t===Yn;)Yn=gt[--yt],gt[yt]=null,tn=gt[--yt],gt[yt]=null,en=gt[--yt],gt[yt]=null}var dt=null,ut=null,xe=!1,It=null;function Of(t,e){var n=wt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function dd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dt=t,ut=Cn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dt=t,ut=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yn!==null?{id:en,overflow:tn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dt=t,ut=null,!0):!1;default:return!1}}function xl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bl(t){if(xe){var e=ut;if(e){var n=e;if(!dd(t,e)){if(xl(t))throw Error(U(418));e=Cn(n.nextSibling);var r=dt;e&&dd(t,e)?Of(r,n):(t.flags=t.flags&-4097|2,xe=!1,dt=t)}}else{if(xl(t))throw Error(U(418));t.flags=t.flags&-4097|2,xe=!1,dt=t}}}function hd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dt=t}function Si(t){if(t!==dt)return!1;if(!xe)return hd(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gl(t.type,t.memoizedProps)),e&&(e=ut)){if(xl(t))throw $f(),Error(U(418));for(;e;)Of(t,e),e=Cn(e.nextSibling)}if(hd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ut=Cn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ut=null}}else ut=dt?Cn(t.stateNode.nextSibling):null;return!0}function $f(){for(var t=ut;t;)t=Cn(t.nextSibling)}function Mr(){ut=dt=null,xe=!1}function Ec(t){It===null?It=[t]:It.push(t)}var i0=un.ReactCurrentBatchConfig;function as(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function ji(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fd(t){var e=t._init;return e(t._payload)}function Af(t){function e(v,f){if(t){var p=v.deletions;p===null?(v.deletions=[f],v.flags|=16):p.push(f)}}function n(v,f){if(!t)return null;for(;f!==null;)e(v,f),f=f.sibling;return null}function r(v,f){for(v=new Map;f!==null;)f.key!==null?v.set(f.key,f):v.set(f.index,f),f=f.sibling;return v}function s(v,f){return v=Pn(v,f),v.index=0,v.sibling=null,v}function i(v,f,p){return v.index=p,t?(p=v.alternate,p!==null?(p=p.index,p<f?(v.flags|=2,f):p):(v.flags|=2,f)):(v.flags|=1048576,f)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,f,p,_){return f===null||f.tag!==6?(f=Ra(p,v.mode,_),f.return=v,f):(f=s(f,p),f.return=v,f)}function c(v,f,p,_){var E=p.type;return E===gr?d(v,f,p.props.children,_,p.key):f!==null&&(f.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===gn&&fd(E)===f.type)?(_=s(f,p.props),_.ref=as(v,f,p),_.return=v,_):(_=Ki(p.type,p.key,p.props,null,v.mode,_),_.ref=as(v,f,p),_.return=v,_)}function u(v,f,p,_){return f===null||f.tag!==4||f.stateNode.containerInfo!==p.containerInfo||f.stateNode.implementation!==p.implementation?(f=Pa(p,v.mode,_),f.return=v,f):(f=s(f,p.children||[]),f.return=v,f)}function d(v,f,p,_,E){return f===null||f.tag!==7?(f=Qn(p,v.mode,_,E),f.return=v,f):(f=s(f,p),f.return=v,f)}function h(v,f,p){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Ra(""+f,v.mode,p),f.return=v,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case pi:return p=Ki(f.type,f.key,f.props,null,v.mode,p),p.ref=as(v,null,f),p.return=v,p;case mr:return f=Pa(f,v.mode,p),f.return=v,f;case gn:var _=f._init;return h(v,_(f._payload),p)}if(gs(f)||ns(f))return f=Qn(f,v.mode,p,null),f.return=v,f;ji(v,f)}return null}function m(v,f,p,_){var E=f!==null?f.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return E!==null?null:l(v,f,""+p,_);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case pi:return p.key===E?c(v,f,p,_):null;case mr:return p.key===E?u(v,f,p,_):null;case gn:return E=p._init,m(v,f,E(p._payload),_)}if(gs(p)||ns(p))return E!==null?null:d(v,f,p,_,null);ji(v,p)}return null}function y(v,f,p,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(p)||null,l(f,v,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case pi:return v=v.get(_.key===null?p:_.key)||null,c(f,v,_,E);case mr:return v=v.get(_.key===null?p:_.key)||null,u(f,v,_,E);case gn:var T=_._init;return y(v,f,p,T(_._payload),E)}if(gs(_)||ns(_))return v=v.get(p)||null,d(f,v,_,E,null);ji(f,_)}return null}function x(v,f,p,_){for(var E=null,T=null,P=f,I=f=0,B=null;P!==null&&I<p.length;I++){P.index>I?(B=P,P=null):B=P.sibling;var L=m(v,P,p[I],_);if(L===null){P===null&&(P=B);break}t&&P&&L.alternate===null&&e(v,P),f=i(L,f,I),T===null?E=L:T.sibling=L,T=L,P=B}if(I===p.length)return n(v,P),xe&&Fn(v,I),E;if(P===null){for(;I<p.length;I++)P=h(v,p[I],_),P!==null&&(f=i(P,f,I),T===null?E=P:T.sibling=P,T=P);return xe&&Fn(v,I),E}for(P=r(v,P);I<p.length;I++)B=y(P,v,I,p[I],_),B!==null&&(t&&B.alternate!==null&&P.delete(B.key===null?I:B.key),f=i(B,f,I),T===null?E=B:T.sibling=B,T=B);return t&&P.forEach(function(Q){return e(v,Q)}),xe&&Fn(v,I),E}function w(v,f,p,_){var E=ns(p);if(typeof E!="function")throw Error(U(150));if(p=E.call(p),p==null)throw Error(U(151));for(var T=E=null,P=f,I=f=0,B=null,L=p.next();P!==null&&!L.done;I++,L=p.next()){P.index>I?(B=P,P=null):B=P.sibling;var Q=m(v,P,L.value,_);if(Q===null){P===null&&(P=B);break}t&&P&&Q.alternate===null&&e(v,P),f=i(Q,f,I),T===null?E=Q:T.sibling=Q,T=Q,P=B}if(L.done)return n(v,P),xe&&Fn(v,I),E;if(P===null){for(;!L.done;I++,L=p.next())L=h(v,L.value,_),L!==null&&(f=i(L,f,I),T===null?E=L:T.sibling=L,T=L);return xe&&Fn(v,I),E}for(P=r(v,P);!L.done;I++,L=p.next())L=y(P,v,I,L.value,_),L!==null&&(t&&L.alternate!==null&&P.delete(L.key===null?I:L.key),f=i(L,f,I),T===null?E=L:T.sibling=L,T=L);return t&&P.forEach(function(Y){return e(v,Y)}),xe&&Fn(v,I),E}function j(v,f,p,_){if(typeof p=="object"&&p!==null&&p.type===gr&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case pi:e:{for(var E=p.key,T=f;T!==null;){if(T.key===E){if(E=p.type,E===gr){if(T.tag===7){n(v,T.sibling),f=s(T,p.props.children),f.return=v,v=f;break e}}else if(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===gn&&fd(E)===T.type){n(v,T.sibling),f=s(T,p.props),f.ref=as(v,T,p),f.return=v,v=f;break e}n(v,T);break}else e(v,T);T=T.sibling}p.type===gr?(f=Qn(p.props.children,v.mode,_,p.key),f.return=v,v=f):(_=Ki(p.type,p.key,p.props,null,v.mode,_),_.ref=as(v,f,p),_.return=v,v=_)}return o(v);case mr:e:{for(T=p.key;f!==null;){if(f.key===T)if(f.tag===4&&f.stateNode.containerInfo===p.containerInfo&&f.stateNode.implementation===p.implementation){n(v,f.sibling),f=s(f,p.children||[]),f.return=v,v=f;break e}else{n(v,f);break}else e(v,f);f=f.sibling}f=Pa(p,v.mode,_),f.return=v,v=f}return o(v);case gn:return T=p._init,j(v,f,T(p._payload),_)}if(gs(p))return x(v,f,p,_);if(ns(p))return w(v,f,p,_);ji(v,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,f!==null&&f.tag===6?(n(v,f.sibling),f=s(f,p),f.return=v,v=f):(n(v,f),f=Ra(p,v.mode,_),f.return=v,v=f),o(v)):n(v,f)}return j}var Ur=Af(!0),Lf=Af(!1),yo=Ln(null),vo=null,Sr=null,Nc=null;function Rc(){Nc=Sr=vo=null}function Pc(t){var e=yo.current;we(yo),t._currentValue=e}function _l(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Tr(t,e){vo=t,Nc=Sr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(it=!0),t.firstContext=null)}function _t(t){var e=t._currentValue;if(Nc!==t)if(t={context:t,memoizedValue:e,next:null},Sr===null){if(vo===null)throw Error(U(308));Sr=t,vo.dependencies={lanes:0,firstContext:t}}else Sr=Sr.next=t;return e}var Vn=null;function Tc(t){Vn===null?Vn=[t]:Vn.push(t)}function Df(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Tc(e)):(n.next=s.next,s.next=n),e.interleaved=n,an(t,r)}function an(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var yn=!1;function Ic(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function nn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function En(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,an(t,n)}return s=r.interleaved,s===null?(e.next=e,Tc(r)):(e.next=s.next,s.next=e),r.interleaved=e,an(t,n)}function Fi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yc(t,n)}}function pd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wo(t,e,n,r){var s=t.updateQueue;yn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,y=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,w=l;switch(m=e,y=n,w.tag){case 1:if(x=w.payload,typeof x=="function"){h=x.call(y,h,m);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,m=typeof x=="function"?x.call(y,h,m):x,m==null)break e;h=Ce({},h,m);break e;case 2:yn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=y,c=h):d=d.next=y,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Zn|=o,t.lanes=o,t.memoizedState=h}}function md(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var ii={},Jt=Ln(ii),Ks=Ln(ii),Js=Ln(ii);function Kn(t){if(t===ii)throw Error(U(174));return t}function Oc(t,e){switch(ge(Js,e),ge(Ks,t),ge(Jt,ii),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nl(e,t)}we(Jt),ge(Jt,e)}function Fr(){we(Jt),we(Ks),we(Js)}function Mf(t){Kn(Js.current);var e=Kn(Jt.current),n=nl(e,t.type);e!==n&&(ge(Ks,t),ge(Jt,n))}function $c(t){Ks.current===t&&(we(Jt),we(Ks))}var Se=Ln(0);function xo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ka=[];function Ac(){for(var t=0;t<ka.length;t++)ka[t]._workInProgressVersionPrimary=null;ka.length=0}var zi=un.ReactCurrentDispatcher,Sa=un.ReactCurrentBatchConfig,Xn=0,je=null,Be=null,ze=null,bo=!1,Cs=!1,Qs=0,o0=0;function Ke(){throw Error(U(321))}function Lc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Dt(t[n],e[n]))return!1;return!0}function Dc(t,e,n,r,s,i){if(Xn=i,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zi.current=t===null||t.memoizedState===null?u0:d0,t=n(r,s),Cs){i=0;do{if(Cs=!1,Qs=0,25<=i)throw Error(U(301));i+=1,ze=Be=null,e.updateQueue=null,zi.current=h0,t=n(r,s)}while(Cs)}if(zi.current=_o,e=Be!==null&&Be.next!==null,Xn=0,ze=Be=je=null,bo=!1,e)throw Error(U(300));return t}function Bc(){var t=Qs!==0;return Qs=0,t}function qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?je.memoizedState=ze=t:ze=ze.next=t,ze}function kt(){if(Be===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var e=ze===null?je.memoizedState:ze.next;if(e!==null)ze=e,Be=t;else{if(t===null)throw Error(U(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},ze===null?je.memoizedState=ze=t:ze=ze.next=t}return ze}function Gs(t,e){return typeof e=="function"?e(t):e}function ja(t){var e=kt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Be,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Xn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,je.lanes|=d,Zn|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,Dt(r,e.memoizedState)||(it=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,je.lanes|=i,Zn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ca(t){var e=kt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Dt(i,e.memoizedState)||(it=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Uf(){}function Ff(t,e){var n=je,r=kt(),s=e(),i=!Dt(r.memoizedState,s);if(i&&(r.memoizedState=s,it=!0),r=r.queue,Mc(qf.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,Ys(9,Wf.bind(null,n,r,s,e),void 0,null),We===null)throw Error(U(349));Xn&30||zf(n,e,s)}return s}function zf(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Wf(t,e,n,r){e.value=n,e.getSnapshot=r,Hf(e)&&Vf(t)}function qf(t,e,n){return n(function(){Hf(e)&&Vf(t)})}function Hf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dt(t,n)}catch{return!0}}function Vf(t){var e=an(t,1);e!==null&&Lt(e,t,1,-1)}function gd(t){var e=qt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:t},e.queue=t,t=t.dispatch=c0.bind(null,je,t),[e.memoizedState,t]}function Ys(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Kf(){return kt().memoizedState}function Wi(t,e,n,r){var s=qt();je.flags|=t,s.memoizedState=Ys(1|e,n,void 0,r===void 0?null:r)}function Mo(t,e,n,r){var s=kt();r=r===void 0?null:r;var i=void 0;if(Be!==null){var o=Be.memoizedState;if(i=o.destroy,r!==null&&Lc(r,o.deps)){s.memoizedState=Ys(e,n,i,r);return}}je.flags|=t,s.memoizedState=Ys(1|e,n,i,r)}function yd(t,e){return Wi(8390656,8,t,e)}function Mc(t,e){return Mo(2048,8,t,e)}function Jf(t,e){return Mo(4,2,t,e)}function Qf(t,e){return Mo(4,4,t,e)}function Gf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Yf(t,e,n){return n=n!=null?n.concat([t]):null,Mo(4,4,Gf.bind(null,e,t),n)}function Uc(){}function Xf(t,e){var n=kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Zf(t,e){var n=kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ep(t,e,n){return Xn&21?(Dt(n,e)||(n=sf(),je.lanes|=n,Zn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,it=!0),t.memoizedState=n)}function a0(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=Sa.transition;Sa.transition={};try{t(!1),e()}finally{fe=n,Sa.transition=r}}function tp(){return kt().memoizedState}function l0(t,e,n){var r=Rn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},np(t))rp(e,n);else if(n=Df(t,e,n,r),n!==null){var s=Ze();Lt(n,t,r,s),sp(n,e,r)}}function c0(t,e,n){var r=Rn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(np(t))rp(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Dt(l,o)){var c=e.interleaved;c===null?(s.next=s,Tc(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Df(t,e,s,r),n!==null&&(s=Ze(),Lt(n,t,r,s),sp(n,e,r))}}function np(t){var e=t.alternate;return t===je||e!==null&&e===je}function rp(t,e){Cs=bo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yc(t,n)}}var _o={readContext:_t,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useInsertionEffect:Ke,useLayoutEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useMutableSource:Ke,useSyncExternalStore:Ke,useId:Ke,unstable_isNewReconciler:!1},u0={readContext:_t,useCallback:function(t,e){return qt().memoizedState=[t,e===void 0?null:e],t},useContext:_t,useEffect:yd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Wi(4194308,4,Gf.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wi(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wi(4,2,t,e)},useMemo:function(t,e){var n=qt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=l0.bind(null,je,t),[r.memoizedState,t]},useRef:function(t){var e=qt();return t={current:t},e.memoizedState=t},useState:gd,useDebugValue:Uc,useDeferredValue:function(t){return qt().memoizedState=t},useTransition:function(){var t=gd(!1),e=t[0];return t=a0.bind(null,t[1]),qt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=je,s=qt();if(xe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),We===null)throw Error(U(349));Xn&30||zf(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,yd(qf.bind(null,r,i,t),[t]),r.flags|=2048,Ys(9,Wf.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=qt(),e=We.identifierPrefix;if(xe){var n=tn,r=en;n=(r&~(1<<32-At(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=o0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},d0={readContext:_t,useCallback:Xf,useContext:_t,useEffect:Mc,useImperativeHandle:Yf,useInsertionEffect:Jf,useLayoutEffect:Qf,useMemo:Zf,useReducer:ja,useRef:Kf,useState:function(){return ja(Gs)},useDebugValue:Uc,useDeferredValue:function(t){var e=kt();return ep(e,Be.memoizedState,t)},useTransition:function(){var t=ja(Gs)[0],e=kt().memoizedState;return[t,e]},useMutableSource:Uf,useSyncExternalStore:Ff,useId:tp,unstable_isNewReconciler:!1},h0={readContext:_t,useCallback:Xf,useContext:_t,useEffect:Mc,useImperativeHandle:Yf,useInsertionEffect:Jf,useLayoutEffect:Qf,useMemo:Zf,useReducer:Ca,useRef:Kf,useState:function(){return Ca(Gs)},useDebugValue:Uc,useDeferredValue:function(t){var e=kt();return Be===null?e.memoizedState=t:ep(e,Be.memoizedState,t)},useTransition:function(){var t=Ca(Gs)[0],e=kt().memoizedState;return[t,e]},useMutableSource:Uf,useSyncExternalStore:Ff,useId:tp,unstable_isNewReconciler:!1};function Nt(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function kl(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Uo={isMounted:function(t){return(t=t._reactInternals)?rr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ze(),s=Rn(t),i=nn(r,s);i.payload=e,n!=null&&(i.callback=n),e=En(t,i,s),e!==null&&(Lt(e,t,s,r),Fi(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ze(),s=Rn(t),i=nn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=En(t,i,s),e!==null&&(Lt(e,t,s,r),Fi(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ze(),r=Rn(t),s=nn(n,r);s.tag=2,e!=null&&(s.callback=e),e=En(t,s,r),e!==null&&(Lt(e,t,r,n),Fi(e,t,r))}};function vd(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ws(n,r)||!Ws(s,i):!0}function ip(t,e,n){var r=!1,s=$n,i=e.contextType;return typeof i=="object"&&i!==null?i=_t(i):(s=at(e)?Gn:Ge.current,r=e.contextTypes,i=(r=r!=null)?Br(t,s):$n),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Uo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function wd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Uo.enqueueReplaceState(e,e.state,null)}function Sl(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ic(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=_t(i):(i=at(e)?Gn:Ge.current,s.context=Br(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(kl(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Uo.enqueueReplaceState(s,s.state,null),wo(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function zr(t,e){try{var n="",r=e;do n+=Ug(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ea(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var f0=typeof WeakMap=="function"?WeakMap:Map;function op(t,e,n){n=nn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){So||(So=!0,Al=r),jl(t,e)},n}function ap(t,e,n){n=nn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){jl(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){jl(t,e),typeof r!="function"&&(Nn===null?Nn=new Set([this]):Nn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function xd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new f0;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=E0.bind(null,t,e,n),e.then(t,t))}function bd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _d(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=nn(-1,1),e.tag=2,En(n,e,1))),n.lanes|=1),t)}var p0=un.ReactCurrentOwner,it=!1;function Xe(t,e,n,r){e.child=t===null?Lf(e,null,n,r):Ur(e,t.child,n,r)}function kd(t,e,n,r,s){n=n.render;var i=e.ref;return Tr(e,s),r=Dc(t,e,n,r,i,s),n=Bc(),t!==null&&!it?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ln(t,e,s)):(xe&&n&&jc(e),e.flags|=1,Xe(t,e,r,s),e.child)}function Sd(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Jc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,lp(t,e,i,r,s)):(t=Ki(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ws,n(o,r)&&t.ref===e.ref)return ln(t,e,s)}return e.flags|=1,t=Pn(i,r),t.ref=e.ref,t.return=e,e.child=t}function lp(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ws(i,r)&&t.ref===e.ref)if(it=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(it=!0);else return e.lanes=t.lanes,ln(t,e,s)}return Cl(t,e,n,r,s)}function cp(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(Cr,ct),ct|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(Cr,ct),ct|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ge(Cr,ct),ct|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ge(Cr,ct),ct|=r;return Xe(t,e,s,n),e.child}function up(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Cl(t,e,n,r,s){var i=at(n)?Gn:Ge.current;return i=Br(e,i),Tr(e,s),n=Dc(t,e,n,r,i,s),r=Bc(),t!==null&&!it?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ln(t,e,s)):(xe&&r&&jc(e),e.flags|=1,Xe(t,e,n,s),e.child)}function jd(t,e,n,r,s){if(at(n)){var i=!0;po(e)}else i=!1;if(Tr(e,s),e.stateNode===null)qi(t,e),ip(e,n,r),Sl(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=_t(u):(u=at(n)?Gn:Ge.current,u=Br(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&wd(e,o,r,u),yn=!1;var m=e.memoizedState;o.state=m,wo(e,r,o,s),c=e.memoizedState,l!==r||m!==c||ot.current||yn?(typeof d=="function"&&(kl(e,n,d,r),c=e.memoizedState),(l=yn||vd(e,n,l,r,m,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Bf(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Nt(e.type,l),o.props=u,h=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=_t(c):(c=at(n)?Gn:Ge.current,c=Br(e,c));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&wd(e,o,r,c),yn=!1,m=e.memoizedState,o.state=m,wo(e,r,o,s);var x=e.memoizedState;l!==h||m!==x||ot.current||yn?(typeof y=="function"&&(kl(e,n,y,r),x=e.memoizedState),(u=yn||vd(e,n,u,r,m,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return El(t,e,n,r,i,s)}function El(t,e,n,r,s,i){up(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&ud(e,n,!1),ln(t,e,i);r=e.stateNode,p0.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ur(e,t.child,null,i),e.child=Ur(e,null,l,i)):Xe(t,e,l,i),e.memoizedState=r.state,s&&ud(e,n,!0),e.child}function dp(t){var e=t.stateNode;e.pendingContext?cd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cd(t,e.context,!1),Oc(t,e.containerInfo)}function Cd(t,e,n,r,s){return Mr(),Ec(s),e.flags|=256,Xe(t,e,n,r),e.child}var Nl={dehydrated:null,treeContext:null,retryLane:0};function Rl(t){return{baseLanes:t,cachePool:null,transitions:null}}function hp(t,e,n){var r=e.pendingProps,s=Se.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ge(Se,s&1),t===null)return bl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Wo(o,r,0,null),t=Qn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Rl(n),e.memoizedState=Nl,t):Fc(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return m0(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Pn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Pn(l,i):(i=Qn(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Rl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Nl,r}return i=t.child,t=i.sibling,r=Pn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fc(t,e){return e=Wo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ci(t,e,n,r){return r!==null&&Ec(r),Ur(e,t.child,null,n),t=Fc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function m0(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ea(Error(U(422))),Ci(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Wo({mode:"visible",children:r.children},s,0,null),i=Qn(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ur(e,t.child,null,o),e.child.memoizedState=Rl(o),e.memoizedState=Nl,i);if(!(e.mode&1))return Ci(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=Ea(i,r,void 0),Ci(t,e,o,r)}if(l=(o&t.childLanes)!==0,it||l){if(r=We,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,an(t,s),Lt(r,t,s,-1))}return Kc(),r=Ea(Error(U(421))),Ci(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=N0.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ut=Cn(s.nextSibling),dt=e,xe=!0,It=null,t!==null&&(gt[yt++]=en,gt[yt++]=tn,gt[yt++]=Yn,en=t.id,tn=t.overflow,Yn=e),e=Fc(e,r.children),e.flags|=4096,e)}function Ed(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),_l(t.return,e,n)}function Na(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function fp(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Xe(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ed(t,n,e);else if(t.tag===19)Ed(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(Se,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&xo(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Na(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&xo(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Na(e,!0,n,null,i);break;case"together":Na(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ln(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Pn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function g0(t,e,n){switch(e.tag){case 3:dp(e),Mr();break;case 5:Mf(e);break;case 1:at(e.type)&&po(e);break;case 4:Oc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ge(yo,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?hp(t,e,n):(ge(Se,Se.current&1),t=ln(t,e,n),t!==null?t.sibling:null);ge(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return fp(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,cp(t,e,n)}return ln(t,e,n)}var pp,Pl,mp,gp;pp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pl=function(){};mp=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Kn(Jt.current);var i=null;switch(n){case"input":s=Xa(t,s),r=Xa(t,r),i=[];break;case"select":s=Ce({},s,{value:void 0}),r=Ce({},r,{value:void 0}),i=[];break;case"textarea":s=tl(t,s),r=tl(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ho)}rl(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ls.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ls.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ve("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};gp=function(t,e,n,r){n!==r&&(e.flags|=4)};function ls(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function y0(t,e,n){var r=e.pendingProps;switch(Cc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(e),null;case 1:return at(e.type)&&fo(),Je(e),null;case 3:return r=e.stateNode,Fr(),we(ot),we(Ge),Ac(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Si(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,It!==null&&(Bl(It),It=null))),Pl(t,e),Je(e),null;case 5:$c(e);var s=Kn(Js.current);if(n=e.type,t!==null&&e.stateNode!=null)mp(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Je(e),null}if(t=Kn(Jt.current),Si(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Vt]=e,r[Vs]=i,t=(e.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(s=0;s<vs.length;s++)ve(vs[s],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":Lu(r,i),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ve("invalid",r);break;case"textarea":Bu(r,i),ve("invalid",r)}rl(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ki(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ki(r.textContent,l,t),s=["children",""+l]):Ls.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ve("scroll",r)}switch(n){case"input":mi(r),Du(r,i,!0);break;case"textarea":mi(r),Mu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ho)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Wh(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Vt]=e,t[Vs]=r,pp(t,e,!1,!1),e.stateNode=t;e:{switch(o=sl(n,r),n){case"dialog":ve("cancel",t),ve("close",t),s=r;break;case"iframe":case"object":case"embed":ve("load",t),s=r;break;case"video":case"audio":for(s=0;s<vs.length;s++)ve(vs[s],t);s=r;break;case"source":ve("error",t),s=r;break;case"img":case"image":case"link":ve("error",t),ve("load",t),s=r;break;case"details":ve("toggle",t),s=r;break;case"input":Lu(t,r),s=Xa(t,r),ve("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ce({},r,{value:void 0}),ve("invalid",t);break;case"textarea":Bu(t,r),s=tl(t,r),ve("invalid",t);break;default:s=r}rl(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Vh(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qh(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ds(t,c):typeof c=="number"&&Ds(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ls.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ve("scroll",t):c!=null&&dc(t,i,c,o))}switch(n){case"input":mi(t),Du(t,r,!1);break;case"textarea":mi(t),Mu(t);break;case"option":r.value!=null&&t.setAttribute("value",""+On(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Er(t,!!r.multiple,i,!1):r.defaultValue!=null&&Er(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ho)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Je(e),null;case 6:if(t&&e.stateNode!=null)gp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Kn(Js.current),Kn(Jt.current),Si(e)){if(r=e.stateNode,n=e.memoizedProps,r[Vt]=e,(i=r.nodeValue!==n)&&(t=dt,t!==null))switch(t.tag){case 3:ki(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ki(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vt]=e,e.stateNode=r}return Je(e),null;case 13:if(we(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&ut!==null&&e.mode&1&&!(e.flags&128))$f(),Mr(),e.flags|=98560,i=!1;else if(i=Si(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Vt]=e}else Mr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Je(e),i=!1}else It!==null&&(Bl(It),It=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?Me===0&&(Me=3):Kc())),e.updateQueue!==null&&(e.flags|=4),Je(e),null);case 4:return Fr(),Pl(t,e),t===null&&qs(e.stateNode.containerInfo),Je(e),null;case 10:return Pc(e.type._context),Je(e),null;case 17:return at(e.type)&&fo(),Je(e),null;case 19:if(we(Se),i=e.memoizedState,i===null)return Je(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ls(i,!1);else{if(Me!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xo(t),o!==null){for(e.flags|=128,ls(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(Se,Se.current&1|2),e.child}t=t.sibling}i.tail!==null&&Pe()>Wr&&(e.flags|=128,r=!0,ls(i,!1),e.lanes=4194304)}else{if(!r)if(t=xo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ls(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xe)return Je(e),null}else 2*Pe()-i.renderingStartTime>Wr&&n!==1073741824&&(e.flags|=128,r=!0,ls(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Pe(),e.sibling=null,n=Se.current,ge(Se,r?n&1|2:n&1),e):(Je(e),null);case 22:case 23:return Vc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ct&1073741824&&(Je(e),e.subtreeFlags&6&&(e.flags|=8192)):Je(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function v0(t,e){switch(Cc(e),e.tag){case 1:return at(e.type)&&fo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fr(),we(ot),we(Ge),Ac(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $c(e),null;case 13:if(we(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Mr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(Se),null;case 4:return Fr(),null;case 10:return Pc(e.type._context),null;case 22:case 23:return Vc(),null;case 24:return null;default:return null}}var Ei=!1,Qe=!1,w0=typeof WeakSet=="function"?WeakSet:Set,H=null;function jr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ee(t,e,r)}else n.current=null}function Tl(t,e,n){try{n()}catch(r){Ee(t,e,r)}}var Nd=!1;function x0(t,e){if(pl=lo,t=bf(),Sc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var y;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)m=h,h=y;for(;;){if(h===t)break t;if(m===n&&++u===s&&(l=o),m===i&&++d===r&&(c=o),(y=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ml={focusedElem:t,selectionRange:n},lo=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,j=x.memoizedState,v=e.stateNode,f=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:Nt(e.type,w),j);v.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var p=e.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(_){Ee(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return x=Nd,Nd=!1,x}function Es(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Tl(e,n,i)}s=s.next}while(s!==r)}}function Fo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Il(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yp(t){var e=t.alternate;e!==null&&(t.alternate=null,yp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vt],delete e[Vs],delete e[vl],delete e[n0],delete e[r0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vp(t){return t.tag===5||t.tag===3||t.tag===4}function Rd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ol(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ho));else if(r!==4&&(t=t.child,t!==null))for(Ol(t,e,n),t=t.sibling;t!==null;)Ol(t,e,n),t=t.sibling}function $l(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($l(t,e,n),t=t.sibling;t!==null;)$l(t,e,n),t=t.sibling}var qe=null,Rt=!1;function fn(t,e,n){for(n=n.child;n!==null;)wp(t,e,n),n=n.sibling}function wp(t,e,n){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Oo,n)}catch{}switch(n.tag){case 5:Qe||jr(n,e);case 6:var r=qe,s=Rt;qe=null,fn(t,e,n),qe=r,Rt=s,qe!==null&&(Rt?(t=qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Rt?(t=qe,n=n.stateNode,t.nodeType===8?ba(t.parentNode,n):t.nodeType===1&&ba(t,n),Fs(t)):ba(qe,n.stateNode));break;case 4:r=qe,s=Rt,qe=n.stateNode.containerInfo,Rt=!0,fn(t,e,n),qe=r,Rt=s;break;case 0:case 11:case 14:case 15:if(!Qe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Tl(n,e,o),s=s.next}while(s!==r)}fn(t,e,n);break;case 1:if(!Qe&&(jr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ee(n,e,l)}fn(t,e,n);break;case 21:fn(t,e,n);break;case 22:n.mode&1?(Qe=(r=Qe)||n.memoizedState!==null,fn(t,e,n),Qe=r):fn(t,e,n);break;default:fn(t,e,n)}}function Pd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new w0),e.forEach(function(r){var s=R0.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Et(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:qe=l.stateNode,Rt=!1;break e;case 3:qe=l.stateNode.containerInfo,Rt=!0;break e;case 4:qe=l.stateNode.containerInfo,Rt=!0;break e}l=l.return}if(qe===null)throw Error(U(160));wp(i,o,s),qe=null,Rt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ee(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)xp(e,t),e=e.sibling}function xp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Et(e,t),Ft(t),r&4){try{Es(3,t,t.return),Fo(3,t)}catch(w){Ee(t,t.return,w)}try{Es(5,t,t.return)}catch(w){Ee(t,t.return,w)}}break;case 1:Et(e,t),Ft(t),r&512&&n!==null&&jr(n,n.return);break;case 5:if(Et(e,t),Ft(t),r&512&&n!==null&&jr(n,n.return),t.flags&32){var s=t.stateNode;try{Ds(s,"")}catch(w){Ee(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Fh(s,i),sl(l,o);var u=sl(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Vh(s,h):d==="dangerouslySetInnerHTML"?qh(s,h):d==="children"?Ds(s,h):dc(s,d,h,u)}switch(l){case"input":Za(s,i);break;case"textarea":zh(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Er(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?Er(s,!!i.multiple,i.defaultValue,!0):Er(s,!!i.multiple,i.multiple?[]:"",!1))}s[Vs]=i}catch(w){Ee(t,t.return,w)}}break;case 6:if(Et(e,t),Ft(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){Ee(t,t.return,w)}}break;case 3:if(Et(e,t),Ft(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fs(e.containerInfo)}catch(w){Ee(t,t.return,w)}break;case 4:Et(e,t),Ft(t);break;case 13:Et(e,t),Ft(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(qc=Pe())),r&4&&Pd(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Qe=(u=Qe)||d,Et(e,t),Qe=u):Et(e,t),Ft(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(H=t,d=t.child;d!==null;){for(h=H=d;H!==null;){switch(m=H,y=m.child,m.tag){case 0:case 11:case 14:case 15:Es(4,m,m.return);break;case 1:jr(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(w){Ee(r,n,w)}}break;case 5:jr(m,m.return);break;case 22:if(m.memoizedState!==null){Id(h);continue}}y!==null?(y.return=m,H=y):Id(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Hh("display",o))}catch(w){Ee(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){Ee(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Et(e,t),Ft(t),r&4&&Pd(t);break;case 21:break;default:Et(e,t),Ft(t)}}function Ft(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(vp(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ds(s,""),r.flags&=-33);var i=Rd(t);$l(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Rd(t);Ol(t,l,o);break;default:throw Error(U(161))}}catch(c){Ee(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function b0(t,e,n){H=t,bp(t)}function bp(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ei;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Qe;l=Ei;var u=Qe;if(Ei=o,(Qe=c)&&!u)for(H=s;H!==null;)o=H,c=o.child,o.tag===22&&o.memoizedState!==null?Od(s):c!==null?(c.return=o,H=c):Od(s);for(;i!==null;)H=i,bp(i),i=i.sibling;H=s,Ei=l,Qe=u}Td(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):Td(t)}}function Td(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qe||Fo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qe)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Nt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&md(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}md(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Fs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Qe||e.flags&512&&Il(e)}catch(m){Ee(e,e.return,m)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Id(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Od(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fo(4,e)}catch(c){Ee(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ee(e,s,c)}}var i=e.return;try{Il(e)}catch(c){Ee(e,i,c)}break;case 5:var o=e.return;try{Il(e)}catch(c){Ee(e,o,c)}}}catch(c){Ee(e,e.return,c)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var _0=Math.ceil,ko=un.ReactCurrentDispatcher,zc=un.ReactCurrentOwner,xt=un.ReactCurrentBatchConfig,ae=0,We=null,Oe=null,He=0,ct=0,Cr=Ln(0),Me=0,Xs=null,Zn=0,zo=0,Wc=0,Ns=null,rt=null,qc=0,Wr=1/0,Gt=null,So=!1,Al=null,Nn=null,Ni=!1,_n=null,jo=0,Rs=0,Ll=null,Hi=-1,Vi=0;function Ze(){return ae&6?Pe():Hi!==-1?Hi:Hi=Pe()}function Rn(t){return t.mode&1?ae&2&&He!==0?He&-He:i0.transition!==null?(Vi===0&&(Vi=sf()),Vi):(t=fe,t!==0||(t=window.event,t=t===void 0?16:hf(t.type)),t):1}function Lt(t,e,n,r){if(50<Rs)throw Rs=0,Ll=null,Error(U(185));ni(t,n,r),(!(ae&2)||t!==We)&&(t===We&&(!(ae&2)&&(zo|=n),Me===4&&wn(t,He)),lt(t,r),n===1&&ae===0&&!(e.mode&1)&&(Wr=Pe()+500,Bo&&Dn()))}function lt(t,e){var n=t.callbackNode;iy(t,e);var r=ao(t,t===We?He:0);if(r===0)n!==null&&zu(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zu(n),e===1)t.tag===0?s0($d.bind(null,t)):Tf($d.bind(null,t)),e0(function(){!(ae&6)&&Dn()}),n=null;else{switch(of(r)){case 1:n=gc;break;case 4:n=nf;break;case 16:n=oo;break;case 536870912:n=rf;break;default:n=oo}n=Rp(n,_p.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _p(t,e){if(Hi=-1,Vi=0,ae&6)throw Error(U(327));var n=t.callbackNode;if(Ir()&&t.callbackNode!==n)return null;var r=ao(t,t===We?He:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Co(t,r);else{e=r;var s=ae;ae|=2;var i=Sp();(We!==t||He!==e)&&(Gt=null,Wr=Pe()+500,Jn(t,e));do try{j0();break}catch(l){kp(t,l)}while(!0);Rc(),ko.current=i,ae=s,Oe!==null?e=0:(We=null,He=0,e=Me)}if(e!==0){if(e===2&&(s=cl(t),s!==0&&(r=s,e=Dl(t,s))),e===1)throw n=Xs,Jn(t,0),wn(t,r),lt(t,Pe()),n;if(e===6)wn(t,r);else{if(s=t.current.alternate,!(r&30)&&!k0(s)&&(e=Co(t,r),e===2&&(i=cl(t),i!==0&&(r=i,e=Dl(t,i))),e===1))throw n=Xs,Jn(t,0),wn(t,r),lt(t,Pe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:zn(t,rt,Gt);break;case 3:if(wn(t,r),(r&130023424)===r&&(e=qc+500-Pe(),10<e)){if(ao(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ze(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=yl(zn.bind(null,t,rt,Gt),e);break}zn(t,rt,Gt);break;case 4:if(wn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-At(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_0(r/1960))-r,10<r){t.timeoutHandle=yl(zn.bind(null,t,rt,Gt),r);break}zn(t,rt,Gt);break;case 5:zn(t,rt,Gt);break;default:throw Error(U(329))}}}return lt(t,Pe()),t.callbackNode===n?_p.bind(null,t):null}function Dl(t,e){var n=Ns;return t.current.memoizedState.isDehydrated&&(Jn(t,e).flags|=256),t=Co(t,e),t!==2&&(e=rt,rt=n,e!==null&&Bl(e)),t}function Bl(t){rt===null?rt=t:rt.push.apply(rt,t)}function k0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Dt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wn(t,e){for(e&=~Wc,e&=~zo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-At(e),r=1<<n;t[n]=-1,e&=~r}}function $d(t){if(ae&6)throw Error(U(327));Ir();var e=ao(t,0);if(!(e&1))return lt(t,Pe()),null;var n=Co(t,e);if(t.tag!==0&&n===2){var r=cl(t);r!==0&&(e=r,n=Dl(t,r))}if(n===1)throw n=Xs,Jn(t,0),wn(t,e),lt(t,Pe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zn(t,rt,Gt),lt(t,Pe()),null}function Hc(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(Wr=Pe()+500,Bo&&Dn())}}function er(t){_n!==null&&_n.tag===0&&!(ae&6)&&Ir();var e=ae;ae|=1;var n=xt.transition,r=fe;try{if(xt.transition=null,fe=1,t)return t()}finally{fe=r,xt.transition=n,ae=e,!(ae&6)&&Dn()}}function Vc(){ct=Cr.current,we(Cr)}function Jn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Zy(n)),Oe!==null)for(n=Oe.return;n!==null;){var r=n;switch(Cc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fo();break;case 3:Fr(),we(ot),we(Ge),Ac();break;case 5:$c(r);break;case 4:Fr();break;case 13:we(Se);break;case 19:we(Se);break;case 10:Pc(r.type._context);break;case 22:case 23:Vc()}n=n.return}if(We=t,Oe=t=Pn(t.current,null),He=ct=e,Me=0,Xs=null,Wc=zo=Zn=0,rt=Ns=null,Vn!==null){for(e=0;e<Vn.length;e++)if(n=Vn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Vn=null}return t}function kp(t,e){do{var n=Oe;try{if(Rc(),zi.current=_o,bo){for(var r=je.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}bo=!1}if(Xn=0,ze=Be=je=null,Cs=!1,Qs=0,zc.current=null,n===null||n.return===null){Me=1,Xs=e,Oe=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=He,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=bd(o);if(y!==null){y.flags&=-257,_d(y,o,l,i,e),y.mode&1&&xd(i,u,e),e=y,c=u;var x=e.updateQueue;if(x===null){var w=new Set;w.add(c),e.updateQueue=w}else x.add(c);break e}else{if(!(e&1)){xd(i,u,e),Kc();break e}c=Error(U(426))}}else if(xe&&l.mode&1){var j=bd(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),_d(j,o,l,i,e),Ec(zr(c,l));break e}}i=c=zr(c,l),Me!==4&&(Me=2),Ns===null?Ns=[i]:Ns.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=op(i,c,e);pd(i,v);break e;case 1:l=c;var f=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Nn===null||!Nn.has(p)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=ap(i,l,e);pd(i,_);break e}}i=i.return}while(i!==null)}Cp(n)}catch(E){e=E,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(!0)}function Sp(){var t=ko.current;return ko.current=_o,t===null?_o:t}function Kc(){(Me===0||Me===3||Me===2)&&(Me=4),We===null||!(Zn&268435455)&&!(zo&268435455)||wn(We,He)}function Co(t,e){var n=ae;ae|=2;var r=Sp();(We!==t||He!==e)&&(Gt=null,Jn(t,e));do try{S0();break}catch(s){kp(t,s)}while(!0);if(Rc(),ae=n,ko.current=r,Oe!==null)throw Error(U(261));return We=null,He=0,Me}function S0(){for(;Oe!==null;)jp(Oe)}function j0(){for(;Oe!==null&&!Gg();)jp(Oe)}function jp(t){var e=Np(t.alternate,t,ct);t.memoizedProps=t.pendingProps,e===null?Cp(t):Oe=e,zc.current=null}function Cp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=v0(n,e),n!==null){n.flags&=32767,Oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Me=6,Oe=null;return}}else if(n=y0(n,e,ct),n!==null){Oe=n;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);Me===0&&(Me=5)}function zn(t,e,n){var r=fe,s=xt.transition;try{xt.transition=null,fe=1,C0(t,e,n,r)}finally{xt.transition=s,fe=r}return null}function C0(t,e,n,r){do Ir();while(_n!==null);if(ae&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(oy(t,i),t===We&&(Oe=We=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ni||(Ni=!0,Rp(oo,function(){return Ir(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=xt.transition,xt.transition=null;var o=fe;fe=1;var l=ae;ae|=4,zc.current=null,x0(t,n),xp(n,t),Vy(ml),lo=!!pl,ml=pl=null,t.current=n,b0(n),Yg(),ae=l,fe=o,xt.transition=i}else t.current=n;if(Ni&&(Ni=!1,_n=t,jo=s),i=t.pendingLanes,i===0&&(Nn=null),ey(n.stateNode),lt(t,Pe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(So)throw So=!1,t=Al,Al=null,t;return jo&1&&t.tag!==0&&Ir(),i=t.pendingLanes,i&1?t===Ll?Rs++:(Rs=0,Ll=t):Rs=0,Dn(),null}function Ir(){if(_n!==null){var t=of(jo),e=xt.transition,n=fe;try{if(xt.transition=null,fe=16>t?16:t,_n===null)var r=!1;else{if(t=_n,_n=null,jo=0,ae&6)throw Error(U(331));var s=ae;for(ae|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(H=u;H!==null;){var d=H;switch(d.tag){case 0:case 11:case 15:Es(8,d,i)}var h=d.child;if(h!==null)h.return=d,H=h;else for(;H!==null;){d=H;var m=d.sibling,y=d.return;if(yp(d),d===u){H=null;break}if(m!==null){m.return=y,H=m;break}H=y}}}var x=i.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var j=w.sibling;w.sibling=null,w=j}while(w!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Es(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,H=v;break e}H=i.return}}var f=t.current;for(H=f;H!==null;){o=H;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,H=p;else e:for(o=f;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Fo(9,l)}}catch(E){Ee(l,l.return,E)}if(l===o){H=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,H=_;break e}H=l.return}}if(ae=s,Dn(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Oo,t)}catch{}r=!0}return r}finally{fe=n,xt.transition=e}}return!1}function Ad(t,e,n){e=zr(n,e),e=op(t,e,1),t=En(t,e,1),e=Ze(),t!==null&&(ni(t,1,e),lt(t,e))}function Ee(t,e,n){if(t.tag===3)Ad(t,t,n);else for(;e!==null;){if(e.tag===3){Ad(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nn===null||!Nn.has(r))){t=zr(n,t),t=ap(e,t,1),e=En(e,t,1),t=Ze(),e!==null&&(ni(e,1,t),lt(e,t));break}}e=e.return}}function E0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ze(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(He&n)===n&&(Me===4||Me===3&&(He&130023424)===He&&500>Pe()-qc?Jn(t,0):Wc|=n),lt(t,e)}function Ep(t,e){e===0&&(t.mode&1?(e=vi,vi<<=1,!(vi&130023424)&&(vi=4194304)):e=1);var n=Ze();t=an(t,e),t!==null&&(ni(t,e,n),lt(t,n))}function N0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ep(t,n)}function R0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),Ep(t,n)}var Np;Np=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ot.current)it=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return it=!1,g0(t,e,n);it=!!(t.flags&131072)}else it=!1,xe&&e.flags&1048576&&If(e,go,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qi(t,e),t=e.pendingProps;var s=Br(e,Ge.current);Tr(e,n),s=Dc(null,e,r,t,s,n);var i=Bc();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,at(r)?(i=!0,po(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ic(e),s.updater=Uo,e.stateNode=s,s._reactInternals=e,Sl(e,r,t,n),e=El(null,e,r,!0,i,n)):(e.tag=0,xe&&i&&jc(e),Xe(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(qi(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=T0(r),t=Nt(r,t),s){case 0:e=Cl(null,e,r,t,n);break e;case 1:e=jd(null,e,r,t,n);break e;case 11:e=kd(null,e,r,t,n);break e;case 14:e=Sd(null,e,r,Nt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Nt(r,s),Cl(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Nt(r,s),jd(t,e,r,s,n);case 3:e:{if(dp(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Bf(t,e),wo(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=zr(Error(U(423)),e),e=Cd(t,e,r,n,s);break e}else if(r!==s){s=zr(Error(U(424)),e),e=Cd(t,e,r,n,s);break e}else for(ut=Cn(e.stateNode.containerInfo.firstChild),dt=e,xe=!0,It=null,n=Lf(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mr(),r===s){e=ln(t,e,n);break e}Xe(t,e,r,n)}e=e.child}return e;case 5:return Mf(e),t===null&&bl(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,gl(r,s)?o=null:i!==null&&gl(r,i)&&(e.flags|=32),up(t,e),Xe(t,e,o,n),e.child;case 6:return t===null&&bl(e),null;case 13:return hp(t,e,n);case 4:return Oc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ur(e,null,r,n):Xe(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Nt(r,s),kd(t,e,r,s,n);case 7:return Xe(t,e,e.pendingProps,n),e.child;case 8:return Xe(t,e,e.pendingProps.children,n),e.child;case 12:return Xe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ge(yo,r._currentValue),r._currentValue=o,i!==null)if(Dt(i.value,o)){if(i.children===s.children&&!ot.current){e=ln(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=nn(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),_l(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),_l(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Xe(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Tr(e,n),s=_t(s),r=r(s),e.flags|=1,Xe(t,e,r,n),e.child;case 14:return r=e.type,s=Nt(r,e.pendingProps),s=Nt(r.type,s),Sd(t,e,r,s,n);case 15:return lp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Nt(r,s),qi(t,e),e.tag=1,at(r)?(t=!0,po(e)):t=!1,Tr(e,n),ip(e,r,s),Sl(e,r,s,n),El(null,e,r,!0,t,n);case 19:return fp(t,e,n);case 22:return cp(t,e,n)}throw Error(U(156,e.tag))};function Rp(t,e){return tf(t,e)}function P0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(t,e,n,r){return new P0(t,e,n,r)}function Jc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function T0(t){if(typeof t=="function")return Jc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fc)return 11;if(t===pc)return 14}return 2}function Pn(t,e){var n=t.alternate;return n===null?(n=wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ki(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Jc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case gr:return Qn(n.children,s,i,e);case hc:o=8,s|=8;break;case Ja:return t=wt(12,n,e,s|2),t.elementType=Ja,t.lanes=i,t;case Qa:return t=wt(13,n,e,s),t.elementType=Qa,t.lanes=i,t;case Ga:return t=wt(19,n,e,s),t.elementType=Ga,t.lanes=i,t;case Bh:return Wo(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Lh:o=10;break e;case Dh:o=9;break e;case fc:o=11;break e;case pc:o=14;break e;case gn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=wt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Qn(t,e,n,r){return t=wt(7,t,r,e),t.lanes=n,t}function Wo(t,e,n,r){return t=wt(22,t,r,e),t.elementType=Bh,t.lanes=n,t.stateNode={isHidden:!1},t}function Ra(t,e,n){return t=wt(6,t,null,e),t.lanes=n,t}function Pa(t,e,n){return e=wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function I0(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ua(0),this.expirationTimes=ua(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ua(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Qc(t,e,n,r,s,i,o,l,c){return t=new I0(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=wt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ic(i),t}function O0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Pp(t){if(!t)return $n;t=t._reactInternals;e:{if(rr(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(at(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(at(n))return Pf(t,n,e)}return e}function Tp(t,e,n,r,s,i,o,l,c){return t=Qc(n,r,!0,t,s,i,o,l,c),t.context=Pp(null),n=t.current,r=Ze(),s=Rn(n),i=nn(r,s),i.callback=e??null,En(n,i,s),t.current.lanes=s,ni(t,s,r),lt(t,r),t}function qo(t,e,n,r){var s=e.current,i=Ze(),o=Rn(s);return n=Pp(n),e.context===null?e.context=n:e.pendingContext=n,e=nn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=En(s,e,o),t!==null&&(Lt(t,s,o,i),Fi(t,s,o)),o}function Eo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ld(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Gc(t,e){Ld(t,e),(t=t.alternate)&&Ld(t,e)}function $0(){return null}var Ip=typeof reportError=="function"?reportError:function(t){console.error(t)};function Yc(t){this._internalRoot=t}Ho.prototype.render=Yc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));qo(t,e,null,null)};Ho.prototype.unmount=Yc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;er(function(){qo(null,t,null,null)}),e[on]=null}};function Ho(t){this._internalRoot=t}Ho.prototype.unstable_scheduleHydration=function(t){if(t){var e=cf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vn.length&&e!==0&&e<vn[n].priority;n++);vn.splice(n,0,t),n===0&&df(t)}};function Xc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dd(){}function A0(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Eo(o);i.call(u)}}var o=Tp(e,r,t,0,null,!1,!1,"",Dd);return t._reactRootContainer=o,t[on]=o.current,qs(t.nodeType===8?t.parentNode:t),er(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Eo(c);l.call(u)}}var c=Qc(t,0,!1,null,null,!1,!1,"",Dd);return t._reactRootContainer=c,t[on]=c.current,qs(t.nodeType===8?t.parentNode:t),er(function(){qo(e,c,n,r)}),c}function Ko(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Eo(o);l.call(c)}}qo(e,o,t,s)}else o=A0(n,e,t,s,r);return Eo(o)}af=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ys(e.pendingLanes);n!==0&&(yc(e,n|1),lt(e,Pe()),!(ae&6)&&(Wr=Pe()+500,Dn()))}break;case 13:er(function(){var r=an(t,1);if(r!==null){var s=Ze();Lt(r,t,1,s)}}),Gc(t,1)}};vc=function(t){if(t.tag===13){var e=an(t,134217728);if(e!==null){var n=Ze();Lt(e,t,134217728,n)}Gc(t,134217728)}};lf=function(t){if(t.tag===13){var e=Rn(t),n=an(t,e);if(n!==null){var r=Ze();Lt(n,t,e,r)}Gc(t,e)}};cf=function(){return fe};uf=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};ol=function(t,e,n){switch(e){case"input":if(Za(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Do(r);if(!s)throw Error(U(90));Uh(r),Za(r,s)}}}break;case"textarea":zh(t,n);break;case"select":e=n.value,e!=null&&Er(t,!!n.multiple,e,!1)}};Qh=Hc;Gh=er;var L0={usingClientEntryPoint:!1,Events:[si,xr,Do,Kh,Jh,Hc]},cs={findFiberByHostInstance:Hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},D0={bundleType:cs.bundleType,version:cs.version,rendererPackageName:cs.rendererPackageName,rendererConfig:cs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:un.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Zh(t),t===null?null:t.stateNode},findFiberByHostInstance:cs.findFiberByHostInstance||$0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ri=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ri.isDisabled&&Ri.supportsFiber)try{Oo=Ri.inject(D0),Kt=Ri}catch{}}ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L0;ft.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xc(e))throw Error(U(200));return O0(t,e,null,n)};ft.createRoot=function(t,e){if(!Xc(t))throw Error(U(299));var n=!1,r="",s=Ip;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Qc(t,1,!1,null,null,n,!1,r,s),t[on]=e.current,qs(t.nodeType===8?t.parentNode:t),new Yc(e)};ft.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Zh(e),t=t===null?null:t.stateNode,t};ft.flushSync=function(t){return er(t)};ft.hydrate=function(t,e,n){if(!Vo(e))throw Error(U(200));return Ko(null,t,e,!0,n)};ft.hydrateRoot=function(t,e,n){if(!Xc(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Ip;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Tp(e,null,t,1,n??null,s,!1,i,o),t[on]=e.current,qs(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ho(e)};ft.render=function(t,e,n){if(!Vo(e))throw Error(U(200));return Ko(null,t,e,!1,n)};ft.unmountComponentAtNode=function(t){if(!Vo(t))throw Error(U(40));return t._reactRootContainer?(er(function(){Ko(null,null,t,!1,function(){t._reactRootContainer=null,t[on]=null})}),!0):!1};ft.unstable_batchedUpdates=Hc;ft.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Vo(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Ko(t,e,n,!1,r)};ft.version="18.3.1-next-f1338f8080-20240426";function Op(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Op)}catch(t){console.error(t)}}Op(),Ih.exports=ft;var B0=Ih.exports,Bd=B0;Va.createRoot=Bd.createRoot,Va.hydrateRoot=Bd.hydrateRoot;/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Md="popstate";function M0(t={}){function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return No("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:qr(s)}return $p(e,n,null,t)}function U0(t={}){function e(s,i){let{pathname:o="/",search:l="",hash:c=""}=sr(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),No("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof i=="string"?i:qr(i))}function r(s,i){St(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return $p(e,n,r,t)}function be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function St(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function F0(){return Math.random().toString(36).substring(2,10)}function Ud(t,e){return{usr:t.state,key:t.key,idx:e}}function No(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?sr(e):e,state:n,key:e&&e.key||r||F0()}}function qr({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function sr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function $p(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function h(){l="POP";let j=d(),v=j==null?null:j-u;u=j,c&&c({action:l,location:w.location,delta:v})}function m(j,v){l="PUSH";let f=No(w.location,j,v);n&&n(f,j),u=d()+1;let p=Ud(f,u),_=w.createHref(f);try{o.pushState(p,"",_)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(_)}i&&c&&c({action:l,location:w.location,delta:1})}function y(j,v){l="REPLACE";let f=No(w.location,j,v);n&&n(f,j),u=d();let p=Ud(f,u),_=w.createHref(f);o.replaceState(p,"",_),i&&c&&c({action:l,location:w.location,delta:0})}function x(j){return z0(j)}let w={get action(){return l},get location(){return t(s,o)},listen(j){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Md,h),c=j,()=>{s.removeEventListener(Md,h),c=null}},createHref(j){return e(s,j)},createURL:x,encodeLocation(j){let v=x(j);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:y,go(j){return o.go(j)}};return w}function z0(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),be(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:qr(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Ap(t,e,n="/"){return W0(t,e,n,!1)}function W0(t,e,n,r){let s=typeof e=="string"?sr(e):e,i=cn(s.pathname||"/",n);if(i==null)return null;let o=Lp(t);q0(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=tv(i);l=Z0(o[c],u,r)}return l}function Lp(t,e=[],n=[],r="",s=!1){let i=(o,l,c=s,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&c)return;be(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let h=rn([r,d.relativePath]),m=n.concat(d);o.children&&o.children.length>0&&(be(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),Lp(o.children,e,m,h,c)),!(o.path==null&&!o.index)&&e.push({path:h,score:Y0(h,o.index),routesMeta:m})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let u of Dp(o.path))i(o,l,!0,u)}),e}function Dp(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Dp(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function q0(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:X0(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var H0=/^:[\w-]+$/,V0=3,K0=2,J0=1,Q0=10,G0=-2,Fd=t=>t==="*";function Y0(t,e){let n=t.split("/"),r=n.length;return n.some(Fd)&&(r+=G0),e&&(r+=K0),n.filter(s=>!Fd(s)).reduce((s,i)=>s+(H0.test(i)?V0:i===""?J0:Q0),r)}function X0(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Z0(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=Ro({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=Ro({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:rn([i,h.pathname]),pathnameBase:iv(rn([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=rn([i,h.pathnameBase]))}return o}function Ro(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=ev(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:h},m)=>{if(d==="*"){let x=l[m]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const y=l[m];return h&&!y?u[d]=void 0:u[d]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function ev(t,e=!1,n=!0){St(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function tv(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return St(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function cn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function nv(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?sr(t):t;return{pathname:n?n.startsWith("/")?n:rv(n,e):e,search:ov(r),hash:av(s)}}function rv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ta(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function sv(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Zc(t){let e=sv(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function eu(t,e,n,r=!1){let s;typeof t=="string"?s=sr(t):(s={...t},be(!s.pathname||!s.pathname.includes("?"),Ta("?","pathname","search",s)),be(!s.pathname||!s.pathname.includes("#"),Ta("#","pathname","hash",s)),be(!s.search||!s.search.includes("#"),Ta("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?e[h]:"/"}let c=nv(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var rn=t=>t.join("/").replace(/\/\/+/g,"/"),iv=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ov=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,av=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function lv(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Bp=["POST","PUT","PATCH","DELETE"];new Set(Bp);var cv=["GET",...Bp];new Set(cv);var Qr=g.createContext(null);Qr.displayName="DataRouter";var Jo=g.createContext(null);Jo.displayName="DataRouterState";g.createContext(!1);var Mp=g.createContext({isTransitioning:!1});Mp.displayName="ViewTransition";var uv=g.createContext(new Map);uv.displayName="Fetchers";var dv=g.createContext(null);dv.displayName="Await";var Bt=g.createContext(null);Bt.displayName="Navigation";var oi=g.createContext(null);oi.displayName="Location";var Mt=g.createContext({outlet:null,matches:[],isDataRoute:!1});Mt.displayName="Route";var tu=g.createContext(null);tu.displayName="RouteError";function hv(t,{relative:e}={}){be(Gr(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=g.useContext(Bt),{hash:s,pathname:i,search:o}=li(t,{relative:e}),l=i;return n!=="/"&&(l=i==="/"?n:rn([n,i])),r.createHref({pathname:l,search:o,hash:s})}function Gr(){return g.useContext(oi)!=null}function dn(){return be(Gr(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(oi).location}var Up="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Fp(t){g.useContext(Bt).static||g.useLayoutEffect(t)}function ir(){let{isDataRoute:t}=g.useContext(Mt);return t?jv():fv()}function fv(){be(Gr(),"useNavigate() may be used only in the context of a <Router> component.");let t=g.useContext(Qr),{basename:e,navigator:n}=g.useContext(Bt),{matches:r}=g.useContext(Mt),{pathname:s}=dn(),i=JSON.stringify(Zc(r)),o=g.useRef(!1);return Fp(()=>{o.current=!0}),g.useCallback((c,u={})=>{if(St(o.current,Up),!o.current)return;if(typeof c=="number"){n.go(c);return}let d=eu(c,JSON.parse(i),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:rn([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,i,s,t])}g.createContext(null);function ai(){let{matches:t}=g.useContext(Mt),e=t[t.length-1];return e?e.params:{}}function li(t,{relative:e}={}){let{matches:n}=g.useContext(Mt),{pathname:r}=dn(),s=JSON.stringify(Zc(n));return g.useMemo(()=>eu(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function pv(t,e){return zp(t,e)}function zp(t,e,n,r,s){var f;be(Gr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=g.useContext(Bt),{matches:o}=g.useContext(Mt),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let p=h&&h.path||"";Wp(u,!h||p.endsWith("*")||p.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${p}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${p}"> to <Route path="${p==="/"?"*":`${p}/*`}">.`)}let m=dn(),y;if(e){let p=typeof e=="string"?sr(e):e;be(d==="/"||((f=p.pathname)==null?void 0:f.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${p.pathname}" was given in the \`location\` prop.`),y=p}else y=m;let x=y.pathname||"/",w=x;if(d!=="/"){let p=d.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(p.length).join("/")}let j=Ap(t,{pathname:w});St(h||j!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),St(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=wv(j&&j.map(p=>Object.assign({},p,{params:Object.assign({},c,p.params),pathname:rn([d,i.encodeLocation?i.encodeLocation(p.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?d:rn([d,i.encodeLocation?i.encodeLocation(p.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:p.pathnameBase])})),o,n,r,s);return e&&v?g.createElement(oi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},v):v}function mv(){let t=Sv(),e=lv(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:i},"ErrorBoundary")," or"," ",g.createElement("code",{style:i},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:s},n):null,o)}var gv=g.createElement(mv,null),yv=class extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?g.createElement(Mt.Provider,{value:this.props.routeContext},g.createElement(tu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function vv({routeContext:t,match:e,children:n}){let r=g.useContext(Qr);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),g.createElement(Mt.Provider,{value:t},n)}function wv(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let u=i.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);be(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,c=-1;if(n)for(let u=0;u<i.length;u++){let d=i[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:m}=n,y=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((u,d,h)=>{let m,y=!1,x=null,w=null;n&&(m=o&&d.route.id?o[d.route.id]:void 0,x=d.route.errorElement||gv,l&&(c<0&&h===0?(Wp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,w=null):c===h&&(y=!0,w=d.route.hydrateFallbackElement||null)));let j=e.concat(i.slice(0,h+1)),v=()=>{let f;return m?f=x:y?f=w:d.route.Component?f=g.createElement(d.route.Component,null):d.route.element?f=d.route.element:f=u,g.createElement(vv,{match:d,routeContext:{outlet:u,matches:j,isDataRoute:n!=null},children:f})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?g.createElement(yv,{location:n.location,revalidation:n.revalidation,component:x,error:m,children:v(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:r}):v()},null)}function nu(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xv(t){let e=g.useContext(Qr);return be(e,nu(t)),e}function bv(t){let e=g.useContext(Jo);return be(e,nu(t)),e}function _v(t){let e=g.useContext(Mt);return be(e,nu(t)),e}function ru(t){let e=_v(t),n=e.matches[e.matches.length-1];return be(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function kv(){return ru("useRouteId")}function Sv(){var r;let t=g.useContext(tu),e=bv("useRouteError"),n=ru("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function jv(){let{router:t}=xv("useNavigate"),e=ru("useNavigate"),n=g.useRef(!1);return Fp(()=>{n.current=!0}),g.useCallback(async(s,i={})=>{St(n.current,Up),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var zd={};function Wp(t,e,n){!e&&!zd[t]&&(zd[t]=!0,St(!1,n))}g.memo(Cv);function Cv({routes:t,future:e,state:n,unstable_onError:r}){return zp(t,void 0,n,r,e)}function Wd({to:t,replace:e,state:n,relative:r}){be(Gr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=g.useContext(Bt);St(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=g.useContext(Mt),{pathname:o}=dn(),l=ir(),c=eu(t,Zc(i),o,r==="path"),u=JSON.stringify(c);return g.useEffect(()=>{l(JSON.parse(u),{replace:e,state:n,relative:r})},[l,u,r,e,n]),null}function Fe(t){be(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qp({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){be(!Gr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=sr(n));let{pathname:c="/",search:u="",hash:d="",state:h=null,key:m="default"}=n,y=g.useMemo(()=>{let x=cn(c,o);return x==null?null:{location:{pathname:x,search:u,hash:d,state:h,key:m},navigationType:r}},[o,c,u,d,h,m,r]);return St(y!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:g.createElement(Bt.Provider,{value:l},g.createElement(oi.Provider,{children:e,value:y}))}function Ev({children:t,location:e}){return pv(Ml(t),e)}function Ml(t,e=[]){let n=[];return g.Children.forEach(t,(r,s)=>{if(!g.isValidElement(r))return;let i=[...e,s];if(r.type===g.Fragment){n.push.apply(n,Ml(r.props.children,i));return}be(r.type===Fe,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),be(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ml(r.props.children,i)),n.push(o)}),n}var Ji="get",Qi="application/x-www-form-urlencoded";function Qo(t){return t!=null&&typeof t.tagName=="string"}function Nv(t){return Qo(t)&&t.tagName.toLowerCase()==="button"}function Rv(t){return Qo(t)&&t.tagName.toLowerCase()==="form"}function Pv(t){return Qo(t)&&t.tagName.toLowerCase()==="input"}function Tv(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Iv(t,e){return t.button===0&&(!e||e==="_self")&&!Tv(t)}var Pi=null;function Ov(){if(Pi===null)try{new FormData(document.createElement("form"),0),Pi=!1}catch{Pi=!0}return Pi}var $v=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ia(t){return t!=null&&!$v.has(t)?(St(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qi}"`),null):t}function Av(t,e){let n,r,s,i,o;if(Rv(t)){let l=t.getAttribute("action");r=l?cn(l,e):null,n=t.getAttribute("method")||Ji,s=Ia(t.getAttribute("enctype"))||Qi,i=new FormData(t)}else if(Nv(t)||Pv(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(r=c?cn(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Ji,s=Ia(t.getAttribute("formenctype"))||Ia(l.getAttribute("enctype"))||Qi,i=new FormData(l,t),!Ov()){let{name:u,type:d,value:h}=t;if(d==="image"){let m=u?`${u}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else u&&i.append(u,h)}}else{if(Qo(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ji,r=null,s=Qi,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function su(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Lv(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&cn(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Dv(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Bv(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Mv(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await Dv(i,n);return o.links?o.links():[]}return[]}));return Wv(r.flat(1).filter(Bv).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function qd(t,e,n,r,s,i){let o=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var d;return n[u].pathname!==c.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,u)=>o(c,u)||l(c,u)):i==="data"?e.filter((c,u)=>{var h;let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function Uv(t,e,{includeHydrateFallback:n}={}){return Fv(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function Fv(t){return[...new Set(t)]}function zv(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Wv(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(zv(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function Hp(){let t=g.useContext(Qr);return su(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function qv(){let t=g.useContext(Jo);return su(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var iu=g.createContext(void 0);iu.displayName="FrameworkContext";function Vp(){let t=g.useContext(iu);return su(t,"You must render this element inside a <HydratedRouter> element"),t}function Hv(t,e){let n=g.useContext(iu),[r,s]=g.useState(!1),[i,o]=g.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=e,m=g.useRef(null);g.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let w=v=>{v.forEach(f=>{o(f.isIntersecting)})},j=new IntersectionObserver(w,{threshold:.5});return m.current&&j.observe(m.current),()=>{j.disconnect()}}},[t]),g.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let y=()=>{s(!0)},x=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,m,{}]:[i,m,{onFocus:us(l,y),onBlur:us(c,x),onMouseEnter:us(u,y),onMouseLeave:us(d,x),onTouchStart:us(h,y)}]:[!1,m,{}]}function us(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Vv({page:t,...e}){let{router:n}=Hp(),r=g.useMemo(()=>Ap(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?g.createElement(Jv,{page:t,matches:r,...e}):null}function Kv(t){let{manifest:e,routeModules:n}=Vp(),[r,s]=g.useState([]);return g.useEffect(()=>{let i=!1;return Mv(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function Jv({page:t,matches:e,...n}){let r=dn(),{manifest:s,routeModules:i}=Vp(),{basename:o}=Hp(),{loaderData:l,matches:c}=qv(),u=g.useMemo(()=>qd(t,e,c,s,r,"data"),[t,e,c,s,r]),d=g.useMemo(()=>qd(t,e,c,s,r,"assets"),[t,e,c,s,r]),h=g.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,w=!1;if(e.forEach(v=>{var p;let f=s.routes[v.route.id];!f||!f.hasLoader||(!u.some(_=>_.route.id===v.route.id)&&v.route.id in l&&((p=i[v.route.id])!=null&&p.shouldRevalidate)||f.hasClientLoader?w=!0:x.add(v.route.id))}),x.size===0)return[];let j=Lv(t,o,"data");return w&&x.size>0&&j.searchParams.set("_routes",e.filter(v=>x.has(v.route.id)).map(v=>v.route.id).join(",")),[j.pathname+j.search]},[o,l,r,s,u,e,t,i]),m=g.useMemo(()=>Uv(d,s),[d,s]),y=Kv(d);return g.createElement(g.Fragment,null,h.map(x=>g.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),m.map(x=>g.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),y.map(({key:x,link:w})=>g.createElement("link",{key:x,nonce:n.nonce,...w})))}function Qv(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Kp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Kp&&(window.__reactRouterVersion="7.9.3")}catch{}function Gv({basename:t,children:e,window:n}){let r=g.useRef();r.current==null&&(r.current=M0({window:n,v5Compat:!0}));let s=r.current,[i,o]=g.useState({action:s.action,location:s.location}),l=g.useCallback(c=>{g.startTransition(()=>o(c))},[o]);return g.useLayoutEffect(()=>s.listen(l),[s,l]),g.createElement(qp,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}function Yv({basename:t,children:e,window:n}){let r=g.useRef();r.current==null&&(r.current=U0({window:n,v5Compat:!0}));let s=r.current,[i,o]=g.useState({action:s.action,location:s.location}),l=g.useCallback(c=>{g.startTransition(()=>o(c))},[o]);return g.useLayoutEffect(()=>s.listen(l),[s,l]),g.createElement(qp,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var Jp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ot=g.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h,...m},y){let{basename:x}=g.useContext(Bt),w=typeof u=="string"&&Jp.test(u),j,v=!1;if(typeof u=="string"&&w&&(j=u,Kp))try{let B=new URL(window.location.href),L=u.startsWith("//")?new URL(B.protocol+u):new URL(u),Q=cn(L.pathname,x);L.origin===B.origin&&Q!=null?u=Q+L.search+L.hash:v=!0}catch{St(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let f=hv(u,{relative:s}),[p,_,E]=Hv(r,m),T=tw(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function P(B){e&&e(B),B.defaultPrevented||T(B)}let I=g.createElement("a",{...m,...E,href:j||f,onClick:v||i?e:P,ref:Qv(y,_),target:c,"data-discover":!w&&n==="render"?"true":void 0});return p&&!w?g.createElement(g.Fragment,null,I,g.createElement(Vv,{page:f})):I});Ot.displayName="Link";var Xv=g.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:l,children:c,...u},d){let h=li(o,{relative:u.relative}),m=dn(),y=g.useContext(Jo),{navigator:x,basename:w}=g.useContext(Bt),j=y!=null&&ow(h)&&l===!0,v=x.encodeLocation?x.encodeLocation(h).pathname:h.pathname,f=m.pathname,p=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(f=f.toLowerCase(),p=p?p.toLowerCase():null,v=v.toLowerCase()),p&&w&&(p=cn(p,w)||p);const _=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let E=f===v||!s&&f.startsWith(v)&&f.charAt(_)==="/",T=p!=null&&(p===v||!s&&p.startsWith(v)&&p.charAt(v.length)==="/"),P={isActive:E,isPending:T,isTransitioning:j},I=E?e:void 0,B;typeof r=="function"?B=r(P):B=[r,E?"active":null,T?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let L=typeof i=="function"?i(P):i;return g.createElement(Ot,{...u,"aria-current":I,className:B,ref:d,style:L,to:o,viewTransition:l},typeof c=="function"?c(P):c)});Xv.displayName="NavLink";var Zv=g.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=Ji,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:h,...m},y)=>{let x=sw(),w=iw(l,{relative:u}),j=o.toLowerCase()==="get"?"get":"post",v=typeof l=="string"&&Jp.test(l),f=p=>{if(c&&c(p),p.defaultPrevented)return;p.preventDefault();let _=p.nativeEvent.submitter,E=(_==null?void 0:_.getAttribute("formmethod"))||o;x(_||p.currentTarget,{fetcherKey:e,method:E,navigate:n,replace:s,state:i,relative:u,preventScrollReset:d,viewTransition:h})};return g.createElement("form",{ref:y,method:j,action:w,onSubmit:r?c:f,...m,"data-discover":!v&&t==="render"?"true":void 0})});Zv.displayName="Form";function ew(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qp(t){let e=g.useContext(Qr);return be(e,ew(t)),e}function tw(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let l=ir(),c=dn(),u=li(t,{relative:i});return g.useCallback(d=>{if(Iv(d,e)){d.preventDefault();let h=n!==void 0?n:qr(c)===qr(u);l(t,{replace:h,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[c,l,u,n,r,e,t,s,i,o])}var nw=0,rw=()=>`__${String(++nw)}__`;function sw(){let{router:t}=Qp("useSubmit"),{basename:e}=g.useContext(Bt),n=kv();return g.useCallback(async(r,s={})=>{let{action:i,method:o,encType:l,formData:c,body:u}=Av(r,e);if(s.navigate===!1){let d=s.fetcherKey||rw();await t.fetch(d,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function iw(t,{relative:e}={}){let{basename:n}=g.useContext(Bt),r=g.useContext(Mt);be(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...li(t||".",{relative:e})},o=dn();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let d=l.toString();i.search=d?`?${d}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:rn([n,i.pathname])),qr(i)}function ow(t,{relative:e}={}){let n=g.useContext(Mp);be(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Qp("useViewTransitionState"),s=li(t,{relative:e});if(!n.isTransitioning)return!1;let i=cn(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=cn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ro(s.pathname,o)!=null||Ro(s.pathname,i)!=null}const ie=typeof window<"u"?new URLSearchParams(window.location.search):null,aw=!1,Oa=ie==null?void 0:ie.get("enableSocket"),Zs=Oa!=null?Oa==="true"||Oa==="1":aw,Hd=ie==null?void 0:ie.get("simple"),Yt=Hd==="true"||Hd==="1",lw=(ie==null?void 0:ie.get("room"))||(ie==null?void 0:ie.get("defaultRoom"))||void 0,Gp=lw||"default";(()=>{if(typeof window>"u")return"";const t=window.location.hostname;return t==="snookerlivehk-elton.github.io"?"https://snooker-backend-production.up.railway.app":t.endsWith("snookerhk.live")?"https://api.snookerhk.live":window.location.origin})();const cw=(ie==null?void 0:ie.get("socketUrl"))||(ie==null?void 0:ie.get("socket"))||void 0,$t=cw||"https://sl18-app-production.up.railway.app",uw=(ie==null?void 0:ie.get("socketPath"))||(ie==null?void 0:ie.get("path"))||void 0,tr=uw||"/socket.io",dw=(ie==null?void 0:ie.get("apiUrl"))||(ie==null?void 0:ie.get("api"))||void 0,K=dw||"https://sl18-app-production.up.railway.app",Yp="Snooker Standalone",hw=(ie==null?void 0:ie.get("supabaseUrl"))||void 0,fw=(ie==null?void 0:ie.get("supabaseKey"))||void 0,Vd=hw||"https://somxineomfxjldgvpdhv.supabase.co",Kd=fw||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNvbXhpbmVvbWZ4amxkZ3ZwZGh2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NTI0NTAsImV4cCI6MjA3NTMyODQ1MH0.iUAMZ--Ysz01vLEPtnQT14Qe91OSSYweLqtfVF5y58o",Tn=!Zs||Yt,pw="snooker_room_";function Xp(t){return`${pw}${t}`}function Le(t){try{const e=localStorage.getItem(Xp(t));if(!e)return{events:[],foulTotals:[0,0],locked:!1,lockedAt:null,matchId:null,uploadedEventsCount:0,acceptedMemberIds:null};const n=JSON.parse(e);return{events:Array.isArray(n==null?void 0:n.events)?n.events:[],foulTotals:Array.isArray(n==null?void 0:n.foulTotals)&&n.foulTotals.length===2?n.foulTotals:[0,0],state:n==null?void 0:n.state,locked:!!(n!=null&&n.locked),lockedAt:typeof(n==null?void 0:n.lockedAt)=="number"?n.lockedAt:null,matchId:typeof(n==null?void 0:n.matchId)=="string"?n.matchId:null,uploadedEventsCount:typeof(n==null?void 0:n.uploadedEventsCount)=="number"?n.uploadedEventsCount:0,acceptedMemberIds:Array.isArray(n==null?void 0:n.acceptedMemberIds)?n.acceptedMemberIds:null}}catch{return{events:[],foulTotals:[0,0],locked:!1,lockedAt:null,matchId:null,uploadedEventsCount:0,acceptedMemberIds:null}}}function zt(t,e){try{localStorage.setItem(Xp(t),JSON.stringify(e))}catch{}}const ee={getRoomData(t){return Le(t)},getEvents(t){return Le(t).events},getFoulTotals(t){return Le(t).foulTotals},getMatchId(t){return Le(t).matchId??null},setMatchId(t,e){const n=Le(t);n.matchId=e??null,zt(t,n)},getUploadedEventsCount(t){const e=Le(t);return typeof e.uploadedEventsCount=="number"?e.uploadedEventsCount:0},setUploadedEventsCount(t,e){const n=Le(t);n.uploadedEventsCount=e>=0?e:0,zt(t,n)},getAcceptedMemberIds(t){const e=Le(t);return Array.isArray(e.acceptedMemberIds)?e.acceptedMemberIds:[]},setAcceptedMemberIds(t,e){const n=Le(t);n.acceptedMemberIds=Array.isArray(e)?e.slice():[],zt(t,n)},getState(t){return Le(t).state??null},setState(t,e){const n=Le(t);n.state=e,zt(t,n)},appendEvent(t,e){const n=Le(t),r=Date.now(),s=n.events.length?n.events[n.events.length-1].timestamp??r:r,i={...e,timestamp:e.timestamp??r,shotTimeMs:Math.max(0,(e.timestamp??r)-s)};n.events.push(i),zt(t,n)},incrementFoulTotal(t,e,n){const r=Le(t),s=e===0?0:1;r.foulTotals[s]=(r.foulTotals[s]??0)+Math.max(0,n),zt(t,r)},decrementFoulTotal(t,e,n){const r=Le(t),s=e===0?0:1;r.foulTotals[s]=Math.max(0,(r.foulTotals[s]??0)-Math.max(0,n)),zt(t,r)},clearRoom(t){zt(t,{events:[],foulTotals:[0,0],state:void 0,locked:!1,lockedAt:null,matchId:null,uploadedEventsCount:0,acceptedMemberIds:null})},lockRoom(t,e){const n=Le(t);n.locked=!0,n.lockedAt=e??Date.now(),zt(t,n)},exportRoomData(t){return JSON.stringify(Le(t))},popLastEvent(t){const e=Le(t);if(!e.events.length)return null;const n=e.events.pop()||null;return zt(t,e),n},findNthRedPot(t,e){const n=Le(t).events;let r=0;for(let s=0;s<n.length;s++){const i=n[s];if(i.type==="pot"&&i.ballName==="red"&&(r++,r===e))return{index:s,event:i}}return null},getEventsAfterIndex(t,e){const n=Le(t).events;return e<-1?n:n.slice(e+1)},getEventsAfterNthRed(t,e){const n=this.findNthRedPot(t,e);return n?this.getEventsAfterIndex(t,n.index):[]}},Zp="roomCodes";function ou(){try{const t=localStorage.getItem(Zp)||"{}";return JSON.parse(t)}catch{return{}}}function mw(t){try{localStorage.setItem(Zp,JSON.stringify(t))}catch{}}function gw(t,e){const n=ou();n[String(t)]=String(e),mw(n)}function Gi(t){return t?ou()[String(t)]:void 0}function Or(t){const e=ou(),n=Object.entries(e);for(const[r,s]of n)if(String(s)===String(t))return r}const yw=()=>{const t=dn(),e=n=>t.pathname.startsWith(n)?"bg-gray-700":"bg-gray-800";return a.jsx("nav",{className:"w-full bg-black/60 backdrop-blur border-b border-white/10",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"font-bold tracking-wider accent-yellow",children:"SL18-APP"}),a.jsx("div",{className:"text-sm text-gray-300/80",children:""})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ot,{to:"/admin/overview",className:`px-3 py-2 rounded ${e("/admin/overview")} hover:bg-white/10`,children:""}),a.jsx(Ot,{to:"/admin/members",className:`px-3 py-2 rounded ${e("/admin/members")} hover:bg-white/10`,children:""}),a.jsx(Ot,{to:"/admin/matches",className:`px-3 py-2 rounded ${e("/admin/matches")} hover:bg-white/10`,children:""}),a.jsx(Ot,{to:"/admin/regions",className:`px-3 py-2 rounded ${e("/admin/regions")} hover:bg-white/10`,children:""}),a.jsx(Ot,{to:"/admin",className:`px-3 py-2 rounded ${e("/admin")} hover:bg-white/10`,children:""})]})]})})},vw=()=>{let e="/".replace(/\/+$/,"");if(typeof window<"u"){const h=window.location.pathname.match(/^(.*)\/admin(?:\/.*)?$/);h&&h[1]!==""&&(e=h[1])}const[n,r]=g.useState([]),[s,i]=g.useState(""),[o,l]=g.useState(null);g.useEffect(()=>{fetch(`${K}/api/rooms`).then(d=>d.json()).then(d=>r(d)).catch(d=>{console.error("Failed to load rooms:",d)})},[]);const c=d=>{d.preventDefault(),l(null),fetch(`${K}/api/rooms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s})}).then(async h=>{if(!h.ok){const m=await h.json().catch(()=>({error:"Failed to create room"}));throw new Error(m.error||"Failed to create room")}return h.json()}).then(h=>{r([...n,h]);try{h.code&&gw(h.id,h.code)}catch{}i(""),l(null)}).catch(h=>{console.error(h),l(h.message)})},u=d=>{fetch(`${K}/api/rooms/${d}`,{method:"DELETE"}).then(h=>{h.ok&&r(n.filter(m=>m.id!==d))})};return a.jsxs("div",{className:"brand-page flex flex-col",children:[a.jsx(yw,{}),a.jsx("div",{className:"p-8 flex flex-col items-center",children:a.jsxs("div",{className:"w-full max-w-2xl",children:[a.jsx("h1",{className:"text-4xl font-bold mb-6 text-center accent-yellow",children:""}),a.jsxs("div",{className:"w-full flex justify-end mb-4 gap-2",children:[a.jsx("button",{onClick:()=>{const d=localStorage.getItem("adminToken")||"",h=`${window.location.origin}${e}/admin/members${d?`?token=${encodeURIComponent(d)}&v=members`:"?v=members"}`;window.location.href=h},className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-3 rounded transition-colors",children:"Members"}),a.jsx("button",{onClick:()=>{const d=localStorage.getItem("adminToken")||"",h=`${window.location.origin}${e}/admin/matches${d?`?token=${encodeURIComponent(d)}&v=matches`:"?v=matches"}`;window.location.href=h},className:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-3 rounded transition-colors",children:"Matches"}),a.jsx("button",{onClick:()=>{const d=localStorage.getItem("adminToken")||"",h=`${window.location.origin}${e}/admin/regions${d?`?token=${encodeURIComponent(d)}&v=regions`:"?v=regions"}`;window.location.href=h},className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-3 rounded transition-colors",children:"Regions"})]}),a.jsxs("div",{className:"glass rounded-lg p-6 mb-8",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Simple Mode"}),a.jsx("p",{className:"text-sm text-gray-300/80 mb-4",children:" OBS "}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsx("button",{onClick:()=>{const d=`${window.location.origin}${e}/room/default?simple=true&enableSocket=true&socketUrl=${encodeURIComponent($t)}&apiUrl=${encodeURIComponent(K)}&socketPath=${encodeURIComponent(tr)}`;navigator.clipboard.writeText(d).then(()=>{alert(` Scoreboard 
${d}`)})},className:"brand-button text-black font-bold py-2 px-3 rounded transition-colors",children:"Copy Simple Scoreboard Link"}),a.jsx("button",{onClick:()=>{const d=`${window.location.origin}${e}/room/default/overlay?simple=true&enableSocket=true&socketUrl=${encodeURIComponent($t)}&socketPath=${encodeURIComponent(tr)}`;navigator.clipboard.writeText(d).then(()=>{alert(` Overlay 
${d}`)})},className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-3 rounded transition-colors",children:"Copy Simple Overlay Link"})]})]}),a.jsxs("div",{className:"glass rounded-lg p-6 mb-8",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Rooms"}),a.jsx("ul",{className:"space-y-4",children:n.map(d=>{const h=d.code||Gi(d.id)||d.id;return a.jsxs("li",{className:"flex justify-between items-center bg-black/40 border border-white/10 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ot,{to:`/room/${h}`,className:"text-lg hover:text-blue-400 transition-colors",children:h!==d.name?`[${h}] ${d.name}`:d.name}),a.jsxs("span",{className:"text-sm text-gray-300",children:["(ID: ",h,")"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{const m=`?enableSocket=1&socketUrl=${encodeURIComponent($t)}&apiUrl=${encodeURIComponent(K)}`,y=`${window.location.origin}${e}/room/${h}/setup${m}`;navigator.clipboard.writeText(y).then(()=>{alert(` Setup 
${y}`)})},className:"brand-button text-black font-bold py-2 px-3 rounded transition-colors",children:"Copy Room Link"}),a.jsx("button",{onClick:()=>{if(confirm(` ${d.id}`))try{ee.clearRoom(d.id),alert("")}catch{}},className:"bg-white/10 hover:bg-white/20 text-white font-bold py-2 px-3 rounded transition-colors",children:"Clear Local Cache"}),a.jsx("button",{onClick:()=>{const m=`?enableSocket=1&socketUrl=${encodeURIComponent($t)}&apiUrl=${encodeURIComponent(K)}`,y=`${window.location.origin}${e}/room/${h}/live${m}`;navigator.clipboard.writeText(y).then(()=>{alert(` Live 
${y}`)})},className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-3 rounded transition-colors",children:"Copy Live Link"}),a.jsx("button",{onClick:()=>{const m=`?enableSocket=1&socketUrl=${encodeURIComponent($t)}&apiUrl=${encodeURIComponent(K)}`,y=`${window.location.origin}${e}/room/${h}/overlay${m}`;navigator.clipboard.writeText(y).then(()=>{alert(` Overlay 
${y}`)})},className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-3 rounded transition-colors",children:"Copy Overlay Link"}),a.jsx("button",{onClick:()=>u(d.id),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded transition-colors",children:"Delete"})]})]},d.id)})})]}),a.jsxs("div",{className:"glass rounded-lg p-6",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Create a new room"}),a.jsxs("form",{onSubmit:c,className:"flex space-x-4",children:[a.jsx("input",{type:"text",value:s,onChange:d=>{i(d.target.value),l(null)},className:"flex-grow bg-black/40 border border-white/10 text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[var(--brand-blue)]",placeholder:"Enter new room name"}),a.jsx("button",{type:"submit",className:"brand-button text-black font-bold py-2 px-4 rounded transition-colors",children:"Create"})]}),o&&a.jsx("p",{className:"text-red-500 mt-4",children:o})]})]})})]})},Qt=Object.create(null);Qt.open="0";Qt.close="1";Qt.ping="2";Qt.pong="3";Qt.message="4";Qt.upgrade="5";Qt.noop="6";const Yi=Object.create(null);Object.keys(Qt).forEach(t=>{Yi[Qt[t]]=t});const Ul={type:"error",data:"parser error"},em=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",tm=typeof ArrayBuffer=="function",nm=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,au=({type:t,data:e},n,r)=>em&&e instanceof Blob?n?r(e):Jd(e,r):tm&&(e instanceof ArrayBuffer||nm(e))?n?r(e):Jd(new Blob([e]),r):r(Qt[t]+(e||"")),Jd=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function Qd(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let $a;function ww(t,e){if(em&&t.data instanceof Blob)return t.data.arrayBuffer().then(Qd).then(e);if(tm&&(t.data instanceof ArrayBuffer||nm(t.data)))return e(Qd(t.data));au(t,!1,n=>{$a||($a=new TextEncoder),e($a.encode(n))})}const Gd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ws=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Gd.length;t++)ws[Gd.charCodeAt(t)]=t;const xw=t=>{let e=t.length*.75,n=t.length,r,s=0,i,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),d=new Uint8Array(u);for(r=0;r<n;r+=4)i=ws[t.charCodeAt(r)],o=ws[t.charCodeAt(r+1)],l=ws[t.charCodeAt(r+2)],c=ws[t.charCodeAt(r+3)],d[s++]=i<<2|o>>4,d[s++]=(o&15)<<4|l>>2,d[s++]=(l&3)<<6|c&63;return u},bw=typeof ArrayBuffer=="function",lu=(t,e)=>{if(typeof t!="string")return{type:"message",data:rm(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:_w(t.substring(1),e)}:Yi[n]?t.length>1?{type:Yi[n],data:t.substring(1)}:{type:Yi[n]}:Ul},_w=(t,e)=>{if(bw){const n=xw(t);return rm(n,e)}else return{base64:!0,data:t}},rm=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},sm="",kw=(t,e)=>{const n=t.length,r=new Array(n);let s=0;t.forEach((i,o)=>{au(i,!1,l=>{r[o]=l,++s===n&&e(r.join(sm))})})},Sw=(t,e)=>{const n=t.split(sm),r=[];for(let s=0;s<n.length;s++){const i=lu(n[s],e);if(r.push(i),i.type==="error")break}return r};function jw(){return new TransformStream({transform(t,e){ww(t,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let Aa;function Ti(t){return t.reduce((e,n)=>e+n.length,0)}function Ii(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function Cw(t,e){Aa||(Aa=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(Ti(n)<1)break;const c=Ii(n,1);i=(c[0]&128)===128,s=c[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(Ti(n)<2)break;const c=Ii(n,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Ti(n)<8)break;const c=Ii(n,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(Ul);break}s=d*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Ti(n)<s)break;const c=Ii(n,s);l.enqueue(lu(i?c:Aa.decode(c),e)),r=0}if(s===0||s>t){l.enqueue(Ul);break}}}})}const im=4;function $e(t){if(t)return Ew(t)}function Ew(t){for(var e in $e.prototype)t[e]=$e.prototype[e];return t}$e.prototype.on=$e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};$e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};$e.prototype.off=$e.prototype.removeListener=$e.prototype.removeAllListeners=$e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};$e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};$e.prototype.emitReserved=$e.prototype.emit;$e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};$e.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Go=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),vt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Nw="arraybuffer";function om(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const Rw=vt.setTimeout,Pw=vt.clearTimeout;function Yo(t,e){e.useNativeTimers?(t.setTimeoutFn=Rw.bind(vt),t.clearTimeoutFn=Pw.bind(vt)):(t.setTimeoutFn=vt.setTimeout.bind(vt),t.clearTimeoutFn=vt.clearTimeout.bind(vt))}const Tw=1.33;function Iw(t){return typeof t=="string"?Ow(t):Math.ceil((t.byteLength||t.size)*Tw)}function Ow(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function am(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function $w(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Aw(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class Lw extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class cu extends $e{constructor(e){super(),this.writable=!1,Yo(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new Lw(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=lu(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=$w(e);return n.length?"?"+n:""}}class Dw extends cu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Sw(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,kw(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=am()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let lm=!1;try{lm=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Bw=lm;function Mw(){}class Uw extends Dw{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let $r=class Xi extends $e{constructor(e,n,r){super(),this.createRequest=e,Yo(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=om(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Xi.requestsCount++,Xi.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Mw,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Xi.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};$r.requestsCount=0;$r.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Yd);else if(typeof addEventListener=="function"){const t="onpagehide"in vt?"pagehide":"unload";addEventListener(t,Yd,!1)}}function Yd(){for(let t in $r.requests)$r.requests.hasOwnProperty(t)&&$r.requests[t].abort()}const Fw=function(){const t=cm({xdomain:!1});return t&&t.responseType!==null}();class zw extends Uw{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=Fw&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new $r(cm,this.uri(),e)}}function cm(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Bw))return new XMLHttpRequest}catch{}if(!e)try{return new vt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const um=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Ww extends cu{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=um?{}:om(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;au(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&Go(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=am()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const La=vt.WebSocket||vt.MozWebSocket;class qw extends Ww{createSocket(e,n,r){return um?new La(e,n,r):n?new La(e,n):new La(e)}doWrite(e,n){this.ws.send(n)}}class Hw extends cu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=Cw(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=jw();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&Go(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Vw={websocket:qw,webtransport:Hw,polling:zw},Kw=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Jw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Fl(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=Kw.exec(t||""),i={},o=14;for(;o--;)i[Jw[o]]=s[o]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Qw(i,i.path),i.queryKey=Gw(i,i.query),i}function Qw(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Gw(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}const zl=typeof addEventListener=="function"&&typeof removeEventListener=="function",Zi=[];zl&&addEventListener("offline",()=>{Zi.forEach(t=>t())},!1);class In extends $e{constructor(e,n){if(super(),this.binaryType=Nw,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=Fl(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Fl(n.host).host);Yo(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Aw(this.opts.query)),zl&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Zi.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=im,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&In.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",In.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=Iw(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Go(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(In.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),zl&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Zi.indexOf(this._offlineEventListener);r!==-1&&Zi.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}In.protocol=im;class Yw extends In{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;In.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!r)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;In.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=n.name,this.emitReserved("upgradeError",m)}}))};function i(){r||(r=!0,d(),n.close(),n=null)}const o=h=>{const m=new Error("probe error: "+h);m.transport=n.name,i(),this.emitReserved("upgradeError",m)};function l(){o("transport closed")}function c(){o("socket closed")}function u(h){n&&h.name!==n.name&&i()}const d=()=>{n.removeListener("open",s),n.removeListener("error",o),n.removeListener("close",l),this.off("close",c),this.off("upgrading",u)};n.once("open",s),n.once("error",o),n.once("close",l),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let Xw=class extends Yw{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>Vw[s]).filter(s=>!!s)),super(e,r)}};function Zw(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=Fl(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const ex=typeof ArrayBuffer=="function",tx=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,dm=Object.prototype.toString,nx=typeof Blob=="function"||typeof Blob<"u"&&dm.call(Blob)==="[object BlobConstructor]",rx=typeof File=="function"||typeof File<"u"&&dm.call(File)==="[object FileConstructor]";function uu(t){return ex&&(t instanceof ArrayBuffer||tx(t))||nx&&t instanceof Blob||rx&&t instanceof File}function eo(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(eo(t[n]))return!0;return!1}if(uu(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return eo(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&eo(t[n]))return!0;return!1}function sx(t){const e=[],n=t.data,r=t;return r.data=Wl(n,e),r.attachments=e.length,{packet:r,buffers:e}}function Wl(t,e){if(!t)return t;if(uu(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=Wl(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=Wl(t[r],e));return n}return t}function ix(t,e){return t.data=ql(t.data,e),delete t.attachments,t}function ql(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=ql(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=ql(t[n],e));return t}const ox=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ax=5;var oe;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(oe||(oe={}));class lx{constructor(e){this.replacer=e}encode(e){return(e.type===oe.EVENT||e.type===oe.ACK)&&eo(e)?this.encodeAsBinary({type:e.type===oe.EVENT?oe.BINARY_EVENT:oe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===oe.BINARY_EVENT||e.type===oe.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=sx(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function Xd(t){return Object.prototype.toString.call(t)==="[object Object]"}class du extends $e{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===oe.BINARY_EVENT;r||n.type===oe.BINARY_ACK?(n.type=r?oe.EVENT:oe.ACK,this.reconstructor=new cx(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(uu(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(oe[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===oe.BINARY_EVENT||r.type===oe.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(i,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(du.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case oe.CONNECT:return Xd(n);case oe.DISCONNECT:return n===void 0;case oe.CONNECT_ERROR:return typeof n=="string"||Xd(n);case oe.EVENT:case oe.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&ox.indexOf(n[0])===-1);case oe.ACK:case oe.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class cx{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=ix(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const ux=Object.freeze(Object.defineProperty({__proto__:null,Decoder:du,Encoder:lx,get PacketType(){return oe},protocol:ax},Symbol.toStringTag,{value:"Module"}));function Pt(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const dx=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class hm extends $e{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Pt(e,"open",this.onopen.bind(this)),Pt(e,"packet",this.onpacket.bind(this)),Pt(e,"error",this.onerror.bind(this)),Pt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,i;if(dx.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:oe.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,h=n.pop();this._registerAckCallback(d,h),o.id=d}const l=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},s),o=(...l)=>{this.io.clearTimeoutFn(i),n.apply(this,l)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,s)=>{const i=(o,l)=>o?s(o):r(l);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:oe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case oe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case oe.EVENT:case oe.BINARY_EVENT:this.onevent(e);break;case oe.ACK:case oe.BINARY_ACK:this.onack(e);break;case oe.DISCONNECT:this.ondisconnect();break;case oe.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:oe.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:oe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Yr(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Yr.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Yr.prototype.reset=function(){this.attempts=0};Yr.prototype.setMin=function(t){this.ms=t};Yr.prototype.setMax=function(t){this.max=t};Yr.prototype.setJitter=function(t){this.jitter=t};class Hl extends $e{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Yo(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Yr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||ux;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Xw(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=Pt(n,"open",function(){r.onopen(),e&&e()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},o=Pt(n,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Pt(e,"ping",this.onping.bind(this)),Pt(e,"data",this.ondata.bind(this)),Pt(e,"error",this.onerror.bind(this)),Pt(e,"close",this.onclose.bind(this)),Pt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Go(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new hm(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const ds={};function Ar(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Zw(t,e.path||"/socket.io"),r=n.source,s=n.id,i=n.path,o=ds[s]&&i in ds[s].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return l?c=new Hl(r,e):(ds[s]||(ds[s]=new Hl(r,e)),c=ds[s]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(Ar,{Manager:Hl,Socket:hm,io:Ar,connect:Ar});function hx(){try{const t=typeof window<"u"?new URLSearchParams(window.location.search):null,e=(t==null?void 0:t.get("writeToken"))||void 0,n=typeof window<"u"&&window.localStorage.getItem("writeToken")||void 0,s=e||n||void 0;if(e&&typeof window<"u")try{window.localStorage.setItem("writeToken",e)}catch{}return s||void 0}catch{return}}function ci(t){const e={"Content-Type":"application/json"};return t&&(e["x-write-token"]=t),e}async function fx(t,e,n,r,s,i,o){const l=await fetch(`${t}/api/matches`,{method:"POST",headers:ci(i),body:JSON.stringify({roomId:e,match:n,players:r,timestamps:s,operatorId:o})});if(!l.ok)throw new Error(` (${l.status})`);return l.json()}async function px(t,e,n,r,s,i,o){const l=await fetch(`${t}/api/matches/strict`,{method:"POST",headers:ci(i),body:JSON.stringify({roomId:e,match:n,players:r,timestamps:s,operatorId:o})});if(!l.ok)throw new Error(`strict(${l.status})`);return l.json()}async function fm(t,e,n,r,s,i,o){const l=await fetch(`${t}/api/matches/partial`,{method:"POST",headers:ci(i),body:JSON.stringify({roomId:e,match:n,players:r,timestamps:s,operatorId:o})});if(!l.ok)throw new Error(`partial(${l.status})`);return l.json()}async function pm(t,e){const n=await fetch(`${t}/api/match-verification-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(!n.ok){const r=await n.json();throw new Error(r.error||` (${n.status})`)}return n.json()}async function mm(t,e){const n=await fetch(`${t}/api/rooms/${e}`,{method:"DELETE"});if(!n.ok&&n.status!==204){const r=await n.json().catch(()=>({}));throw new Error(r.error||` (${n.status})`)}return!0}async function gm(t,e){const n=await fetch(`${t}/api/matches/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const r=await n.json();throw new Error(r.error||` (${n.status})`)}return n.json()}async function ym(t,e,n,r){const s=await fetch(`${t}/api/matches/${e}/events`,{method:"POST",headers:ci(r),body:JSON.stringify({events:n})});if(!s.ok)throw new Error(` (${s.status})`);return s.json()}async function vm(t,e,n,r){const s=await fetch(`${t}/api/matches/${e}/finalize`,{method:"POST",headers:ci(r),body:JSON.stringify(n)});if(!s.ok)throw new Error(`Finalize  (${s.status})`);return s.json()}async function mx(t,e){const n=await fetch(`${t}/api/members/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const r=await n.json();throw new Error(r.error||` (${n.status})`)}return n.json()}async function wm(t,e){const n=await fetch(`${t}/api/members/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const r=await n.json();throw new Error(r.error||` (${n.status})`)}return n.json()}async function xm(t,e){const n=await fetch(`${t}/api/members/${e}`);if(!n.ok)throw new Error(` (${n.status})`);return n.json()}async function bm(t,e){const n=await fetch(`${t}/api/members/${e}/matches`);if(!n.ok)throw new Error(` (${n.status})`);return n.json()}async function hu(t,e){const n=await fetch(`${t}/api/members/validate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifiers:e})});if(!n.ok)throw new Error(` (${n.status})`);return n.json()}async function _m(t,e){const n=await fetch(`${t}/api/members/request-password-reset-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(!n.ok){const r=await n.json();throw new Error(r.error||` (${n.status})`)}return n.json()}async function km(t,e){const n=await fetch(`${t}/api/members/reset-password-with-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const r=await n.json();throw new Error(r.error||` (${n.status})`)}return n.json()}async function Sm(t,e){const n=await fetch(`${t}/api/operators/${e}/rooms`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!n.ok){const r=await n.json();throw new Error(r.error||` (${n.status})`)}return n.json()}async function to(t,e){const n=await fetch(`${t}/api/operators/${e}/active-rooms`);if(!n.ok){const r=await n.json();throw new Error(r.error||` (${n.status})`)}return n.json()}async function jm(t,e){const n=await fetch(`${t}/api/operators/${e}/matches`);if(!n.ok){const r=await n.json();throw new Error(r.error||` (${n.status})`)}return n.json()}async function Ps(t,e){const n=await fetch(`${t}/api/admin/members`,{headers:{"x-admin-token":e}});if(!n.ok)throw new Error(` (${n.status})`);return n.json()}async function fu(t,e,n,r){const s=await fetch(`${t}/api/admin/members/${n}`,{method:"PUT",headers:{"Content-Type":"application/json","x-admin-token":e},body:JSON.stringify(r)});if(!s.ok)throw new Error(` (${s.status})`);return s.json()}async function Vl(t,e,n){const r=await fetch(`${t}/api/members/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw new Error(` (${r.status})`);return r.json()}async function Cm(t,e,n){const r=await fetch(`${t}/api/admin/members/${n}`,{method:"DELETE",headers:{"x-admin-token":e}});if(!r.ok)throw new Error(` (${r.status})`);return r.json()}async function Ts(t){const e=await fetch(`${t}/api/member/regions`);if(!e.ok)throw new Error(` (${e.status})`);return e.json()}async function Is(t,e){const n=e?`?regionCode=${encodeURIComponent(e)}`:"",r=await fetch(`${t}/api/member/districts${n}`);if(!r.ok)throw new Error(` (${r.status})`);return r.json()}async function pu(t,e){const n=await fetch(`${t}/api/admin/member/regions`,{headers:{"x-admin-token":e}});if(!n.ok)throw new Error(` (${n.status})`);return n.json()}async function mu(t,e,n){const r=n?`?regionCode=${encodeURIComponent(n)}`:"",s=await fetch(`${t}/api/admin/member/districts${r}`,{headers:{"x-admin-token":e}});if(!s.ok)throw new Error(` (${s.status})`);return s.json()}async function Em(t,e,n){const r=await fetch(`${t}/api/admin/member/districts`,{method:"POST",headers:{"Content-Type":"application/json","x-admin-token":e},body:JSON.stringify(n)});if(r.ok)return r.json();if(r.status===409){const s=await fetch(`${t}/api/admin/member/districts/${n.regionCode}/${n.code3}`,{method:"PUT",headers:{"Content-Type":"application/json","x-admin-token":e},body:JSON.stringify({name:n.name,active:n.active})});if(!s.ok)throw new Error(` (${s.status})`);return s.json()}throw new Error(` (${r.status})`)}async function Nm(t,e,n,r){const s=await fetch(`${t}/api/admin/member/districts/${n}/${r}`,{method:"DELETE",headers:{"x-admin-token":e}});if(!s.ok)throw new Error(` (${s.status})`);return s.json()}async function Rm(t,e,n){const r=new URLSearchParams;n!=null&&n.memberId&&r.append("memberId",n.memberId),n!=null&&n.page&&r.append("page",String(n.page)),n!=null&&n.pageSize&&r.append("pageSize",String(n.pageSize));const s=r.toString(),i=`${t}/api/admin/matches${s?`?${s}`:""}`,o=await fetch(i,{headers:{"x-admin-token":e}});if(!o.ok)throw new Error(` (${o.status})`);return o.json()}async function Pm(t,e,n){const r=await fetch(`${t}/api/admin/member/regions`,{method:"POST",headers:{"Content-Type":"application/json","x-admin-token":e},body:JSON.stringify(n)});if(r.ok)return r.json();if(r.status===409){const s=await fetch(`${t}/api/admin/member/regions/${n.code3}`,{method:"PUT",headers:{"Content-Type":"application/json","x-admin-token":e},body:JSON.stringify({name:n.name,active:n.active})});if(!s.ok)throw new Error(` (${s.status})`);return s.json()}throw new Error(` (${r.status})`)}async function Tm(t,e,n,r){const s=await fetch(`${t}/api/members/${n}/renew`,{method:"POST",headers:{"Content-Type":"application/json","x-admin-token":e},body:JSON.stringify({years:r})});if(!s.ok)throw new Error(` (${s.status})`);return s.json()}async function Im(t,e){const n=await fetch(`${t}/api/members/request-register-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(!n.ok){const r=await n.json();throw new Error(r.error||` (${n.status})`)}return n.json()}async function no(t,e){const n=await fetch(`${t}/api/members/register-with-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const r=await n.json();throw new Error(r.error||` (${n.status})`)}return n.json()}const gx=Object.freeze(Object.defineProperty({__proto__:null,appendEvents:ym,createMatch:fx,createMatchPartial:fm,createMatchStrict:px,createOperatorRoom:Sm,deleteAdminMemberDistrict:Nm,deleteMember:Cm,deleteOperatorRoom:mm,finalizeMatch:vm,getMember:xm,getMemberMatches:bm,getOperatorActiveRooms:to,getOperatorMatches:jm,listAdminMatches:Rm,listAdminMemberDistricts:mu,listAdminMemberRegions:pu,listMemberDistricts:Is,listMemberRegions:Ts,listMembers:Ps,loginMember:wm,registerMember:mx,registerMemberWithCode:no,renewMembership:Tm,requestPasswordResetCode:_m,requestRegisterEmailCode:Im,resetPasswordWithCode:km,sendMatchVerificationCode:pm,startMatchV2:gm,updateMember:fu,updateMemberSelf:Vl,upsertAdminMemberDistrict:Em,upsertAdminMemberRegion:Pm,validateMembers:hu},Symbol.toStringTag,{value:"Module"}));class Lr{constructor(e,n){de(this,"name");de(this,"memberId");de(this,"score");de(this,"framesWon");de(this,"fouls");de(this,"misses");de(this,"safeties");de(this,"highBreaks",[]);this.name=e,this.memberId=n,this.score=0,this.framesWon=0,this.fouls=0,this.misses=0,this.safeties=0}static fromJSON(e){const n=new Lr(e.name,e.memberId);return n.score=e.score,n.framesWon=e.framesWon,n.fouls=e.fouls,n.misses=e.misses,n.safeties=e.safeties,n.highBreaks=e.highBreaks,n}add_points(e){this.score+=e}subtract_points(e){this.score-=e}add_frame(){this.framesWon++}reset_score(){this.score=0}add_foul(){this.fouls++}add_miss(){this.misses++}add_safety(){this.safeties++}add_high_break(e,n){this.highBreaks.push({score:e,time:n})}clone(){const e=new Lr(this.name,this.memberId);return e.score=this.score,e.framesWon=this.framesWon,e.fouls=this.fouls,e.misses=this.misses,e.safeties=this.safeties,e.highBreaks=[...this.highBreaks],e}}class Ne{constructor(e={}){de(this,"players");de(this,"settings");de(this,"frame");de(this,"currentPlayerIndex");de(this,"redsRemaining");de(this,"pottedColors");de(this,"mustPotRed");de(this,"isFreeBall");de(this,"isFrameOver");de(this,"isMatchOver");de(this,"isRespotBlack");de(this,"isClearingColours");de(this,"isClearingColoursFreeChoicePending");de(this,"isFoulCommitted");de(this,"breakScore");de(this,"breakTime");de(this,"status");de(this,"frameWinnerAwarded");de(this,"history");de(this,"shotHistory");de(this,"timers");var w,j,v,f,p,_,E,T,P,I,B,L,Q,Y,J,O;const n=((j=(w=e.playersInfo)==null?void 0:w[0])==null?void 0:j.name)??"Player 1",r=((f=(v=e.playersInfo)==null?void 0:v[1])==null?void 0:f.name)??"Player 2",s=((_=(p=e.playersInfo)==null?void 0:p[0])==null?void 0:_.memberId)??"P1",i=((T=(E=e.playersInfo)==null?void 0:E[1])==null?void 0:T.memberId)??"P2",o=((P=e.settings)==null?void 0:P.matchName)??"Snooker Match",l=((I=e.settings)==null?void 0:I.redBalls)??15,c=((B=e.settings)==null?void 0:B.framesRequired)??1,u=((L=e.settings)==null?void 0:L.newRulesEnabled)??!1,d=((Q=e.settings)==null?void 0:Q.matchNamePart)??null,h=((Y=e.settings)==null?void 0:Y.matchKeyNormalized)??null,m=((J=e.settings)==null?void 0:J.matchCode)??null,y=e.startingPlayerIndex??0,x=((O=e.settings)==null?void 0:O.handicaps)??[0,0];if(this.players=[new Lr(n,s),new Lr(r,i)],this.settings={matchName:o,redBalls:l,framesRequired:c,newRulesEnabled:u,matchNamePart:d,matchKeyNormalized:h,matchCode:m,handicaps:x},this.frame=1,this.currentPlayerIndex=y,this.redsRemaining=this.settings.redBalls,this.pottedColors=[],this.mustPotRed=!0,this.isFreeBall=!1,this.isFrameOver=!1,this.isMatchOver=!1,this.isRespotBlack=!1,this.isClearingColours=!1,this.isClearingColoursFreeChoicePending=!1,this.isFoulCommitted=!1,this.breakScore=0,this.breakTime=0,this.status="playing",this.frameWinnerAwarded=!1,this.history=[],this.shotHistory=[],this.timers={frameTime:0,matchTime:0},Array.isArray(this.settings.handicaps)){const[F,k]=[Number(this.settings.handicaps[0]||0),Number(this.settings.handicaps[1]||0)],{apply0:A,apply1:b}=Ne.computeNetHandicap(F,k);A>0&&this.players[0].add_points(A),b>0&&this.players[1].add_points(b)}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,r=new Ne;return Object.assign(r,n),r.players=n.players.map(s=>Lr.fromJSON(s)),r.history=[],r}pot(e){if(e<1){this.miss();return}if(this.saveState(),this.isFreeBall){const i=this.players[this.currentPlayerIndex];let o=1;this.isClearingColours&&(o=[2,3,4,5,6,7][this.pottedColors.length]),i.add_points(o),this.breakScore+=o,this.mustPotRed=!1,this.isFreeBall=!1,this.isFoulCommitted=!1,this.shotHistory.push({player:this.currentPlayerIndex,ball:this.getBallName(e),points:o,type:"pot",timestamp:Date.now()});return}if(this.isFoulCommitted=!1,this.redsRemaining>0){if(this.mustPotRed&&e>1){this.foul(Math.max(4,e));return}if(!this.mustPotRed&&e===1){this.foul(4);return}}if(this.isClearingColours&&!this.isClearingColoursFreeChoicePending){const o=[2,3,4,5,6,7][this.pottedColors.length];if(e!==o){this.foul(Math.max(4,e));return}}const r=this.players[this.currentPlayerIndex];let s=e;if(this.isRespotBlack)if(e===7)this.isFrameOver=!0,r.add_frame();else{this.foul(Math.max(4,e));return}this.isFreeBall&&e>1&&(s=1),r.add_points(s),this.breakScore+=s,e===1?(!this.isFreeBall&&this.redsRemaining>0&&(this.redsRemaining--,this.redsRemaining===0&&(this.isClearingColours=!0,this.isClearingColoursFreeChoicePending=!0)),this.mustPotRed=!1):this.redsRemaining>0?this.mustPotRed=!0:this.isClearingColours&&this.isClearingColoursFreeChoicePending?this.isClearingColoursFreeChoicePending=!1:this.isClearingColours?(this.isFreeBall||this.pottedColors.push(e),this.pottedColors.length===6&&e===7&&(this.players[0].score===this.players[1].score?(this.isRespotBlack=!0,this.pottedColors.pop()):this.isFrameOver=!0)):this.isClearingColours=!0,this.shotHistory.push({player:this.currentPlayerIndex,ball:this.getBallName(e),points:s,type:"pot",timestamp:Date.now()}),this.isFreeBall=!1}toggleFreeBall(){this.isFreeBall=!this.isFreeBall}foul(e){if(this.saveState(),this.redsRemaining===0&&this.pottedColors.length===6){this.isFrameOver=!0;const r=1-this.currentPlayerIndex;this.players[r].add_frame(),this.frameWinnerAwarded=!0;return}if(this.isRespotBlack){this.isFrameOver=!0;const r=1-this.currentPlayerIndex;this.players[r].add_frame(),this.frameWinnerAwarded=!0;return}this.breakScore>=20&&this.players[this.currentPlayerIndex].add_high_break(this.breakScore,this.breakTime);const n=1-this.currentPlayerIndex;this.players[n].add_points(e),this.players[this.currentPlayerIndex].add_foul(),this.breakScore=0,this.breakTime=0,this.shotHistory.push({player:this.currentPlayerIndex,points:e,type:"foul",timestamp:Date.now()}),this.currentPlayerIndex=n,this.isFoulCommitted=!0,this.redsRemaining===0&&this.isClearingColours&&this.isClearingColoursFreeChoicePending&&(this.isClearingColoursFreeChoicePending=!1)}foulRed(e){let n=Math.max(1,Math.floor(e||0));if(this.redsRemaining<=0){this.foul(4);return}this.saveState(),this.breakScore>=20&&this.players[this.currentPlayerIndex].add_high_break(this.breakScore,this.breakTime),n=Math.min(n,this.redsRemaining),this.redsRemaining-=n;const r=1-this.currentPlayerIndex,s=4;this.players[r].add_points(s),this.players[this.currentPlayerIndex].add_foul(),this.breakScore=0,this.breakTime=0,this.shotHistory.push({player:this.currentPlayerIndex,points:s,type:"foul",timestamp:Date.now()}),this.currentPlayerIndex=r,this.isFoulCommitted=!0,this.redsRemaining===0&&(this.isClearingColours=!0,this.isClearingColoursFreeChoicePending=!1)}potMultipleReds(e){if(this.isRespotBlack||this.isClearingColours||this.isFreeBall){this.foul(4);return}if(this.redsRemaining<=0)return;if(!this.mustPotRed){this.foul(4);return}this.saveState();let n=Math.max(1,Math.floor(e||0));n=Math.min(n,this.redsRemaining),this.players[this.currentPlayerIndex].add_points(n),this.breakScore+=n,this.redsRemaining-=n,this.mustPotRed=!1,this.isFoulCommitted=!1,this.shotHistory.push({player:this.currentPlayerIndex,ball:"red",points:n,type:"pot",timestamp:Date.now()})}miss(){this.saveState(),this.players[this.currentPlayerIndex].add_miss(),this.shotHistory.push({player:this.currentPlayerIndex,points:0,type:"miss",timestamp:Date.now()}),this.redsRemaining===0&&this.isClearingColours&&this.isClearingColoursFreeChoicePending&&(this.isClearingColoursFreeChoicePending=!1),this.switchPlayer()}safe(){this.saveState(),this.players[this.currentPlayerIndex].add_safety(),this.shotHistory.push({player:this.currentPlayerIndex,points:0,type:"safety",timestamp:Date.now()}),this.redsRemaining===0&&this.isClearingColours&&this.isClearingColoursFreeChoicePending&&(this.isClearingColoursFreeChoicePending=!1),this.switchPlayer()}switchPlayer(){this.saveState(),this.breakScore>=20&&this.players[this.currentPlayerIndex].add_high_break(this.breakScore,this.breakTime),this.breakScore=0,this.breakTime=0,this.currentPlayerIndex=1-this.currentPlayerIndex,this.mustPotRed=this.redsRemaining>0,this.isFreeBall=!1,this.isFoulCommitted=!1,this.redsRemaining===0&&this.isClearingColours&&this.isClearingColoursFreeChoicePending&&(this.isClearingColoursFreeChoicePending=!1)}concede(){this.saveState(),this.isFrameOver=!0;const e=1-this.currentPlayerIndex;this.players[e].add_frame(),this.frameWinnerAwarded=!0,this.checkMatchOver()}newFrame(){if(this.saveState(),!this.frameWinnerAwarded){const e=this.players[0].score>this.players[1].score?0:1;this.players[e].add_frame()}if(this.checkMatchOver(),!this.isMatchOver){if(this.frame++,this.players.forEach(e=>e.reset_score()),Array.isArray(this.settings.handicaps)){const[e,n]=[Number(this.settings.handicaps[0]||0),Number(this.settings.handicaps[1]||0)],{apply0:r,apply1:s}=Ne.computeNetHandicap(e,n);r>0&&this.players[0].add_points(r),s>0&&this.players[1].add_points(s)}this.redsRemaining=this.settings.redBalls,this.pottedColors=[],this.mustPotRed=!0,this.isFreeBall=!1,this.isFrameOver=!1,this.isRespotBlack=!1,this.isClearingColours=!1,this.isClearingColoursFreeChoicePending=!1,this.isFoulCommitted=!1,this.breakScore=0,this.breakTime=0,this.timers.frameTime=0,this.currentPlayerIndex=(this.frame-1)%2,this.frameWinnerAwarded=!1}}static computeNetHandicap(e,n){const r=Math.sign(e),s=Math.sign(n),i=Math.abs(e),o=Math.abs(n);return e===n?{apply0:0,apply1:0}:r>0&&s<0?{apply0:i+o,apply1:0}:s>0&&r<0?{apply0:0,apply1:o+i}:r>=0&&s>=0?i>o?{apply0:i-o,apply1:0}:o>i?{apply0:0,apply1:o-i}:{apply0:0,apply1:0}:r<=0&&s<=0?i<o?{apply0:o-i,apply1:0}:o<i?{apply0:0,apply1:i-o}:{apply0:0,apply1:0}:{apply0:0,apply1:0}}saveState(){const e=JSON.stringify(this),n=Ne.fromJSON(JSON.parse(e));n.history=this.history.slice(),this.history.push(n)}undo(){if(this.history.length>0){const e=this.history.pop();if(e)return e}return this}undoSteps(e){let n=Math.max(0,Math.floor(e||0)),r=this;for(;n>0&&r.history.length>0;){const s=r.history.pop();if(!s)break;r=s,n--}return r}clone(){const e=new Ne({playersInfo:this.players.map(n=>({name:n.name,memberId:n.memberId})),settings:{...this.settings},startingPlayerIndex:this.currentPlayerIndex});return Object.assign(e,JSON.parse(JSON.stringify(this))),e.players=this.players.map(n=>n.clone()),e.history=this.history.slice(),e}checkMatchOver(){const e=this.settings.framesRequired;if(e%2===0)this.players[0].framesWon+this.players[1].framesWon>=e&&(this.isMatchOver=!0,this.status="ended");else{const n=Math.ceil(e/2);for(const r of this.players)if(r.framesWon>=n){this.isMatchOver=!0,this.status="ended";break}}}getBallName(e){switch(e){case 1:return"red";case 2:return"yellow";case 3:return"green";case 4:return"brown";case 5:return"blue";case 6:return"pink";case 7:return"black";default:return}}getWinner(){if(!this.isMatchOver)return null;if(this.settings.framesRequired%2===0){const n=this.players[0].framesWon,r=this.players[1].framesWon;return n===r?null:n>r?this.players[0]:this.players[1]}const e=Math.ceil(this.settings.framesRequired/2);for(const n of this.players)if(n.framesWon>=e)return n;return null}toJSON(){const{history:e,...n}=this;return n}adminAdjustRedsRemaining(e){this.saveState();const n=Math.max(0,Math.min(this.settings.redBalls,Math.floor(e||0)));this.redsRemaining=n,this.mustPotRed=this.redsRemaining>0,this.redsRemaining===0?(this.isClearingColours=!0,this.isClearingColoursFreeChoicePending=!1):(this.isClearingColours=!1,this.isClearingColoursFreeChoicePending=!1)}getRemainingPoints(){let e=this.redsRemaining*8;const n=[2,3,4,5,6,7];if(this.redsRemaining>0)e+=27;else for(const r of n)this.pottedColors.includes(r)||(e+=r);return e}}const Om=({player:t,isCurrentPlayer:e,isFreeBall:n,handicapRaw:r})=>{const s=`relative p-4 rounded-lg shadow-md transition-all duration-300 bg-gray-800 ${e?"border-4 border-yellow-400 shadow-yellow-300":"border-2 border-transparent"}`,i="font-bold text-2xl text-white",o="text-6xl font-bold my-2 text-yellow-200",l="text-lg font-semibold text-gray-300",c=u=>{const d=Math.floor(u/60),h=u%60;return`${d}:${h.toString().padStart(2,"0")}`};return a.jsxs("div",{className:s,children:[e&&n&&a.jsx("div",{className:"absolute top-2 right-2 bg-purple-600 text-white text-xs font-bold px-2 py-1 rounded-full animate-pulse",children:"FREE BALL"}),a.jsxs("h3",{className:i,children:[t.name,(()=>{const u=(t.memberId||"").trim();return u?a.jsxs("span",{className:"ml-2 text-base text-gray-300 font-semibold",children:["(",u,")"]}):null})(),(()=>{if(r==null||typeof r=="string"&&r.trim()==="")return null;const d=typeof r=="number"?r:Number(r),h=isNaN(d)?String(r):d>0?`+${d}`:`${d}`;return a.jsxs("span",{className:"ml-2 text-base text-gray-300 font-semibold",children:["(",h,")"]})})()]}),a.jsx("div",{className:o,children:t.score}),a.jsxs("div",{className:"mt-1 grid grid-cols-3 gap-2 text-center",children:[a.jsxs("div",{className:"bg-black/40 rounded px-2 py-1 border border-yellow-400/30",children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-300",children:"Fouls"}),a.jsx("div",{className:"text-sm font-bold text-yellow-300 leading-tight",children:t.fouls})]}),a.jsxs("div",{className:"bg-black/40 rounded px-2 py-1 border border-yellow-400/30",children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-300",children:"Miss"}),a.jsx("div",{className:"text-sm font-bold text-yellow-300 leading-tight",children:t.misses})]}),a.jsxs("div",{className:"bg-black/40 rounded px-2 py-1 border border-yellow-400/30",children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-300",children:"Safe"}),a.jsx("div",{className:"text-sm font-bold text-yellow-300 leading-tight",children:t.safeties})]})]}),t.highBreaks.filter(u=>u.score>=20).length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("h4",{className:`${l} text-lg text-center`,children:"High Break"}),a.jsx("div",{className:"text-center mt-1",children:t.highBreaks.filter(u=>u.score>=20).map(u=>a.jsxs("div",{className:"text-gray-300 text-sm",children:[u.score," (",c(u.time),")"]},`${u.score}-${u.time}`))})]})]})};function gu(t){const e=(t||"").trim();if(!e)return{namePart:"",codePart:null};const n=e.match(/^(.*?)[\s\-]*\(([^)]+)\)\s*$/);if(n)return{namePart:(n[1]||"").trim(),codePart:(n[2]||"").trim()||null};const r=e.match(/^(.*?)[\s\-]*\[([^\]]+)\]\s*$/);if(r)return{namePart:(r[1]||"").trim(),codePart:(r[2]||"").trim()||null};const s=e.match(/^(.*?)[\s\-]+([A-Za-z0-9_#\-]+)\s*$/);return s&&/[0-9]/.test(s[2])?{namePart:(s[1]||"").trim(),codePart:(s[2]||"").trim()}:{namePart:e,codePart:null}}function $m(t){return(t||"").trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").replace(/--+/g,"-")}function Zd(t,e,n){let r=0,s=0,i=0,o=0,l=0,c=0,u=0,d=0,h=0;const m=[];let y=0;const x=[];let w=0,j=0,v=0,f=0,p=0,_=typeof n=="number"?n:15,E=_>0,T=!1,P=!1,I=!1,B=0,L=0,Q=0,Y=0,J=!1,O=!1,F=!1,k=!1,A=!1,b=0,N=0,R=0,S=0;const D=[];let z=0,$=0;const V=()=>_<2&&Math.abs(z-$)<5;let X=0,Z=0;const ne={red:0,yellow:0,green:0,brown:0,blue:0,pink:0,black:0},C=[0,0,0,0];let M=null;for(let Ae=0;Ae<t.length;Ae++){const le=t[Ae];if(le.type==="pot"?le.playerIndex===0?z+=le.points||0:$+=le.points||0:le.type==="foul"&&(le.playerIndex===0?$+=le.points||0:z+=le.points||0),le.playerIndex!==e){le.type==="foul"&&(i+=le.points||0),h>d&&(d=h),h>0&&(m.push(h),x.push(y)),h=0,y=0,J&&(b>=4&&N++,O&&(F?Y++:Q++),S>0&&(D.push(S),S=0),J=!1,O=!1,F=!1,k=!1,A=!1,b=0),M=le.playerIndex;continue}r++;const Ut=typeof le.shotTimeMs=="number"?le.shotTimeMs:0;if(Ut>0){o+=Ut,S+=Ut,Ut<=7e3&&u++;const ts=Ut/1e3;ts<=5?C[0]++:ts<=10?C[1]++:ts<=20?C[2]++:C[3]++,M===e&&(l+=Ut,c++)}if(le.type==="pot"){const ts=T;s++,i+=le.points||0,h+=le.points||0,Ut>0&&(y+=Ut);const lg=le.ballName==="red"?Math.max(1,Math.floor(le.points||1)):1;if(b+=lg,le.ballName&&ne[le.ballName]!==void 0&&ne[le.ballName]++,T)E=!1,T=!1;else if(le.ballName==="red"){const Ru=Math.max(1,Math.floor(le.points||1));_=Math.max(0,_-Ru),E=!1,O=!0,_===0&&(P=!0,I=!0)}else F=!0,_>0?E=!0:P&&I?I=!1:P=!0;k||(k=!0,A=le.ballName==="red",(A||ts&&!P)&&R++)}else h>0&&Ut>0&&(y+=Ut),h>d&&(d=h),h>0&&(m.push(h),x.push(y)),h=0,y=0,k||(k=!0,A=!1);le.type==="safe"&&(w++,V()&&X++),le.type==="foul"&&(j++,v+=le.points||0,V()&&Z++,_===0&&(P=!0,I=!1)),le.type==="miss"&&(f++,_>0&&E?B++:L++,b>=4&&N++,O&&(F?Y++:Q++),S>0&&(D.push(S),S=0),J=!1,O=!1,F=!1,k=!1,A=!1,b=0,_===0&&P&&I&&(I=!1),V()&&Z++),le.type==="switch"&&(p++,b>=4&&N++,O&&(F?Y++:Q++),J&&y>0&&(x.push(y),y=0),S>0&&(D.push(S),S=0),_===0&&P&&I&&(I=!1),J=!1,O=!1,F=!1,k=!1,A=!1,b=0,V()&&Z++),le.type==="freeBallToggle"&&(T=!T),!J&&M!==e&&(J=!0,O=!1,F=!1,k=!1,A=!1,b=0),M=e}h>d&&(d=h),h>0&&(m.push(h),x.push(y)),J&&O&&(F?Y++:Q++),J&&b>=4&&N++;const q=r?s/r:0,he=r?o/r:0,ce=r?u/r:0,G=s+f?s/(s+f):0,jt=f?s/f:s>0?1:0,W=c?l/c:0,_e=ne.red,pe=_e+B,Te=pe?_e/pe:0,ue=ne.yellow+ne.green+ne.brown+ne.blue+ne.pink+ne.black,ye=ue+L,ke=ye?ue/ye:0,Ct=Q?Y/Q:0,Re=N+R,Ue=Re?N/Re:0,Ye=Z?X/Z:0;let hn=0,hi=0,ku=0,Su=0,ju=0,Cu=0;for(const Ae of m)Ae>=20&&Ae<=29?hn++:Ae>=30&&Ae<=49?hi++:Ae>=50&&Ae<=79?ku++:Ae>=80&&Ae<=99?Su++:Ae>=100&&Ae<=146?ju++:Ae===147&&Cu++;let Eu=0,ra=0;for(const Ae of D)Eu+=Ae,Ae>ra&&(ra=Ae);const Nu=D.length,ig=Nu?Eu/Nu:0,og=x.length,sa=s+f,ag=sa?w/sa:w>0?1:0;return{playerIndex:e,totalShots:r,potCount:s,totalPoints:i,potRate:q,potSuccessRate:G,potOverMissRate:jt,avgShotTimeMs:he,avgRoundShotTimeMs:W,avgBreakTimeMs:ig,maxBreakTimeMs:ra,breakCount:og,quickShotCount:u,quickShotRate:ce,maxBreakPoints:d,safeCount:w,safeSuccessRate:ag,safeNumerator:w,safeDenominator:sa,foulCount:j,foulPointsGiven:v,missCount:f,switchCount:p,redSuccessRate:Te,colorSuccessRate:ke,redNumerator:_e,redDenominator:B,colorNumerator:ue,colorDenominator:L,entryRate:Ct,entrySuccessRate:Ue,entryNumerator:N,entryDenominator:Re,pressureRatio:Ye,potByBall:ne,shotTimeBuckets:C,break20_29:hn,break30_49:hi,break50_79:ku,break80_99:Su,break100_146:ju,break147:Cu}}const Kl={compute(t,e){var l,c;let n=[];const r=ee.getEvents(t)||[];if(r.length>0)n=r;else if(e){const u=e.shotHistory||[],d=[];let h=u.length&&u[0].timestamp||Date.now();for(let m=0;m<u.length;m++){const y=u[m],x=typeof y.timestamp=="number"?y.timestamp:h+1,w=Math.max(0,x-h);h=x;const j={type:y.type==="safety"?"safe":y.type,playerIndex:y.player,playerMemberId:((l=e.players[y.player])==null?void 0:l.memberId)||`P${y.player+1}`,ballName:y.ball,points:typeof y.points=="number"?y.points:0,timestamp:x,shotTimeMs:w};if(d.push(j),y.type==="safety"||y.type==="miss"||y.type==="foul"){const v={type:"switch",playerIndex:y.player,playerMemberId:((c=e.players[y.player])==null?void 0:c.memberId)||`P${y.player+1}`,timestamp:x+1,shotTimeMs:1};d.push(v)}}d.sort((m,y)=>(m.timestamp??0)-(y.timestamp??0)),n=d}else n=[];const s=e==null?void 0:e.settings.redBalls,i=Zd(n,0,s),o=Zd(n,1,s);return{perPlayer:[i,o],eventsCount:n.length}},buildMatchRecord(t,e){var m,y;const n=ee.getEvents(t),r=ee.getFoulTotals(t),s=this.compute(t,e),i=((m=n[0])==null?void 0:m.timestamp)??null,o=((y=n[n.length-1])==null?void 0:y.timestamp)??null;let l=null;if(e){const x=e.settings.framesRequired,w=e.players[0].framesWon,j=e.players[1].framesWon;if(x%2===0)w+j>=x&&(l=w===j?null:w>j?0:1);else{const v=Math.ceil(x/2);w>=v?l=0:j>=v?l=1:l=null}}const c=e&&e.settings.matchName||"",{namePart:u,codePart:d}=gu(c),h=$m(u);return{roomId:t,match:e?{name:e.settings.matchName,namePart:e.settings.matchNamePart??(u||null),matchKeyNormalized:e.settings.matchKeyNormalized??h,matchCode:e.settings.matchCode??(d||null),framesRequired:e.settings.framesRequired,redBalls:e.settings.redBalls,handicaps:e.settings.handicaps}:null,players:e?e.players.map(x=>({name:x.name,memberId:x.memberId,framesWon:x.framesWon,score:x.score})):[],winnerIndex:l,timestamps:{start:i,end:o},foulTotals:r,stats:s,events:n,version:1}}},yx="modulepreload",vx=function(t){return"/"+t},eh={},Xr=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=vx(c),c in eh)return;eh[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":yx,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,y)=>{h.addEventListener("load",m),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},wx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Xr(async()=>{const{default:r}=await Promise.resolve().then(()=>Zr);return{default:r}},[]).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class yu extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class th extends yu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class nh extends yu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class rh extends yu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Jl;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Jl||(Jl={}));var xx=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class bx{constructor(e,{headers:n={},customFetch:r,region:s=Jl.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=wx(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return xx(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o,signal:l}=n;let c={},{region:u}=n;u||(u=this.region);const d=new URL(`${this.url}/${e}`);u&&u!=="any"&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u));let h;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(c["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(c["Content-Type"]="application/json",h=JSON.stringify(o)));const m=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h,signal:l}).catch(j=>{throw j.name==="AbortError"?j:new th(j)}),y=m.headers.get("x-relay-error");if(y&&y==="true")throw new nh(m);if(!m.ok)throw new rh(m);let x=((r=m.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),w;return x==="application/json"?w=yield m.json():x==="application/octet-stream"?w=yield m.blob():x==="text/event-stream"?w=m:x==="multipart/form-data"?w=yield m.formData():w=yield m.text(),{data:w,error:null,response:m}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new th(s)}:{data:null,error:s,response:s instanceof rh||s instanceof nh?s.context:void 0}}})}}var st={},vu={},Xo={},ui={},Zo={},ea={},_x=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Hr=_x();const kx=Hr.fetch,Am=Hr.fetch.bind(Hr),Lm=Hr.Headers,Sx=Hr.Request,jx=Hr.Response,Zr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Lm,Request:Sx,Response:jx,default:Am,fetch:kx},Symbol.toStringTag,{value:"Module"})),Cx=hg(Zr);var ta={};Object.defineProperty(ta,"__esModule",{value:!0});let Ex=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ta.default=Ex;var Dm=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ea,"__esModule",{value:!0});const Nx=Dm(Cx),Rx=Dm(ta);let Px=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Nx.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,u;let d=null,h=null,m=null,y=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const f=await i.text();f===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=f:h=JSON.parse(f))}const j=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),v=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");j&&v&&v.length>1&&(m=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,y=406,x="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const j=await i.text();try{d=JSON.parse(j),Array.isArray(d)&&i.status===404&&(h=[],d=null,y=200,x="OK")}catch{i.status===404&&j===""?(y=204,x="No Content"):d={message:j}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,y=200,x="OK"),d&&this.shouldThrowOnError)throw new Rx.default(d)}return{error:d,data:h,count:m,status:y,statusText:x}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};ea.default=Px;var Tx=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zo,"__esModule",{value:!0});const Ix=Tx(ea);let Ox=class extends Ix.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Zo.default=Ox;var $x=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ui,"__esModule",{value:!0});const Ax=$x(Zo);let Lx=class extends Ax.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};ui.default=Lx;var Dx=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xo,"__esModule",{value:!0});const hs=Dx(ui);let Bx=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new hs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new hs.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new hs.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new hs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new hs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Xo.default=Bx;var Bm=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vu,"__esModule",{value:!0});const Mx=Bm(Xo),Ux=Bm(ui);let Fx=class Mm{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new Mx.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Mm(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(l="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new Ux.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};vu.default=Fx;var es=bt&&bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(st,"__esModule",{value:!0});st.PostgrestError=st.PostgrestBuilder=st.PostgrestTransformBuilder=st.PostgrestFilterBuilder=st.PostgrestQueryBuilder=st.PostgrestClient=void 0;const Um=es(vu);st.PostgrestClient=Um.default;const Fm=es(Xo);st.PostgrestQueryBuilder=Fm.default;const zm=es(ui);st.PostgrestFilterBuilder=zm.default;const Wm=es(Zo);st.PostgrestTransformBuilder=Wm.default;const qm=es(ea);st.PostgrestBuilder=qm.default;const Hm=es(ta);st.PostgrestError=Hm.default;var zx=st.default={PostgrestClient:Um.default,PostgrestQueryBuilder:Fm.default,PostgrestFilterBuilder:zm.default,PostgrestTransformBuilder:Wm.default,PostgrestBuilder:qm.default,PostgrestError:Hm.default};const{PostgrestClient:Wx,PostgrestQueryBuilder:ik,PostgrestFilterBuilder:ok,PostgrestTransformBuilder:ak,PostgrestBuilder:lk,PostgrestError:ck}=zx;class qx{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Hx="2.15.5",Vx=`realtime-js/${Hx}`,Kx="1.0.0",Ql=1e4,Jx=1e3,Qx=100;var Os;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Os||(Os={}));var De;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(De||(De={}));var Tt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Tt||(Tt={}));var Gl;(function(t){t.websocket="websocket"})(Gl||(Gl={}));var qn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(qn||(qn={}));class Gx{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Vm{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var me;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(me||(me={}));const sh=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=Yx(o,t,e,s),i),{})},Yx=(t,e,n,r)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?Km(i,o):Yl(o)},Km=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return tb(e,n)}switch(t){case me.bool:return Xx(e);case me.float4:case me.float8:case me.int2:case me.int4:case me.int8:case me.numeric:case me.oid:return Zx(e);case me.json:case me.jsonb:return eb(e);case me.timestamp:return nb(e);case me.abstime:case me.date:case me.daterange:case me.int4range:case me.int8range:case me.money:case me.reltime:case me.text:case me.time:case me.timestamptz:case me.timetz:case me.tsrange:case me.tstzrange:return Yl(e);default:return Yl(e)}},Yl=t=>t,Xx=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Zx=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},eb=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},tb=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Km(e,l))}return t},nb=t=>typeof t=="string"?t.replace(" ","T"):t,Jm=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Da{constructor(e,n,r={},s=Ql){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ih;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ih||(ih={}));class $s{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$s.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=$s.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=$s.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const m=d.map(j=>j.presence_ref),y=h.map(j=>j.presence_ref),x=d.filter(j=>y.indexOf(j.presence_ref)<0),w=h.filter(j=>m.indexOf(j.presence_ref)<0);x.length>0&&(l[u]=x),w.length>0&&(c[u]=w)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(y=>y.presence_ref),m=d.filter(y=>h.indexOf(y.presence_ref)<0);e[l].unshift(...m)}r(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var oh;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(oh||(oh={}));var As;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(As||(As={}));var Xt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Xt||(Xt={}));class wu{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=De.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Da(this,Tt.join,this.params,this.timeout),this.rejoinTimer=new Vm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=De.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=De.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=De.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=De.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=De.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new $s(this),this.broadcastEndpointURL=Jm(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==De.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[As.PRESENCE]&&this.bindings[As.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(y=>e==null?void 0:e(Xt.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(Xt.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var x;if(this.socket.setAuth(),y===void 0){e==null||e(Xt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,j=(x=w==null?void 0:w.length)!==null&&x!==void 0?x:0,v=[];for(let f=0;f<j;f++){const p=w[f],{filter:{event:_,schema:E,table:T,filter:P}}=p,I=y&&y[f];if(I&&I.event===_&&I.schema===E&&I.table===T&&I.filter===P)v.push(Object.assign(Object.assign({},p),{id:I.id}));else{this.unsubscribe(),this.state=De.errored,e==null||e(Xt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Xt.SUBSCRIBED);return}}).receive("error",y=>{this.state=De.errored,e==null||e(Xt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Xt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===De.joined&&e===As.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=De.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Da(this,Tt.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=De.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Da(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Qx){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Tt;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var x,w,j;return((x=y.filter)===null||x===void 0?void 0:x.event)==="*"||((j=(w=y.filter)===null||w===void 0?void 0:w.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===o}).map(y=>y.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var x,w,j,v,f,p;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const _=y.id,E=(x=y.filter)===null||x===void 0?void 0:x.event;return _&&((w=n.ids)===null||w===void 0?void 0:w.includes(_))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const _=(f=(v=y==null?void 0:y.filter)===null||v===void 0?void 0:v.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return _==="*"||_===((p=n==null?void 0:n.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:w,table:j,commit_timestamp:v,type:f,errors:p}=x;m=Object.assign(Object.assign({},{schema:w,table:j,commit_timestamp:v,eventType:f,new:{},old:{},errors:p}),this._getPayloadRecords(x))}y.callback(m,r)})}_isClosed(){return this.state===De.closed}_isJoined(){return this.state===De.joined}_isJoining(){return this.state===De.joining}_isLeaving(){return this.state===De.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&wu.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Tt.close,{},e)}_onError(e){this._on(Tt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=De.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=sh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=sh(e.columns,e.old_record)),n}}const Ba=()=>{},Oi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},rb=[1e3,2e3,5e3,1e4],sb=1e4,ib=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ob{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ql,this.transport=null,this.heartbeatIntervalMs=Oi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ba,this.ref=0,this.reconnectTimer=null,this.logger=Ba,this.conn=null,this.sendBuffer=[],this.serializer=new Gx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Xr(async()=>{const{default:l}=await Promise.resolve().then(()=>Zr);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Gl.websocket}`,this.httpEndpoint=Jm(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=qx.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Kx}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Os.connecting:return qn.Connecting;case Os.open:return qn.Open;case Os.closing:return qn.Closing;default:return qn.Closed}}isConnected(){return this.connectionState()===qn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new wu(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Jx,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Oi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Tt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([ib],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:Vx};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Tt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Vm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Oi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,l,c,u,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Ql,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Oi.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:Ba,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>rb[h-1]||sb,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,m)=>m(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class xu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ie(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class ab extends xu{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Xl extends xu{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var lb=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Qm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Xr(async()=>{const{default:r}=await Promise.resolve().then(()=>Zr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},cb=()=>lb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Xr(()=>Promise.resolve().then(()=>Zr),void 0)).Response:Response}),Zl=t=>{if(Array.isArray(t))return t.map(n=>Zl(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Zl(r)}),e},ub=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var or=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Ma=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),db=(t,e,n)=>or(void 0,void 0,void 0,function*(){const r=yield cb();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new ab(Ma(s),i,o))}).catch(s=>{e(new Xl(Ma(s),s))}):e(new Xl(Ma(t),t))}),hb=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(ub(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function di(t,e,n,r,s,i){return or(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(n,hb(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>db(c,l,r))})})}function Po(t,e,n,r){return or(this,void 0,void 0,function*(){return di(t,"GET",e,n,r)})}function Ht(t,e,n,r,s){return or(this,void 0,void 0,function*(){return di(t,"POST",e,r,s,n)})}function ec(t,e,n,r,s){return or(this,void 0,void 0,function*(){return di(t,"PUT",e,r,s,n)})}function fb(t,e,n,r){return or(this,void 0,void 0,function*(){return di(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Gm(t,e,n,r,s){return or(this,void 0,void 0,function*(){return di(t,"DELETE",e,r,s,n)})}var pb=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class mb{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return pb(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ie(e))return{data:null,error:e};throw e}})}}var gb=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class yb{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}asStream(){return new mb(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.execute().then(e,n)}execute(){return gb(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ie(e))return{data:null,error:e};throw e}})}}var nt=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const vb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ah={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wb{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Qm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return nt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ah),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(e=="PUT"?ec:Ht)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ie(i))return{data:null,error:i};throw i}})}upload(e,n,r){return nt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return nt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:ah.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield ec(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ie(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return nt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Ht(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new xu("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}})}update(e,n,r){return nt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return nt(this,void 0,void 0,function*(){try{return{data:yield Ht(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}})}copy(e,n,r){return nt(this,void 0,void 0,function*(){try{return{data:{path:(yield Ht(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return nt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Ht(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return nt(this,void 0,void 0,function*(){try{const s=yield Ht(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(e),c=()=>Po(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new yb(c,this.shouldThrowOnError)}info(e){return nt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Po(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Zl(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}})}exists(e){return nt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield fb(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ie(r)&&r instanceof Xl){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return nt(this,void 0,void 0,function*(){try{return{data:yield Gm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}list(e,n,r){return nt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},vb),n),{prefix:e||""});return{data:yield Ht(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ie(s))return{data:null,error:s};throw s}})}listV2(e,n){return nt(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Ht(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const xb="2.12.2",bb={"X-Client-Info":`storage-js/${xb}`};var lr=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class _b{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},bb),n),this.fetch=Qm(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return lr(this,void 0,void 0,function*(){try{return{data:yield Po(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ie(e))return{data:null,error:e};throw e}})}getBucket(e){return lr(this,void 0,void 0,function*(){try{return{data:yield Po(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return lr(this,void 0,void 0,function*(){try{return{data:yield Ht(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return lr(this,void 0,void 0,function*(){try{return{data:yield ec(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}})}emptyBucket(e){return lr(this,void 0,void 0,function*(){try{return{data:yield Ht(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}deleteBucket(e){return lr(this,void 0,void 0,function*(){try{return{data:yield Gm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}}class kb extends _b{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new wb(this.url,this.headers,e,this.fetch)}}const Sb="2.58.0";let xs="";typeof Deno<"u"?xs="deno":typeof document<"u"?xs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xs="react-native":xs="node";const jb={"X-Client-Info":`supabase-js-${xs}/${Sb}`},Cb={headers:jb},Eb={schema:"public"},Nb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Rb={};var Pb=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Tb=t=>{let e;return t?e=t:typeof fetch>"u"?e=Am:e=fetch,(...n)=>e(...n)},Ib=()=>typeof Headers>"u"?Lm:Headers,Ob=(t,e,n)=>{const r=Tb(n),s=Ib();return(i,o)=>Pb(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var $b=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};function Ab(t){return t.endsWith("/")?t:t+"/"}function Lb(t,e){var n,r;const{db:s,auth:i,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>$b(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function Db(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ab(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Ym="2.72.0",fr=30*1e3,tc=3,Ua=tc*fr,Bb="http://localhost:9999",Mb="supabase.auth.token",Ub={"X-Client-Info":`gotrue-js/${Ym}`},nc="X-Supabase-Api-Version",Xm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Fb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zb=10*60*1e3;class bu extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function te(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Wb extends bu{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function qb(t){return te(t)&&t.name==="AuthApiError"}class Zm extends bu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Bn extends bu{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class mn extends Bn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Hb(t){return te(t)&&t.name==="AuthSessionMissingError"}class fs extends Bn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $i extends Bn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ai extends Bn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Vb(t){return te(t)&&t.name==="AuthImplicitGrantRedirectError"}class lh extends Bn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class rc extends Bn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Fa(t){return te(t)&&t.name==="AuthRetryableFetchError"}class ch extends Bn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class sc extends Bn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const To="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),uh=` 	
\r=`.split(""),Kb=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<uh.length;e+=1)t[uh[e].charCodeAt(0)]=-2;for(let e=0;e<To.length;e+=1)t[To[e].charCodeAt(0)]=e;return t})();function dh(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(To[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(To[r]),e.queuedBits-=6}}function eg(t,e,n){const r=Kb[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function hh(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Gb(o,r,n)};for(let o=0;o<t.length;o+=1)eg(t.charCodeAt(o),s,i);return e.join("")}function Jb(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Qb(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Jb(r,e)}}function Gb(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Yb(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)eg(t.charCodeAt(s),n,r);return new Uint8Array(e)}function Xb(t){const e=[];return Qb(t,n=>e.push(n)),new Uint8Array(e)}function Zb(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>dh(s,n,r)),dh(null,n,r),e.join("")}function e_(t){return Math.round(Date.now()/1e3)+t}function t_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const mt=()=>typeof window<"u"&&typeof document<"u",Mn={tested:!1,writable:!1},tg=()=>{if(!mt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Mn.tested)return Mn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Mn.tested=!0,Mn.writable=!0}catch{Mn.tested=!0,Mn.writable=!1}return Mn.writable};function n_(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const ng=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Xr(async()=>{const{default:r}=await Promise.resolve().then(()=>Zr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},r_=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",pr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Un=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},pn=async(t,e)=>{await t.removeItem(e)};class na{constructor(){this.promise=new na.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}na.promiseConstructor=Promise;function za(t){const e=t.split(".");if(e.length!==3)throw new sc("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Fb.test(e[r]))throw new sc("JWT not in base64url format");return{header:JSON.parse(hh(e[0])),payload:JSON.parse(hh(e[1])),signature:Yb(e[2]),raw:{header:e[0],payload:e[1]}}}async function s_(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function i_(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function o_(t){return("0"+t.toString(16)).substr(-2)}function a_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,o_).join("")}async function l_(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function c_(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await l_(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function cr(t,e,n=!1){const r=a_();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await pr(t,`${e}-code-verifier`,s);const i=await c_(r);return[i,r===i?"plain":"s256"]}const u_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function d_(t){const e=t.headers.get(nc);if(!e||!e.match(u_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function h_(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function f_(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const p_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ur(t){if(!p_.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Wa(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function fh(t){return JSON.parse(JSON.stringify(t))}var m_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Wn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),g_=[502,503,504];async function ph(t){var e;if(!r_(t))throw new rc(Wn(t),0);if(g_.includes(t.status))throw new rc(Wn(t),t.status);let n;try{n=await t.json()}catch(i){throw new Zm(Wn(i),i)}let r;const s=d_(t);if(s&&s.getTime()>=Xm["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new ch(Wn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new mn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ch(Wn(n),t.status,n.weak_password.reasons);throw new Wb(Wn(n),t.status||500,r)}const y_=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function re(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[nc]||(i[nc]=Xm["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await v_(t,e,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function v_(t,e,n,r,s,i){const o=y_(e,r,s,i);let l;try{l=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new rc(Wn(c),0)}if(l.ok||await ph(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await ph(c)}}function Wt(t){var e;let n=null;__(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=e_(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function mh(t){const e=Wt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function xn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function w_(t){return{data:t,error:null}}function x_(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=m_(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function b_(t){return t}function __(t){return t.access_token&&t.refresh_token&&t.expires_in}const qa=["global","local","others"];var k_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class S_{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=ng(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=qa[0]){if(qa.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qa.join(", ")}`);try{return await re(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await re(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:xn})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=k_(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:x_,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(te(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await re(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:xn})}catch(n){if(te(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:b_});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(x.split(";")[1].split("=")[1]);u[`${j}Page`]=w}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(te(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){ur(e);try{return await re(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:xn})}catch(n){if(te(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){ur(e);try{return await re(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:xn})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){ur(e);try{return await re(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:xn})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ur(e.userId);try{const{data:n,error:r}=await re(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(te(n))return{data:null,error:n};throw n}}async _deleteFactor(e){ur(e.userId),ur(e.id);try{return{data:await re(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(te(n))return{data:null,error:n};throw n}}}function gh(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function j_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const dr={debug:!!(globalThis&&tg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class C_ extends rg{}async function E_(t,e,n){dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),dr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new C_(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(dr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function sg(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function N_(t){return parseInt(t,16)}function R_(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function P_(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:m}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const y=sg(t.address),x=d?`${d}://${r}`:r,w=t.statement?`${t.statement}
`:"",j=`${x} wants you to sign in with your Ethereum account:
${y}

${w}`;let v=`URI: ${h}
Version: ${m}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(v+=`
Expiration Time: ${s.toISOString()}`),l&&(v+=`
Not Before: ${l.toISOString()}`),c&&(v+=`
Request ID: ${c}`),u){let f=`
Resources:`;for(const p of u){if(!p||typeof p!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${p}`);f+=`
- ${p}`}v+=f}return`${j}
${v}`}j_();const T_={url:Bb,storageKey:Mb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ub,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function yh(t,e,n){return await n()}const hr={};class ei{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ei.nextInstanceID,ei.nextInstanceID+=1,this.instanceID>0&&mt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},T_),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new S_({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=ng(s.fetch),this.lock=s.lock||yh,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:mt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=E_:this.lock=yh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:tg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=gh(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=gh(this.memoryStorage)),mt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=hr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){hr[this.storageKey]=Object.assign(Object.assign({},hr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=hr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){hr[this.storageKey]=Object.assign(Object.assign({},hr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ym}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=n_(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),mt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Vb(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return te(n)?{error:n}:{error:new Zm("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Wt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(te(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:m}=e;let y=null,x=null;this.flowType==="pkce"&&([y,x]=await cr(this.storage,this.storageKey)),i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:x},xform:Wt})}else if("phone"in e){const{phone:d,password:h,options:m}=e;i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Wt})}else throw new $i("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(te(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:l}=e;n=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:mh})}else if("phone"in e){const{phone:i,password:o,options:l}=e;n=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:mh})}else throw new $i("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new fs}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,o,l,c,u,d,h,m;let y,x;if("message"in e)y=e.message,x=e.signature;else{const{chain:w,wallet:j,statement:v,options:f}=e;let p;if(mt())if(typeof j=="object")p=j;else{const B=window;if("ethereum"in B&&typeof B.ethereum=="object"&&"request"in B.ethereum&&typeof B.ethereum.request=="function")p=B.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=j}const _=new URL((n=f==null?void 0:f.url)!==null&&n!==void 0?n:window.location.href),E=await p.request({method:"eth_requestAccounts"}).then(B=>B).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=sg(E[0]);let P=(r=f==null?void 0:f.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!P){const B=await p.request({method:"eth_chainId"});P=N_(B)}const I={domain:_.host,address:T,statement:v,uri:_.href,version:"1",chainId:P,nonce:(s=f==null?void 0:f.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=f==null?void 0:f.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=f==null?void 0:f.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=f==null?void 0:f.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=f==null?void 0:f.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=f==null?void 0:f.signInWithEthereum)===null||d===void 0?void 0:d.resources};y=P_(I),x=await p.request({method:"personal_sign",params:[R_(y),T]})}try{const{data:w,error:j}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:x},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Wt});if(j)throw j;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new fs}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:j})}catch(w){if(te(w))return{data:{user:null,session:null},error:w};throw w}}async signInWithSolana(e){var n,r,s,i,o,l,c,u,d,h,m,y;let x,w;if("message"in e)x=e.message,w=e.signature;else{const{chain:j,wallet:v,statement:f,options:p}=e;let _;if(mt())if(typeof v=="object")_=v;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))_=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const E=new URL((n=p==null?void 0:p.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const T=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),f?{statement:f}:null));let P;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")P=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)P=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)x=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),w=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${E.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(r=p==null?void 0:p.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=p==null?void 0:p.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((h=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...p.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const T=await _.signMessage(new TextEncoder().encode(x),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=T}}try{const{data:j,error:v}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Zb(w)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Wt});if(v)throw v;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new fs}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:v})}catch(j){if(te(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(e){const n=await Un(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Wt});if(await pn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new fs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(te(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,l=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Wt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new fs}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await cr(this.storage,this.storageKey));const{error:h}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new $i("You must provide either an email or phone number.")}catch(l){if(te(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Wt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(te(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await cr(this.storage,this.storageKey)),await re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:w_})}catch(i){if(te(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new mn;const{error:s}=await re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(te(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await re(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:l}=await re(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new $i("You must provide either an email or phone number and a type")}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Un(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Ua:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Un(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Wa()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:xn}):await this._useSession(async n=>{var r,s,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new mn}:await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:xn})})}catch(n){if(te(n))return Hb(n)&&(await this._removeSession(),await pn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new mn;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await cr(this.storage,this.storageKey));const{data:u,error:d}=await re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:xn});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new mn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=za(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(te(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new mn;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!mt())throw new Ai("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ai(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new lh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ai("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new lh("No code detected.");const{data:f,error:p}=await this._exchangeCodeForSession(e.code);if(p)throw p;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!o||!u)throw new Ai("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const y=m-d;y*1e3<=fr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const x=m-h;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,d);const{data:w,error:j}=await this._getUser(i);if(j)throw j;const v={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(te(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Un(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(qb(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await pn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=t_(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await cr(this.storage,this.storageKey,!0));try{return await re(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(te(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(te(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:m}=i;if(m)throw m;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await re(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return mt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(te(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await re(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(te(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await i_(async s=>(s>0&&await s_(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Wt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Fa(i)&&Date.now()+o-r<fr})}catch(r){if(this._debug(n,"error",r),te(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),mt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Un(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Un(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await pr(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Wa()}else if(s&&!s.user&&!s.user){const o=await Un(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await pn(this.storage,this.storageKey+"-user"),await pr(this.storage,this.storageKey,s)):s.user=Wa()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Ua;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Ua}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Fa(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new mn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new na;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new mn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),te(i)){const o={session:null,error:i};return Fa(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await pr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=fh(s);await pr(this.storage,this.storageKey,i)}else{const s=fh(n);await pr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await pn(this.storage,this.storageKey),await pn(this.storage,this.storageKey+"-code-verifier"),await pn(this.storage,this.storageKey+"-user"),this.userStorage&&await pn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&mt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),fr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/fr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${fr}ms, refresh threshold is ${tc} ticks`),s<=tc&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof rg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!mt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await cr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await re(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(te(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await re(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(te(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(te(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(te(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=za(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+zb>s)return r;const{data:i,error:o}=await re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:y,error:x}=await this.getSession();if(x||!y.session)return{data:null,error:x};r=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=za(r);n!=null&&n.allowExpired||h_(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const d=f_(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,Xb(`${l}.${c}`)))throw new sc("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}}ei.nextInstanceID=0;const I_=ei;class O_ extends I_{constructor(e){super(e)}}var $_=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class A_{constructor(e,n,r){var s,i,o;this.supabaseUrl=e,this.supabaseKey=n;const l=Db(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:Eb,realtime:Rb,auth:Object.assign(Object.assign({},Nb),{storageKey:c}),global:Cb},d=Lb(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=Ob(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Wx(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new kb(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new bx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return $_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new O_({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new ob(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const L_=(t,e,n)=>new A_(t,e,n);function D_(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}D_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");let Ha=null;function B_(){try{return Ha||(Ha=L_(Vd,Kd,{realtime:{params:{eventsPerSecond:10}}})),Ha}catch{return null}}function _u(t){const e=B_();if(!e)return null;const n=`room_${t}`;return e.channel(n,{config:{broadcast:{self:!1}}})}const M_=({gameState:t,setGameState:e})=>{var Z,ne;const{roomId:n}=ai(),r=Yt?Gp:n,s=r&&(Or(r)||r),i=r,o=ir(),[l,c]=g.useState(null),u=g.useRef(null),[d,h]=g.useState(!1),[m,y]=g.useState(!1),x=g.useRef(!1),j=g.useMemo(()=>{try{return JSON.parse(localStorage.getItem("memberSession")||"{}")}catch{return{}}},[]).id,[v,f]=g.useState(void 0),p=j||v;g.useEffect(()=>{s&&fetch(`${K}/rooms/${encodeURIComponent(s)}/state`).then(C=>C.json()).then(C=>{var M;(M=C.operator)!=null&&M.id&&f(C.operator.id)}).catch(console.error)},[s]);const _=g.useRef(!1),[E,T]=g.useState("idle"),P=g.useRef(!1);g.useEffect(()=>{t&&!t.isFrameOver&&(T("idle"),P.current=!1)},[t==null?void 0:t.isFrameOver]),g.useEffect(()=>{if(Yt&&!t)try{const C=new Ne({playersInfo:[{name:"Player A",memberId:"P1"},{name:"Player B",memberId:"P2"}],settings:{matchName:"Simple Match",redBalls:15,framesRequired:1},startingPlayerIndex:0});e(C)}catch{}},[Yt,t,e]),g.useEffect(()=>{if(!Zs){c(null);return}const C=Ar($t,{transports:["websocket","polling"],path:tr,reconnection:!0,reconnectionAttempts:1/0});return c(C),r&&C.emit("join room",r),C.on("chat message",M=>{console.log(M)}),()=>{C.disconnect()}},[s]),g.useEffect(()=>{t&&s&&!Yt&&!_.current&&(_.current=!0,F(!1).catch(()=>{}))},[t,s,Yt]),g.useEffect(()=>{if(!s||!Tn){if(u.current)try{u.current.unsubscribe()}catch{}u.current=null;return}const C=_u(s);if(C)return u.current=C,C.subscribe(M=>{if(M==="SUBSCRIBED"&&t)try{C.send({type:"broadcast",event:"state",payload:t.toJSON()})}catch{}}).on("broadcast",{event:"state"},M=>{try{const q=Ne.fromJSON((M==null?void 0:M.payload)??M);e(q)}catch{}}),()=>{try{C.unsubscribe()}catch{}}},[s,Tn]),g.useEffect(()=>{l&&l.on("gameState updated",C=>{if(x.current){x.current=!1;return}const M=Ne.fromJSON(C);e(M)})},[l,e]),g.useEffect(()=>{if(!t&&s)try{const C=ee.getState(s);if(C){const M=Ne.fromJSON(C);e(M)}}catch{}},[s,t,e]),g.useEffect(()=>{const C=setInterval(()=>{e(M=>{if(!M||M.status!=="playing")return M;const q=M.clone();if(q.timers.frameTime+=1,q.timers.matchTime+=1,!q.isFrameOver&&!q.isMatchOver&&(q.breakTime+=1),l&&(x.current=!0,l.emit("update gameState",{roomId:i,newState:q})),s)try{ee.setState(s,q.toJSON())}catch{}return q})},1e3);return()=>clearInterval(C)},[s,l]);const I=C=>{if(l&&(x.current=!0,l.emit("update gameState",{roomId:i,newState:C})),Tn&&u.current)try{u.current.send({type:"broadcast",event:"state",payload:C.toJSON()})}catch{}if(e(C),s)try{ee.setState(s,C.toJSON())}catch{}},B=C=>{const M=t.clone();if(M.pot(C),s){const q=M.shotHistory[M.shotHistory.length-1];q&&q.type==="pot"&&ee.appendEvent(s,{type:"pot",playerIndex:q.player,playerMemberId:M.players[q.player].memberId,ballName:q.ball,points:q.points})}I(M)},L=C=>{const M=t.clone();if(M.foul(C),s){const q=M.shotHistory[M.shotHistory.length-1];q&&q.type==="foul"&&(ee.appendEvent(s,{type:"foul",playerIndex:q.player,playerMemberId:M.players[q.player].memberId,points:q.points}),ee.incrementFoulTotal(s,q.player,q.points||0))}I(M)},Q=C=>{if(!t||t.isFrameOver)return;const M=t.clone(),q=Math.max(0,Math.min(M.settings.redBalls,M.redsRemaining+C));M.adminAdjustRedsRemaining(q),I(M)},Y=C=>{var he;if(!t||t.isClearingColours||t.isRespotBlack||t.isFreeBall||!t.mustPotRed||t.redsRemaining<C)return;const q=t.clone();if((he=q.potMultipleReds)==null||he.call(q,C),s){const ce=q.shotHistory[q.shotHistory.length-1];ce&&ce.type==="pot"&&ee.appendEvent(s,{type:"pot",playerIndex:ce.player,playerMemberId:q.players[ce.player].memberId,ballName:ce.ball,points:ce.points})}I(q)},J=()=>{const C=t.clone();if(s){const M=C.currentPlayerIndex;ee.appendEvent(s,{type:"switch",playerIndex:M,playerMemberId:C.players[M].memberId})}C.switchPlayer(),I(C)},O=()=>{if(!t)return;let C=0;const M=s?ee.popLastEvent(s):null;M&&(C=1,M.type==="foul"&&typeof M.points=="number"&&ee.decrementFoulTotal(s,M.playerIndex,M.points));const q=C?t.undoSteps(1):t.undo();I(q)},F=async C=>{if(!s||!t)return"skipped";const M=(t.players[0].memberId||"").trim(),q=(t.players[1].memberId||"").trim();if(!!!M&&!!!q)return"skipped";const G=Kl.buildMatchRecord(s,t);console.log("[uploadSegment] record:",G),console.log("[uploadSegment] record.stats:",JSON.stringify(G.stats,null,2)),console.log("[uploadSegment] record.events length:",G.events.length);const jt=r||s,W=[M,q].filter(Boolean),_e=W.length?await hu(K,W):{exists:{}},pe=W.filter(Ue=>_e.exists[Ue]);if(pe.length===0)return"skipped";const Te=G.players.map((Ue,Ye)=>{const hn=Ye===0?M:q,hi=hn&&pe.includes(hn)?hn:null;return{name:Ue.name,memberId:hi}}),ue=hx();let ye=ee.getMatchId(s),ke=ee.getAcceptedMemberIds(s);if(!ye){const Ue=await fm(K,jt,G.match,Te,{start:G.timestamps.start},ue,p);ye=Ue.matchId,ke=Ue.acceptedMemberIds||[],ee.setMatchId(s,ye),ee.setAcceptedMemberIds(s,ke),ee.setUploadedEventsCount(s,0)}const Ct=ee.getUploadedEventsCount(s),Re=G.events.slice(Ct);if(Re.length>0&&ye){const Ue=Re.filter(Ye=>ke.includes(String(Ye.playerMemberId||"")));Ue.length>0&&await ym(K,ye,Ue.map(Ye=>({type:Ye.type,playerIndex:Ye.playerIndex,playerMemberId:Ye.playerMemberId,ballName:Ye.ballName,points:Ye.points,timestamp:Ye.timestamp,shotTimeMs:Ye.shotTimeMs})),ue),ee.setUploadedEventsCount(s,Ct+Re.length)}if(C&&ye){const Ue=G.winnerIndex!==null&&ke.includes(String(G.players[G.winnerIndex].memberId||""))&&G.players[G.winnerIndex].memberId||null;await vm(K,ye,{foulTotals:G.foulTotals,stats:G.stats,timestamps:{end:G.timestamps.end},winnerMemberId:Ue,playersFinal:G.players,match:G.match},ue);try{ee.lockRoom(s,G.timestamps.end??null)}catch{}}return"uploaded"},k=()=>{if(!t)return;const C=t.clone();s&&Yt&&!P.current&&(ee.appendEvent(s,{type:"newFrame",playerIndex:C.currentPlayerIndex,playerMemberId:C.players[C.currentPlayerIndex].memberId}),P.current=!0),C.newFrame(),I(C)},A=async()=>{if(t){T("uploading");try{const C=await F(!0);T(C==="skipped"?"skipped":"success"),setTimeout(()=>{const M=typeof window<"u"&&window.location.search||"",q=s?`/room/${s}/live${M}`:`/room/preview/live${M}`;o(q)},2500)}catch(C){console.error(C),T("error")}}},b=async()=>{if(t)if(s&&!Yt){if(!P.current){const C=t.clone();ee.appendEvent(s,{type:"newFrame",playerIndex:C.currentPlayerIndex,playerMemberId:C.players[C.currentPlayerIndex].memberId}),P.current=!0}T("uploading");try{const C=await F(!1);T(C==="skipped"?"skipped":"success")}catch(C){console.error(C),T("error")}}else k()},N=()=>{if(window.confirm("Are you sure you want to concede the frame?")){const C=t.clone();s&&ee.appendEvent(s,{type:"concede",playerIndex:C.currentPlayerIndex,playerMemberId:C.players[C.currentPlayerIndex].memberId}),C.concede(),I(C)}},R=()=>{const C=t.clone();if(s){const M=C.currentPlayerIndex;ee.appendEvent(s,{type:"miss",playerIndex:M,playerMemberId:C.players[M].memberId,points:0})}C.miss(),I(C)},S=()=>{const C=t.clone();if(s){const M=C.currentPlayerIndex;ee.appendEvent(s,{type:"safe",playerIndex:M,playerMemberId:C.players[M].memberId,points:0})}C.safe(),I(C)},D=()=>{const C=t.clone();s&&ee.appendEvent(s,{type:"freeBallToggle",playerIndex:C.currentPlayerIndex,playerMemberId:C.players[C.currentPlayerIndex].memberId}),C.toggleFreeBall(),I(C)};if(!t)return a.jsxs("div",{className:"min-h-screen bg-green-900 text-white p-4 flex flex-col items-center justify-center",children:[r&&a.jsx("div",{className:"fixed left-3 bottom-3 z-50 pointer-events-none",style:{opacity:.65},children:a.jsx("span",{className:"text-white font-bold tracking-widest",style:{fontSize:"clamp(18px, 2.2vw, 28px)"},children:r})}),a.jsxs("div",{className:"bg-yellow-800 p-6 rounded-lg shadow-xl text-center max-w-md w-full",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:""}),a.jsx("p",{className:"mb-4 text-sm text-gray-200",children:" Setup "}),s&&a.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:()=>{const C=typeof window<"u"&&window.location.search||"";o(`/room/${s}/setup${C}`)},children:" Setup"})]})]});const z={1:"bg-red-600",2:"bg-yellow-400",3:"bg-green-600",4:"bg-yellow-800",5:"bg-blue-600",6:"bg-pink-500",7:"bg-black"},$=typeof window<"u"?new URLSearchParams(window.location.search||""):null,V=($==null?void 0:$.get("style"))||void 0;return V==="compact"||V==="mobile"?a.jsxs("div",{className:"min-h-screen bg-green-900 text-white p-3 flex flex-col",children:[r&&a.jsx("div",{className:"fixed left-3 bottom-3 z-40 pointer-events-none",style:{opacity:.65},children:a.jsx("span",{className:"text-white font-bold tracking-widest",style:{fontSize:"clamp(18px, 2.2vw, 28px)"},children:r})}),t.isFreeBall&&a.jsx("div",{className:"fixed top-2 right-2 z-50 pointer-events-none",children:a.jsx("div",{className:"bg-purple-600 text-white text-sm font-extrabold px-3 py-1.5 rounded-full shadow-lg ring-2 ring-purple-300 animate-pulse",children:"Free Ball"})}),a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"text-cyan-300 font-bold",children:["Scoring For: ",t.players[t.currentPlayerIndex].name]}),t.isFreeBall&&a.jsx("div",{className:"bg-purple-600 text-white text-xs font-bold px-2 py-1 rounded-full animate-pulse",children:"Free Ball"})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-2",children:[a.jsx("button",{onClick:()=>y(C=>!C),className:"p-3 rounded-lg bg-white hover:bg-gray-200 text-gray-900 font-bold border-2 border-black",children:"FOUL"}),[1,2,3,4,5,6,7].map(C=>{const M=C>1,q=C===1,ce=[2,3,4,5,6,7][t.pottedColors.length];let G=!1;return t.isRespotBlack?G=C!==7:t.isFreeBall?t.isClearingColours?t.isClearingColoursFreeChoicePending?G=C===1:G=C===1||C!==ce:G=C===1:t.isClearingColours?t.isClearingColoursFreeChoicePending?G=C===1:G=C!==ce:G=q&&!t.mustPotRed||M&&t.mustPotRed,t.pottedColors.includes(C)&&(G=!0),a.jsx("button",{onClick:()=>B(C),disabled:G,className:`p-3 font-bold text-lg text-white disabled:opacity-50 disabled:cursor-not-allowed ball-3d ${z[C]} border border-white`,children:C},`ball-${C}`)})]}),m&&a.jsx("div",{className:"mb-2",children:a.jsx("div",{className:"grid grid-cols-4 gap-2",children:[4,5,6,7].map(C=>a.jsx("button",{onClick:()=>{y(!1),L(C)},className:"p-3 rounded-lg bg-white hover:bg-gray-200 text-gray-900 font-bold border-2 border-black",children:C},`foul-${C}`))})}),a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"text-yellow-300 font-extrabold",children:["Reds Left ",t.redsRemaining]}),a.jsxs("div",{className:"text-yellow-300 font-extrabold",children:["Break ",t.breakScore]})]}),a.jsxs("div",{className:`grid ${t.isFoulCommitted?"grid-cols-4":"grid-cols-3"} gap-2 mb-2`,children:[a.jsx("button",{onClick:R,className:"p-2 rounded-md bg-gray-600 hover:bg-gray-700 text-white font-bold border border-white",children:"Miss"}),a.jsx("button",{onClick:S,className:"p-2 rounded-md bg-blue-500 hover:bg-blue-600 text-white font-bold border border-white",children:"Safety"}),a.jsx("button",{onClick:N,className:"p-2 rounded-md bg-red-800 hover:bg-red-900 text-white font-bold border border-white",children:"Concede"}),t.isFoulCommitted&&a.jsx("button",{onClick:D,className:`p-2 rounded-md font-bold ${t.isFreeBall?"bg-yellow-400 hover:bg-yellow-500 border-2 border-white text-black":"bg-yellow-700 hover:bg-yellow-800 border border-white text-white"}`,children:"Free Ball"})]}),a.jsx("div",{className:"mt-auto",children:a.jsxs("div",{className:"flex items-center justify-between bg-black/60 rounded px-3 py-2",children:[a.jsxs("div",{className:`flex-1 font-bold ${t.currentPlayerIndex===0?"bg-yellow-600 text-black rounded px-2 py-1":""}`,children:["\\",t.players[0].name," (",t.players[0].framesWon,")"]}),a.jsx("div",{className:"text-2xl font-extrabold px-4",children:t.players[0].score}),a.jsx("div",{className:"text-2xl font-extrabold px-4",children:t.players[1].score}),a.jsxs("div",{className:`flex-1 text-right font-bold ${t.currentPlayerIndex===1?"bg-yellow-600 text-black rounded px-2 py-1":""}`,children:["\\",t.players[1].name," (",t.players[1].framesWon,")"]})]})})]}):a.jsxs("div",{className:"min-h-screen bg-green-900 text-white p-4 flex flex-col items-center",children:[(((Z=t==null?void 0:t.settings)==null?void 0:Z.matchCode)||r)&&a.jsx("div",{className:"fixed left-3 bottom-3 z-50 pointer-events-none",style:{opacity:.65},children:a.jsx("span",{className:"text-white font-bold tracking-widest",style:{fontSize:"clamp(18px, 2.2vw, 28px)"},children:((ne=t==null?void 0:t.settings)==null?void 0:ne.matchCode)||r})}),a.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-wider",children:t.settings.matchName}),a.jsxs("p",{className:"text-xl text-gray-400",children:[t.players[0].framesWon," (",t.settings.framesRequired,") ",t.players[1].framesWon]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-6 mb-6",children:t.players.map((C,M)=>a.jsx(Om,{player:C,isCurrentPlayer:t.currentPlayerIndex===M,isFreeBall:t.isFreeBall&&t.currentPlayerIndex===M,handicapRaw:Array.isArray(t.settings.handicaps)?t.settings.handicaps[M]:void 0},C.memberId))}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-2 text-center",children:"Balling"}),a.jsx("div",{className:"grid grid-cols-7 gap-2",children:[1,2,3,4,5,6,7].map(C=>{const M=C>1,q=C===1,ce=[2,3,4,5,6,7][t.pottedColors.length];let G=!1;return t.isRespotBlack?G=C!==7:t.isFreeBall?t.isClearingColours?t.isClearingColoursFreeChoicePending?G=C===1:G=C===1||C!==ce:G=C===1:t.isClearingColours?t.isClearingColoursFreeChoicePending?G=C===1:G=C!==ce:G=q&&!t.mustPotRed||M&&t.mustPotRed,t.pottedColors.includes(C)&&(G=!0),a.jsx("button",{onClick:()=>B(C),disabled:G,className:`p-4 font-bold text-xl text-white disabled:opacity-50 disabled:cursor-not-allowed ball-3d ${z[C]} border border-white`,children:C},C)})}),t.isRespotBlack&&a.jsx("p",{className:"text-center text-yellow-400 font-bold mt-2",children:"Re-spot Black"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-2 text-center",children:"Fouls"}),a.jsx("div",{className:"grid grid-cols-7 gap-2",children:[4,5,6,7].map(C=>a.jsxs("button",{onClick:()=>L(C),className:"p-4 rounded-lg bg-white hover:bg-gray-200 text-gray-800 font-bold border-2 border-black",children:["Foul ",C]},C))})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx("button",{onClick:J,className:"p-4 rounded-lg bg-cyan-500 hover:bg-cyan-600 text-black font-bold border border-white",children:"Switch Player"}),a.jsx("button",{onClick:R,className:"p-4 rounded-lg bg-gray-600 hover:bg-gray-700 font-bold border border-white",children:"Miss"}),a.jsx("button",{onClick:S,className:"p-4 rounded-lg bg-blue-500 hover:bg-blue-600 font-bold border border-white",children:"Safe"}),t.isFoulCommitted&&a.jsx("button",{onClick:D,className:`p-4 rounded-lg font-bold ${t.isFreeBall?"bg-yellow-400 hover:bg-yellow-500 border-4 border-white":"bg-yellow-700 hover:bg-yellow-800 border border-white"}`,children:"Free Ball"}),a.jsx("button",{onClick:O,className:"p-4 rounded-lg bg-gray-500 hover:bg-gray-600 font-bold border border-white",children:"Undo"}),a.jsx("button",{onClick:N,className:"p-4 rounded-lg bg-red-800 hover:bg-red-900 font-bold col-span-2 md:col-span-2 border border-white",children:"Concede Frame"})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 justify-items-center",children:[a.jsx("button",{onClick:()=>Y(2),disabled:t.isClearingColours||t.isRespotBlack||t.isFreeBall||!t.mustPotRed||t.redsRemaining<2,className:"p-2 rounded-lg bg-red-700 hover:bg-red-800 text-white font-bold border border-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Red 2"}),a.jsx("button",{onClick:()=>Y(3),disabled:t.isClearingColours||t.isRespotBlack||t.isFreeBall||!t.mustPotRed||t.redsRemaining<3,className:"p-2 rounded-lg bg-red-700 hover:bg-red-800 text-white font-bold border border-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Red 3"})]}),a.jsxs("div",{className:"mt-4 p-3 border rounded",children:[a.jsx("div",{className:"mb-2 font-semibold text-center",children:""}),a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[a.jsx("button",{className:"px-3 py-1.5 rounded font-semibold bg-gray-700 hover:bg-gray-600 text-white disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>Q(-1),disabled:t.redsRemaining<=0||t.isFrameOver,children:"-1"}),a.jsxs("div",{className:"text-lg font-bold",children:["",t.redsRemaining]}),a.jsx("button",{className:"px-3 py-1.5 rounded font-semibold bg-gray-700 hover:bg-gray-600 text-white disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>Q(1),disabled:t.redsRemaining>=t.settings.redBalls||t.isFrameOver,children:"+1"})]})]})]}),t.isFrameOver&&a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-75 flex flex-col items-center justify-center z-50",children:a.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg text-center max-w-lg w-full",children:[a.jsx("h2",{className:"text-4xl font-bold mb-4",children:t.isMatchOver?"Match Over":"Frame Over"}),a.jsx("p",{className:"text-2xl mb-6",children:t.isMatchOver?`${t.players[0].framesWon>t.players[1].framesWon?t.players[0].name:t.players[1].name} wins the match!`:`${t.players[0].score>t.players[1].score?t.players[0].name:t.players[1].name} wins the frame!`}),E==="idle"&&a.jsx("button",{onClick:t.isMatchOver?A:b,className:"p-4 rounded-lg bg-green-600 hover:bg-green-700 font-bold text-xl border border-white w-full",children:t.isMatchOver?"End Match & View Stats":"Next Frame"}),E==="uploading"&&a.jsx("div",{className:"text-xl font-bold text-yellow-400 animate-pulse",children:t.isMatchOver?"Finalizing Match Data...":"Uploading Frame Data..."}),E==="success"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xl font-bold text-green-400 mb-4",children:"Data Uploaded Successfully!"}),a.jsx("div",{className:"text-sm text-gray-400 mb-4",children:"Match stats saved to database."}),!t.isMatchOver&&a.jsx("button",{onClick:k,className:"p-4 rounded-lg bg-blue-600 hover:bg-blue-700 font-bold text-xl border border-white w-full",children:"Start Next Frame"}),t.isMatchOver&&a.jsx("div",{className:"text-lg text-gray-300",children:"Redirecting to stats..."})]}),E==="skipped"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xl font-bold text-gray-400 mb-4",children:"Data Not Uploaded"}),a.jsx("div",{className:"text-sm text-gray-500 mb-4",children:"Guest match or invalid members. No data saved to database."}),!t.isMatchOver&&a.jsx("button",{onClick:k,className:"p-4 rounded-lg bg-blue-600 hover:bg-blue-700 font-bold text-xl border border-white w-full",children:"Continue to Next Frame"}),t.isMatchOver&&a.jsx("div",{className:"text-lg text-gray-300",children:"Redirecting..."})]}),E==="error"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xl font-bold text-red-400 mb-4",children:"Upload Failed!"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:t.isMatchOver?A:b,className:"flex-1 p-4 rounded-lg bg-yellow-600 hover:bg-yellow-700 font-bold text-lg border border-white",children:"Retry Upload"}),!t.isMatchOver&&a.jsx("button",{onClick:k,className:"flex-1 p-4 rounded-lg bg-gray-600 hover:bg-gray-700 font-bold text-lg border border-white",children:"Force Start (Skip)"}),t.isMatchOver&&a.jsx("button",{onClick:()=>{const C=typeof window<"u"&&window.location.search||"",M=s?`/room/${s}/live${C}`:`/room/preview/live${C}`;o(M)},className:"flex-1 p-4 rounded-lg bg-gray-600 hover:bg-gray-700 font-bold text-lg border border-white",children:"Skip & Exit"})]})]})]})})]})]})},U_=({onStartMatch:t})=>{const[e,n]=g.useState("Snooker Match"),[r,s]=g.useState("Player 1"),[i,o]=g.useState(""),[l,c]=g.useState(""),[u,d]=g.useState("Player 2"),[h,m]=g.useState(""),[y,x]=g.useState(""),[w,j]=g.useState(0),[v,f]=g.useState(0),[p,_]=g.useState(15),[E,T]=g.useState(1),[P,I]=g.useState(0),[B,L]=g.useState(null),[Q,Y]=g.useState(!1),J=ir(),{roomId:O}=ai(),F=async()=>{if(O){const V=Or(O)||O;try{const X=await fetch(`${K}/rooms/${encodeURIComponent(O)}/state`);if(X.ok){const Z=await X.json();Z.state&&ee.setState(V,Z.state)}}catch{}}const $=typeof window<"u"&&window.location.search||"";J(`/room/${O}${$}`)},k=async()=>{if(!O)return;const $=Or(O)||O;ee.clearRoom($);try{await fetch(`${K}/rooms/${encodeURIComponent(O)}/reset`,{method:"POST"})}catch(V){console.error(V)}Y(!1),setTimeout(()=>z(),200)},A=(()=>{const $=O||"";return $?/^[A-Z]{5}\d{4}$/.test($)?$:Gi($)||$:""})();g.useEffect(()=>{O&&(async()=>{try{const $=await fetch(`${K}/rooms/${encodeURIComponent(O)}/state`);if($.ok){const V=await $.json();V.operator&&L(V.operator)}}catch($){console.error($)}})()},[O]),g.useEffect(()=>{const $=i.trim(),V=h.trim(),X=[$,V].filter(Boolean);if(X.length===0){s("Player 1"),d("Player 2");return}let Z=!1;const ne=setTimeout(async()=>{try{const C=await hu(K,X);if(Z)return;const M=(C==null?void 0:C.exists)||{},q=(C==null?void 0:C.names)||{};if($){const ce=!!M[$]?q[$]||"Player 1":"GUEST_1";s(ce)}else s("Player 1");if(V){const ce=!!M[V]?q[V]||"Player 2":"GUEST_2";d(ce)}else d("Player 2")}catch{}},400);return()=>{Z=!0,clearTimeout(ne)}},[i,h]);const[b,N]=g.useState(!1),[R,S]=g.useState(!1),D=async($,V)=>{if(!$||!$.includes("@")){alert("Please enter a valid email address");return}const X=V===1?N:S;X(!0);try{await pm(K,$),alert(` ${$} ()`)}catch(Z){console.error("Send code error:",Z),Z.message.includes("404")||Z.message.includes("not registered")?alert(" Email "):alert(`: ${Z.message}`)}finally{X(!1)}},z=async()=>{if(O){const $=Or(O)||O,V=ee.getRoomData($);let X=null;try{const Re=await fetch(`${K}/rooms/${encodeURIComponent(O)}/state`);if(Re.ok){const Ue=await Re.json();X=(Ue==null?void 0:Ue.state)??null}}catch{}if(V.locked){alert(" Admin ");return}const Z=V.events&&V.events.length>0||!!V.state||Array.isArray(V.foulTotals)&&(V.foulTotals[0]>0||V.foulTotals[1]>0),ne=!!X&&Object.keys(X).length>0;if(Z||ne){Y(!0);return}let C=null,M="guest",q=null,he=null;try{const Re=await gm(K,{room_id:O||"",p1_email:i.trim(),p1_code:l.trim(),p2_email:h.trim(),p2_code:y.trim(),frames_required:E,red_balls:p,handicap0:w,handicap1:v,operator_id:(B==null?void 0:B.id)||void 0});C=Re.matchId,M=Re.mode,q=Re.p1MemberId,he=Re.p2MemberId}catch(Re){alert(`Failed to start match: ${Re.message}`);return}const{namePart:ce,codePart:G}=gu(e),jt=$m(ce),W=O||"",_e=/^[A-Z]{5}\d{4}$/,pe=W&&Gi(W)||null,Te=_e.test(W)?W:pe,ye={matchName:`${Te?`[${Te}] `:""}${e}`,redBalls:p,framesRequired:E,matchNamePart:ce,matchKeyNormalized:jt,matchCode:Te??G??null,handicaps:[w||0,v||0],matchId:C,mode:M};C&&(ee.setMatchId($,C),ee.setUploadedEventsCount($,0));const ke=[{name:r,email:i.trim(),memberId:q||i.trim()||void 0},{name:u,email:h.trim(),memberId:he||h.trim()||void 0}];t({playersInfo:ke,settings:ye,startingPlayerIndex:P});try{const Re=new Ne({playersInfo:ke,settings:ye,startingPlayerIndex:P});ee.setState($,Re.toJSON())}catch{}const Ct=typeof window<"u"&&window.location.search||"";J(`/room/${O}${Ct}`);return}i.trim(),h.trim(),t({playersInfo:[{name:r,email:i.trim()},{name:u,email:h.trim()}],settings:{matchName:e,redBalls:p,framesRequired:E,handicaps:[w||0,v||0]},startingPlayerIndex:P})};return a.jsxs("div",{className:"min-h-screen bg-green-900 p-4 flex flex-col items-center justify-center",children:[A&&a.jsx("div",{className:"fixed left-3 bottom-3 z-50 pointer-events-none",style:{opacity:.65},children:a.jsx("span",{className:"text-white font-bold tracking-widest",style:{fontSize:"clamp(18px, 2.2vw, 28px)"},children:A})}),a.jsxs("div",{className:"max-w-md w-full bg-yellow-800 rounded-xl shadow-md p-6",children:[a.jsx("h1",{className:"text-4xl font-bold text-center text-white mb-2 font-serif italic",children:Yp}),a.jsx("p",{className:"text-base text-center text-gray-300 mb-6 -mt-2",children:"Scoreboard System"}),B&&a.jsxs("div",{className:"mb-4 p-3 bg-yellow-900 rounded-lg text-center border border-yellow-700",children:[a.jsx("p",{className:"text-yellow-200 text-sm",children:"Room Operator"}),a.jsx("p",{className:"text-white font-medium text-lg",children:B.name||B.email||"Unknown"})]}),a.jsx("h2",{className:"text-2xl font-bold text-center text-white mb-6",children:"Create Match"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"setting-item",children:[a.jsx("label",{htmlFor:"matchName",className:"block text-sm font-medium text-white",children:"Match Name:"}),a.jsx("input",{type:"text",id:"matchName",value:e,onChange:$=>n($.target.value),className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md shadow-sm text-white placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),a.jsxs("div",{className:"player-setup grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-medium text-white",children:"Player 1"}),a.jsxs("div",{className:"input-group mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-white",children:"Full Name:"}),a.jsx("input",{type:"text",value:r,readOnly:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm text-gray-300 cursor-not-allowed"})]}),a.jsxs("div",{className:"input-group mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-white",children:"Email"}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("input",{type:"email",value:i,onChange:$=>o($.target.value),className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md shadow-sm text-white text-xs"}),a.jsx("button",{onClick:()=>D(i,1),disabled:b,className:"mt-1 px-2 py-1 bg-blue-600 text-white text-xs rounded disabled:opacity-50",children:b?"...":"Code"})]})]}),a.jsxs("div",{className:"input-group mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-white",children:"Verify Code"}),a.jsx("input",{type:"text",value:l,onChange:$=>c($.target.value),placeholder:"6-digit",className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md shadow-sm text-white"})]}),a.jsxs("div",{className:"input-group mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-white",children:"Handicap"}),a.jsx("input",{type:"number",value:w,onChange:$=>j(parseInt($.target.value,10)||0),className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md shadow-sm text-white"})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-medium text-white",children:"Player 2"}),a.jsxs("div",{className:"input-group mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-white",children:"Full Name:"}),a.jsx("input",{type:"text",value:u,readOnly:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm text-gray-300 cursor-not-allowed"})]}),a.jsxs("div",{className:"input-group mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-white",children:"Email"}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("input",{type:"email",value:h,onChange:$=>m($.target.value),className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md shadow-sm text-white text-xs"}),a.jsx("button",{onClick:()=>D(h,2),disabled:R,className:"mt-1 px-2 py-1 bg-blue-600 text-white text-xs rounded disabled:opacity-50",children:R?"...":"Code"})]})]}),a.jsxs("div",{className:"input-group mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-white",children:"Verify Code"}),a.jsx("input",{type:"text",value:y,onChange:$=>x($.target.value),placeholder:"6-digit",className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md shadow-sm text-white"})]}),a.jsxs("div",{className:"input-group mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-white",children:"Handicap"}),a.jsx("input",{type:"number",value:v,onChange:$=>f(parseInt($.target.value,10)||0),className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md shadow-sm text-white"})]})]})]}),a.jsxs("div",{className:"setting-item",children:[a.jsx("label",{className:"block text-sm font-medium text-white",children:"Number of Reds:"}),a.jsx("div",{className:"flex space-x-2 mt-1",children:[6,10,15].map($=>a.jsx("button",{className:`px-4 py-2 rounded-md text-sm font-medium ${p===$?"bg-blue-600 text-white":"bg-gray-700 text-gray-300"}`,onClick:()=>_($),children:$},$))})]}),a.jsxs("div",{className:"setting-item",children:[a.jsx("label",{htmlFor:"framesRequired",className:"block text-sm font-medium text-white",children:"Number of Frames:"}),a.jsx("input",{type:"number",id:"framesRequired",value:E,onChange:$=>T(parseInt($.target.value,10)),className:"mt-1 block w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md shadow-sm text-white"})]}),a.jsxs("div",{className:"setting-item",children:[a.jsx("label",{className:"block text-sm font-medium text-white",children:"Starting Player:"}),a.jsxs("div",{className:"flex space-x-2 mt-1",children:[a.jsx("button",{className:`px-4 py-2 rounded-md text-sm font-medium ${P===0?"bg-blue-600 text-white":"bg-gray-700 text-gray-300"}`,onClick:()=>I(0),children:r}),a.jsx("button",{className:`px-4 py-2 rounded-md text-sm font-medium ${P===1?"bg-blue-600 text-white":"bg-gray-700 text-gray-300"}`,onClick:()=>I(1),children:u})]})]}),a.jsx("button",{className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:z,children:"Start Match"})]})]}),O&&a.jsx("div",{className:"fixed left-3 bottom-3 z-50 pointer-events-none",style:{opacity:.65},children:a.jsx("span",{className:"text-white font-bold tracking-widest",style:{fontSize:"clamp(18px, 2.2vw, 28px)"},children:Gi(O)||O})}),Q&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50",children:a.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg shadow-xl text-center max-w-md w-full border border-gray-700",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:""}),a.jsx("p",{className:"mb-6 text-gray-300",children:""}),a.jsxs("div",{className:"flex flex-col space-y-3",children:[a.jsx("button",{className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded transition duration-200",onClick:F,children:" (Resume)"}),a.jsx("button",{className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-4 rounded transition duration-200",onClick:k,children:" (Overwrite)"}),a.jsx("button",{className:"w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded transition duration-200 mt-2",onClick:()=>Y(!1),children:""})]})]})})]})},ps=({children:t})=>{const[e,n]=g.useState(""),[r,s]=g.useState(!1),[i,o]=g.useState("");function l(){return K.replace(/\/$/,"")}async function c(d){const h=l();try{const m=`${h}/admin/overview?token=${encodeURIComponent(d)}&format=json`;if((await fetch(m,{method:"GET",cache:"no-store"})).ok)return!0}catch{}try{if((await fetch(`${h}/admin/overview`,{headers:{"x-admin-token":d},cache:"no-store"})).ok)return!0}catch{}return!1}g.useEffect(()=>{const h=new URLSearchParams(window.location.search).get("token")||"",m=localStorage.getItem("adminToken")||"",y=h||m;y&&(async()=>await c(y)&&(h&&localStorage.setItem("adminToken",h),s(!0)))()},[]);const u=async d=>{d.preventDefault(),o("");try{if(!await c(e))throw new Error("");localStorage.setItem("adminToken",e),s(!0)}catch(h){o(h.message||"")}};return r?a.jsx(a.Fragment,{children:t}):a.jsx("div",{className:"brand-page p-8 flex flex-col items-center justify-center",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6 text-center accent-yellow",children:""}),a.jsxs("form",{onSubmit:u,className:"glass rounded-xl p-8",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"token",className:"block text-sm font-medium mb-2 accent-blue",children:""}),a.jsx("input",{type:"password",id:"token",value:e,onChange:d=>n(d.target.value),className:"w-full bg-black/40 border border-white/10 text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[var(--brand-blue)]"})]}),a.jsx("button",{type:"submit",className:"w-full brand-button font-bold py-2 px-4 rounded transition-colors",children:""}),i&&a.jsx("p",{className:"text-red-500 mt-4 text-center",children:i}),a.jsx("p",{className:"text-gray-300/80 text-xs mt-4 text-center",children:" ADMIN_TOKEN"})]})]})})},F_=()=>{const{roomId:t}=ai(),e=t,n=t&&(Or(t)||t),r=e,[s,i]=g.useState(null),o=N=>({playerIndex:N,totalShots:0,potCount:0,totalPoints:0,potRate:0,potSuccessRate:0,potOverMissRate:0,avgShotTimeMs:0,avgRoundShotTimeMs:0,avgBreakTimeMs:0,maxBreakTimeMs:0,breakCount:0,quickShotCount:0,quickShotRate:0,maxBreakPoints:0,safeCount:0,safeSuccessRate:0,safeNumerator:0,safeDenominator:0,foulCount:0,foulPointsGiven:0,missCount:0,switchCount:0,redSuccessRate:0,colorSuccessRate:0,redNumerator:0,redDenominator:0,colorNumerator:0,colorDenominator:0,entryRate:0,entrySuccessRate:0,entryNumerator:0,entryDenominator:0,pressureRatio:0,potByBall:{red:0,yellow:0,green:0,brown:0,blue:0,pink:0,black:0},shotTimeBuckets:[0,0,0,0],break20_29:0,break30_49:0,break50_79:0,break80_99:0,break100_146:0,break147:0}),[l,c]=g.useState(()=>n?Kl.compute(n):{perPlayer:[o(0),o(1)],eventsCount:0}),[u,d]=g.useState(!1),[h,m]=g.useState(0),y=1,[x,w]=g.useState("init"),[j,v]=g.useState("none"),[f,p]=g.useState(null),[_,E]=g.useState(0),T=g.useRef(null),P=g.useRef(null),I=g.useMemo(()=>{try{return new URLSearchParams(window.location.search).get("debug")==="true"}catch{return!1}},[]),B=g.useRef(null),L=()=>{if(!n||B.current!=null)return;const N=()=>{const R=ee.getState(n);if(R)try{const S=Ne.fromJSON(R);i(S),v("storage"),p(Date.now());try{E(ee.getEvents(n).length)}catch{}}catch{}};N(),B.current=window.setInterval(N,500)},Q=()=>{B.current!=null&&(clearInterval(B.current),B.current=null)};g.useEffect(()=>{if(!Zs){const S=()=>{if(!n)return;const $=ee.getState(n);if($)try{const V=Ne.fromJSON($);i(V)}catch{}};S();const D=setInterval(S,500),z=$=>{!$.key||!n||$.key.includes(`snooker_room_${n}`)&&S()};return window.addEventListener("storage",z),()=>{clearInterval(D),window.removeEventListener("storage",z)}}if(n){const S=ee.getState(n);if(S)try{const D=Ne.fromJSON(S);i(D),v("storage"),p(Date.now());try{E(ee.getEvents(n).length)}catch{}}catch{}}L();const N=S=>{if(!(!S.key||!n)&&S.key.includes(`snooker_room_${n}`))try{const D=ee.getState(n);if(D){const z=Ne.fromJSON(D);i(z),v("storage"),p(Date.now());try{E(ee.getEvents(n).length)}catch{}}}catch{}};window.addEventListener("storage",N);const R=Ar($t,{transports:["websocket","polling"],path:tr,reconnection:!0,reconnectionAttempts:1/0});return r&&R.emit("join room",r),T.current=R,R.on("gameState updated",S=>{const D=Ne.fromJSON(S);i(D),v("socket"),p(Date.now());try{E(ee.getEvents(n).length)}catch{}}),R.on("connect",()=>{w("socket_connected")}),R.on("connect_error",()=>{w("socket_error")}),R.on("reconnect_error",()=>{w("socket_error")}),R.on("reconnect_failed",()=>{w("socket_error")}),R.on("disconnect",()=>{w("socket_disconnected")}),()=>{R.disconnect(),T.current=null,Q(),window.removeEventListener("storage",N)}},[n]),g.useEffect(()=>{if(!n||!Tn){if(P.current)try{P.current.unsubscribe()}catch{}P.current=null;return}const N=_u(n);if(N)return P.current=N,N.subscribe(R=>{if(R==="SUBSCRIBED"&&s)try{N.send({type:"broadcast",event:"state",payload:s.toJSON()})}catch{}}).on("broadcast",{event:"state"},R=>{try{const S=Ne.fromJSON((R==null?void 0:R.payload)??R);i(S),p(Date.now());try{E(ee.getEvents(n).length)}catch{}}catch{}}),()=>{try{N.unsubscribe()}catch{}}},[n,Tn]);const Y=N=>{const R=Math.floor(N/60).toString().padStart(2,"0"),S=(N%60).toString().padStart(2,"0");return`${R}:${S}`};if(g.useMemo(()=>(s==null?void 0:s.isMatchOver)??!1,[s==null?void 0:s.isMatchOver]),g.useEffect(()=>{n&&c(Kl.compute(n,s))},[n,_,s==null?void 0:s.shotHistory.length,s==null?void 0:s.currentPlayerIndex,s==null?void 0:s.players[0].score,s==null?void 0:s.players[1].score]),g.useEffect(()=>{const N=setInterval(()=>{m(R=>(R+1)%y)},8e3);return()=>clearInterval(N)},[y]),!s)return a.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:[e&&a.jsx("div",{className:"fixed left-3 bottom-3 z-50 pointer-events-none",style:{opacity:.65},children:a.jsx("span",{className:"text-white font-bold tracking-widest",style:{fontSize:"clamp(18px, 2.2vw, 28px)"},children:e})}),"Loading...",I&&a.jsxs("div",{className:"fixed bottom-2 right-2 bg-black/60 text-xs px-3 py-2 rounded",children:[a.jsxs("div",{children:["room: ",n]}),a.jsxs("div",{children:["conn: ",x]}),a.jsxs("div",{children:["src: ",j]}),a.jsxs("div",{children:["ts: ",f?new Date(f).toLocaleTimeString():"-"]})]})]});s.getRemainingPoints(),Math.abs(s.players[0].score-s.players[1].score),s.players[0].score>s.players[1].score?s.players[0]:s.players[1];const J=s.shotHistory[s.shotHistory.length-1],O=s.settings.matchName||"",F=gu(O),k=s.settings.matchCode||F.codePart||null,A=e?/^[A-Z]{5}\d{4}$/.test(e)?e:k||e:k,b=(()=>{const N=F.namePart||O||"Snooker Match";return A?`[${A}] ${N}`:N})();return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"live-stage-viewport bg-transparent text-white",children:a.jsx("div",{className:"live-stage-1920 px-2 pb-2",children:a.jsxs("div",{className:"w-full max-w-[1680px] mx-auto",children:[a.jsx("div",{className:"text-center mb-2",children:a.jsx("h1",{className:"text-3xl font-extrabold tracking-widest drop-shadow-md",style:{WebkitTextStroke:"2px #f5d000",textShadow:"1px 1px 0 #f5d000, -1px 1px 0 #f5d000, 1px -1px 0 #f5d000, -1px -1px 0 #f5d000"},children:b})}),a.jsx("div",{className:"grid grid-cols-2 gap-2 mb-2",children:s.players.map((N,R)=>a.jsx("div",{className:"scale-90",children:a.jsx(Om,{player:N,isCurrentPlayer:s.currentPlayerIndex===R,isFreeBall:s.isFreeBall&&s.currentPlayerIndex===R},N.memberId)}))}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 mb-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-center w-1/3",children:[a.jsx("p",{className:"text-gray-400",children:"Frame Time"}),a.jsx("p",{className:"font-bold text-base",children:Y(s.timers.frameTime)})]}),a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-black text-yellow-300 font-extrabold text-xl rounded px-4 py-1.5 inline-flex items-center gap-4",children:[a.jsx("span",{children:s.players[0].framesWon}),a.jsxs("span",{children:["(",s.settings.framesRequired,")"]}),a.jsx("span",{children:s.players[1].framesWon})]})}),a.jsxs("div",{className:"text-center w-1/3",children:[a.jsx("p",{className:"text-gray-400",children:"Match Time"}),a.jsx("p",{className:"font-bold text-base",children:Y(s.timers.matchTime)})]})]}),J&&a.jsxs("p",{className:"text-sm font-semibold text-gray-300 mt-2 text-center",children:["Last: ",`${s.players[J.player].memberId}: ${J.type} ${J.ball?`(Ball ${J.ball})`:""} - ${J.points} pts`]})]}),a.jsxs("div",{className:"w-full max-w-[1920px] mx-auto mb-2 bg-gray-800/60 rounded-lg p-3",children:[a.jsxs("h2",{className:"text-xl font-bold tracking-wider mb-3 text-center",children:["Live Stats  ",s.settings.matchName]}),a.jsxs("div",{className:"flex items-baseline justify-between mb-5",children:[a.jsxs("div",{className:"flex-1 text-right text-lg font-bold tracking-wide",children:[s.players[0].name,(()=>{const N=(s.players[0].memberId||"").trim();return N?a.jsxs("span",{className:"ml-2 text-base text-gray-300 font-semibold",children:["(",N,")"]}):null})()]}),a.jsx("div",{className:"mx-8 text-lg text-gray-300 tracking-wide",children:"vs"}),a.jsxs("div",{className:"flex-1 text-left text-lg font-bold tracking-wide",children:[s.players[1].name,(()=>{const N=(s.players[1].memberId||"").trim();return N?a.jsxs("span",{className:"ml-2 text-base text-gray-300 font-semibold",children:["(",N,")"]}):null})()]})]}),(()=>{const N=l.perPlayer[0],R=l.perPlayer[1],S=[{label:"",left:N.maxBreakPoints,right:R.maxBreakPoints},{label:"",left:N.foulPointsGiven,right:R.foulPointsGiven},{label:"",left:`${(N.avgShotTimeMs/1e3).toFixed(2)}s`,right:`${(R.avgShotTimeMs/1e3).toFixed(2)}s`},{label:"",left:`${(N.avgRoundShotTimeMs/1e3).toFixed(2)}s`,right:`${(R.avgRoundShotTimeMs/1e3).toFixed(2)}s`},{label:"",left:`${(N.potSuccessRate*100).toFixed(1)}% (${N.potCount}/${N.potCount+N.missCount})`,right:`${(R.potSuccessRate*100).toFixed(1)}% (${R.potCount}/${R.potCount+R.missCount})`},{label:"Safe",left:`${(N.safeSuccessRate*100).toFixed(1)}% (${N.safeNumerator}/${N.safeDenominator})`,right:`${(R.safeSuccessRate*100).toFixed(1)}% (${R.safeNumerator}/${R.safeDenominator})`},{label:"",left:`${(N.colorSuccessRate*100).toFixed(1)}% (${N.colorNumerator}/${N.colorNumerator+N.colorDenominator})`,right:`${(R.colorSuccessRate*100).toFixed(1)}% (${R.colorNumerator}/${R.colorNumerator+R.colorDenominator})`},{label:"",left:`${(N.redSuccessRate*100).toFixed(1)}% (${N.redNumerator}/${N.redNumerator+N.redDenominator})`,right:`${(R.redSuccessRate*100).toFixed(1)}% (${R.redNumerator}/${R.redNumerator+R.redDenominator})`},{label:"",left:`${(N.entrySuccessRate*100).toFixed(1)}% (${N.entryNumerator}/${N.entryDenominator})`,right:`${(R.entrySuccessRate*100).toFixed(1)}% (${R.entryNumerator}/${R.entryDenominator})`}];return a.jsx(a.Fragment,{children:a.jsx("div",{className:"space-y-2",children:S.map(D=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex-1 text-right text-2xl font-semibold tracking-wider",children:D.left}),a.jsx("div",{className:"mx-10 text-xl font-bold tracking-wider",children:D.label}),a.jsx("div",{className:"flex-1 text-left text-2xl font-semibold tracking-wider",children:D.right})]},D.label))})})})()]})]})})}),A&&a.jsx("div",{className:"fixed left-3 bottom-3 z-50 pointer-events-none",style:{opacity:.65},children:a.jsx("span",{className:"text-white font-bold tracking-widest",style:{fontSize:"clamp(18px, 2.2vw, 28px)"},children:A})}),I&&a.jsxs("div",{className:"fixed bottom-2 right-2 bg-black/60 text-xs px-3 py-2 rounded",children:[a.jsxs("div",{children:["room: ",n]}),a.jsxs("div",{children:["conn: ",x]}),a.jsxs("div",{children:["src: ",j]}),a.jsxs("div",{children:["ts: ",f?new Date(f).toLocaleTimeString():"-"]})]})]})},z_=()=>{const{roomId:t}=ai(),e=Yt?Gp:t,n=typeof window<"u"?new URLSearchParams(window.location.search||""):null,r=(n==null?void 0:n.get("socketRoom"))||void 0,s=e&&(Or(e)||e),i=r&&r.trim()||e||s,[o,l]=g.useState(null),[c]=g.useState(1);if(g.useEffect(()=>{const F=document.body.style.background,k=document.documentElement.style.background,A=document.body.style.overflow;return document.body.style.background="transparent",document.documentElement.style.background="transparent",document.body.style.overflow="hidden",()=>{document.body.style.background=F,document.documentElement.style.background=k,document.body.style.overflow=A}},[]),g.useEffect(()=>{const F=()=>{if(!s)return;const S=ee.getState(s);if(S)try{const D=Ne.fromJSON(S);l(D)}catch{}};if(!Zs&&!Tn){F();const S=setInterval(F,500),D=z=>{!z.key||!s||z.key.includes(`snooker_room_${s}`)&&F()};return window.addEventListener("storage",D),()=>{clearInterval(S),window.removeEventListener("storage",D)}}F();let k=null,A=null;const N=((n==null?void 0:n.get("socketTransport"))||void 0)==="polling"?["polling"]:["websocket","polling"],R=(n==null?void 0:n.get("enablePoll"))==="true"||(n==null?void 0:n.get("enablePoll"))==="1";if(Tn&&s)A=_u(s),A&&(A.subscribe(),A.on("broadcast",{event:"state"},S=>{try{const D=Ne.fromJSON((S==null?void 0:S.payload)??S);l(D)}catch(D){console.warn("Failed to parse Supabase broadcast payload:",D)}}));else{k=Ar($t,{transports:N,path:tr,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:8e3,timeout:1e4}),k.on("connect",()=>{i&&k.emit("join room",i)}),k.on("reconnect",()=>{i&&k.emit("join room",i)}),k.on("connect_error",()=>{}),k.on("disconnect",()=>{}),k.on("gameState updated",z=>{try{const $=Ne.fromJSON(z);l($)}catch($){console.warn("Failed to parse gameState for overlay:",$)}});let S=null;return(()=>{if(!R||!i)return;const z=`${K.replace(/\/$/,"")}/rooms/${encodeURIComponent(String(i))}/state`;S=setInterval(async()=>{try{const $=await fetch(z,{cache:"no-store"});if($.status===404){clearInterval(S),S=null;return}if($.ok){const V=await $.json();if(V&&V.state)try{const X=Ne.fromJSON(V.state);l(X)}catch{}}}catch{}},1e3)})(),()=>{try{clearInterval(S)}catch{}try{k&&k.disconnect()}catch{}try{A&&A.unsubscribe()}catch{}}}if(!Zs&&!Tn){const S=setInterval(F,500),D=z=>{!z.key||!s||z.key.includes(`snooker_room_${s}`)&&F()};return window.addEventListener("storage",D),()=>{try{k&&k.disconnect()}catch{}try{A&&A.unsubscribe()}catch{}clearInterval(S),window.removeEventListener("storage",D)}}return()=>{try{k&&k.disconnect()}catch{}try{A&&A.unsubscribe()}catch{}}},[s]),!o)return a.jsxs("div",{style:{position:"fixed",inset:0,background:"transparent",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, sans-serif"},children:[e&&a.jsx("div",{style:{position:"fixed",left:24,bottom:24,color:"#ffffff",opacity:.65,fontSize:"clamp(18px, 2.2vw, 28px)",fontWeight:700,letterSpacing:2},children:e}),a.jsx("div",{style:{background:"rgba(0,0,0,0.6)",color:"#b7ffc4",padding:"10px 16px",borderRadius:10,border:"2px solid #2ea44f",fontSize:18},children:""})]});const u=Math.abs(o.players[0].score-o.players[1].score),d=o.players[0].score>=o.players[1].score?o.players[0]:o.players[1],h=o.getRemainingPoints();o.breakScore;const m=F=>{const k=o.players[F].name,A=Array.isArray(o.settings.handicaps)?o.settings.handicaps[F]:void 0,N=!(A==null||typeof A=="string"&&A.trim()===""),R=typeof A=="number"?A:Number(A),S=isNaN(R)?String(A):R>0?`+${R}`:`${R}`;return a.jsxs("span",{style:Y(),children:[k,N&&a.jsxs("span",{style:{marginLeft:6,fontSize:"clamp(14px, 1.6vw, 22px)",fontWeight:600,color:"#cfe3cf"},children:["(",S,")"]})]})},y=typeof window<"u"?new URLSearchParams(window.location.search):null,w=((y==null?void 0:y.get("style"))||(y==null?void 0:y.get("styleVersion"))||"legacy")==="compact",j=F=>{const k=Math.max(0,Math.floor(F||0)),A=Math.floor(k/60),b=String(k%60).padStart(2,"0");return`${A}:${b}`},v={background:"#ffd700",color:"black",border:"2px solid #ffd700",borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:w?0:16,borderBottomRightRadius:w?0:16,borderBottomWidth:w?0:void 0,padding:w?"6px 16px":"8px 18px",fontWeight:700,fontSize:w?20:22,letterSpacing:.2,marginBottom:w?-2:4},f={background:"#111",color:"#f6f7f9",borderRadius:w?10:12,padding:w?"3px 8px":"6px 10px",boxSizing:"border-box",position:"relative",boxShadow:"0 1px 10px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",gap:w?3:4,width:w?"68vw":"85vw",maxWidth:w?1400:1700},p=14,_={display:"flex",alignItems:"center",justifyContent:"space-between",gap:w?8:10,position:"relative",zIndex:2,paddingLeft:p,paddingRight:p},E={position:"absolute",left:0,top:0,height:"100%",width:p,background:"#ffd700",borderTopRightRadius:6,borderBottomRightRadius:6,transition:"opacity 200ms ease",zIndex:1,opacity:0},T={position:"absolute",right:0,top:0,height:"100%",width:p,background:"#ffd700",borderTopLeftRadius:6,borderBottomLeftRadius:6,transition:"opacity 200ms ease",zIndex:1,opacity:0},P={position:"absolute",left:"50%",transform:"translateX(-50%)",display:"flex",flexDirection:"row",alignItems:"center",gap:w?10:14,minWidth:360,justifyContent:"center",zIndex:3,whiteSpace:"nowrap"},I={display:"flex",alignItems:"center",justifyContent:"space-between",padding:w?"1px 0":"2px 0"},B={marginTop:w?6:8,background:"#2a5f2a",color:"#ffffff",padding:w?"6px 12px":"8px 14px",borderRadius:12,border:"3px solid #f5d000",fontSize:w?19:21,display:"flex",alignItems:"center",justifyContent:"center",gap:w?16:20,flexWrap:"wrap",overflow:"hidden",width:w?"68vw":"85vw",maxWidth:w?1400:1700},L={display:"flex",alignItems:"baseline",gap:6,fontWeight:700,flex:"1 1 24%",minWidth:0,justifyContent:"center",whiteSpace:"nowrap"},Q={display:"flex",flexDirection:"row",alignItems:"center",gap:w?8:10,padding:w?"4px 12px":"4px 14px"},Y=F=>({fontSize:"clamp(18px, 2.2vw, 28px)",fontWeight:700,color:"#fff",letterSpacing:.2,lineHeight:1.1,display:"block",maxWidth:"100%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}),J={background:"#ffd700",color:"black",borderRadius:12,padding:w?"3px 16px":"4px 20px",fontWeight:700,fontSize:w?26:32,minWidth:w?60:72,textAlign:"center"},O={background:"#ffd700",color:"black",borderRadius:12,padding:w?"3px 10px":"3px 12px",fontWeight:600,fontSize:w?17:22,minWidth:w?44:54,textAlign:"center"};return a.jsx("div",{style:{position:"fixed",inset:0,background:"transparent",pointerEvents:"none"},children:a.jsxs("div",{style:{position:"fixed",width:1920,height:1080,left:"50%",bottom:20,transform:`translateX(-50%) scale(${c})`,transformOrigin:"bottom center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, sans-serif"},children:[a.jsx("div",{style:v,children:a.jsx("span",{style:{fontWeight:800},children:o.settings.matchName})}),a.jsxs("div",{style:f,children:[a.jsx("div",{style:{...E,opacity:o.currentPlayerIndex===0?1:0}}),a.jsx("div",{style:{...T,opacity:o.currentPlayerIndex===1?1:0}}),a.jsxs("div",{style:_,children:[a.jsx("div",{style:{...Q,width:"40%",flex:"0 0 40%",minWidth:0,paddingLeft:p+16,overflow:"hidden",boxSizing:"border-box",position:"relative",zIndex:3},children:m(0)}),a.jsxs("div",{style:P,children:[a.jsx("div",{style:J,children:o.players[0].score}),a.jsx("div",{style:O,children:o.players[0].framesWon}),a.jsxs("div",{style:{color:"#ddd",fontSize:w?20:24,fontWeight:600,whiteSpace:"nowrap",minWidth:w?40:56,textAlign:"center"},children:["(",o.settings.framesRequired,")"]}),a.jsx("div",{style:O,children:o.players[1].framesWon}),a.jsx("div",{style:J,children:o.players[1].score})]}),a.jsx("div",{style:{...Q,width:"40%",flex:"0 0 40%",justifyContent:"flex-end",minWidth:0,paddingRight:p+16,textAlign:"right",overflow:"hidden",boxSizing:"border-box",position:"relative",zIndex:3},children:m(1)})]}),a.jsx("div",{style:I,children:(o==null?void 0:o.isFreeBall)&&a.jsx("div",{style:{background:"#7c3aed",color:"#fff",padding:"4px 10px",borderRadius:12,fontWeight:800,fontSize:w?16:18,alignSelf:"center",border:"2px solid #e9d5ff"},children:"Free Ball"})})]}),a.jsxs("div",{style:B,children:[a.jsxs("div",{style:L,children:[a.jsx("span",{style:{color:"#cfe3cf",whiteSpace:"nowrap"},children:"Lead"}),a.jsxs("span",{style:{color:"#fff",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:[d.name," +",u]})]}),a.jsxs("div",{style:L,children:[a.jsx("span",{style:{color:"#cfe3cf",whiteSpace:"nowrap"},children:"Remaining"}),a.jsx("span",{style:{color:"#fff",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:h})]}),a.jsxs("div",{style:L,children:[a.jsx("span",{style:{color:"#cfe3cf",whiteSpace:"nowrap"},children:"Break"}),a.jsx("span",{style:{color:"#fff",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:o.breakScore})]}),a.jsxs("div",{style:L,children:[a.jsx("span",{style:{color:"#cfe3cf",whiteSpace:"nowrap"},children:"Break Time"}),a.jsx("span",{style:{color:"#fff",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:j(o.breakTime)})]})]})]})})},W_=()=>{var jt;const[t,e]=g.useState(""),[n,r]=g.useState(""),[s,i]=g.useState(""),[o,l]=g.useState(""),[c,u]=g.useState(""),[d,h]=g.useState(""),[m,y]=g.useState(""),[x,w]=g.useState(""),[j,v]=g.useState(!1),[f,p]=g.useState(""),[_,E]=g.useState(!1),[T,P]=g.useState(!1),[I,B]=g.useState(0),[L,Q]=g.useState(!1),[Y,J]=g.useState(null),[O,F]=g.useState(null),[k,A]=g.useState(null),[b,N]=g.useState(null),R=ir(),[S,D]=g.useState(""),[z,$]=g.useState([]),[V,X]=g.useState([]),[Z,ne]=g.useState(K),C=typeof window<"u"?new URLSearchParams(window.location.search).get("preferFallback")==="1":!1,[M,q]=g.useState(""),he=(()=>{const W=m,_e=W.length>=8,pe=/\d/.test(W),Te=/[A-Za-z]/.test(W),ue=W&&W===x;return{ok:_e&&pe&&Te&&ue,okLen:_e,hasNum:pe,hasAlpha:Te,match:ue}})();g.useEffect(()=>{let W=!1;async function _e(){try{const pe=K,Te="https://snooker-standalone-backend-production.up.railway.app";let ue;if(C)ue=await Ts(Te);else try{ue=await Ts(pe)}catch{ue=await Ts(Te)}W||$(Array.isArray(ue.regions)?ue.regions:[])}catch(pe){W||J((pe==null?void 0:pe.message)||"")}}return _e(),()=>{W=!0}},[C]),g.useEffect(()=>{let W=!1;if(!S)return X([]),()=>{W=!0};async function _e(){try{const pe=K,Te="https://snooker-standalone-backend-production.up.railway.app";let ue;if(C)ue=await Is(Te,S);else try{ue=await Is(pe,S)}catch{ue=await Is(Te,S)}if(!W){const ye=Array.isArray(ue.districts)?ue.districts:[];X(ye.map(ke=>({code3:ke.code3,name:ke.name})))}}catch(pe){W||J((pe==null?void 0:pe.message)||"")}}return _e(),()=>{W=!0}},[S,C]),g.useEffect(()=>{if(I<=0)return;const W=setInterval(()=>{B(_e=>_e<=1?0:_e-1)},1e3);return()=>clearInterval(W)},[I]);const ce=async()=>{if(!t.trim()){J(" email");return}J(null),E(!0);try{await Im(K,t.trim()),P(!0),B(60),N(" 10 "),setTimeout(()=>N(null),4e3)}catch(W){J((W==null?void 0:W.message)||"")}finally{E(!1)}},G=async W=>{W.preventDefault(),J(null),Q(!0);try{if(!he.ok)throw new Error("8");if(!f.trim())throw new Error(" email ");if(!j)throw new Error("");const _e={email:t.trim(),code:f.trim(),name:n.trim(),password:m,regionCode:S.trim(),districtCode:s.trim(),phone:o.trim()||void 0,clubName:c.trim()||void 0,birthDate:d.trim()||void 0};let pe;const Te=K,ue="https://snooker-standalone-backend-production.up.railway.app";if(C)q(`${ue}`),pe=await no(ue,_e),ne(ue);else try{q(`${Te}`),pe=await no(Te,_e),ne(Te)}catch(ye){try{q(ke=>(ke?ke+`
`:"")+`${(ye==null?void 0:ye.message)||ye}${ue}`),pe=await no(ue,_e),ne(ue)}catch(ke){throw q(Ct=>(Ct?Ct+`
`:"")+`${(ke==null?void 0:ke.message)||ke}`),ye}}F(pe.id),A(pe.memberCode||null);try{const ye=localStorage.getItem("memberPasswords"),ke=ye?JSON.parse(ye):{},Ct=new TextEncoder().encode(m),Re=await crypto.subtle.digest("SHA-256",Ct),Ye=Array.from(new Uint8Array(Re)).map(hn=>hn.toString(16).padStart(2,"0")).join("");ke[t.trim()]=Ye,localStorage.setItem("memberPasswords",JSON.stringify(ke))}catch{}}catch(_e){J(_e.message||"")}finally{Q(!1)}};return a.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:a.jsxs("div",{className:"max-w-3xl mx-auto bg-gray-800 rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xl font-bold text-yellow-400 uppercase tracking-wider",children:"Snooker Live HK"}),a.jsx("h2",{className:"text-2xl font-bold",children:""})]}),a.jsx("button",{type:"button",onClick:()=>R("/members/login"),className:"px-3 py-2 rounded bg-indigo-600 hover:bg-indigo-700 text-sm",children:""})]}),a.jsxs("form",{onSubmit:G,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),a.jsx("input",{type:"email",value:t,onChange:W=>e(W.target.value.toLowerCase()),placeholder:"example@domain.com",required:!0,className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600 lowercase"})]}),a.jsxs("div",{className:"md:col-span-2 flex gap-2 items-center",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email "}),a.jsx("input",{type:"text",value:f,onChange:W=>p(W.target.value),placeholder:" 6 ",className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600"})]}),a.jsx("button",{type:"button",onClick:ce,disabled:_||I>0,className:"mt-6 px-3 py-2 rounded bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50",children:_?"...":I>0?` (${I}s)`:T?"":""})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),a.jsx("input",{type:"text",value:n,onChange:W=>r(W.target.value),placeholder:"Chan Tai Man",required:!0,className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),a.jsxs("select",{value:S,onChange:W=>{D(W.target.value),i("")},required:!0,className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",children:[a.jsx("option",{value:"",children:""}),z.map(W=>a.jsxs("option",{value:W.code3,children:[W.code3,"  ",W.name]},W.code3))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),a.jsxs("select",{value:s,onChange:W=>i(W.target.value),required:!0,disabled:!S,className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600 disabled:opacity-50",children:[a.jsx("option",{value:"",children:S?"":""}),V.map(W=>a.jsxs("option",{value:W.code3,children:[W.code3,"  ",W.name]},W.code3))]}),s&&S&&a.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["",s,"  ",(jt=V.find(W=>W.code3===s))==null?void 0:jt.name]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),a.jsx("input",{type:"tel",value:o,onChange:W=>l(W.target.value),placeholder:"9123 4567",className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),a.jsx("input",{type:"text",value:c,onChange:W=>u(W.target.value),placeholder:"ABC Club",className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),a.jsx("input",{type:"date",value:d,onChange:W=>h(W.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),a.jsx("input",{type:"password",value:m,onChange:W=>y(W.target.value),placeholder:" 8 ",className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600"}),a.jsxs("div",{className:"text-xs mt-1",children:[a.jsx("span",{className:he.okLen?"text-green-400":"text-red-400",children:"8"}),a.jsx("span",{className:"mx-2",children:""}),a.jsx("span",{className:he.hasAlpha?"text-green-400":"text-red-400",children:""}),a.jsx("span",{className:"mx-2",children:""}),a.jsx("span",{className:he.hasNum?"text-green-400":"text-red-400",children:""})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),a.jsx("input",{type:"password",value:x,onChange:W=>w(W.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600"}),a.jsx("div",{className:`text-xs mt-1 ${he.match?"text-green-400":"text-red-400"}`,children:he.match?"":""})]}),a.jsxs("div",{className:"md:col-span-2 flex items-center mt-2",children:[a.jsx("input",{type:"checkbox",id:"terms",checked:j,onChange:W=>v(W.target.checked),className:"w-4 h-4 text-indigo-600 bg-gray-700 border-gray-600 rounded focus:ring-indigo-500 focus:ring-2"}),a.jsxs("label",{htmlFor:"terms",className:"ml-2 text-sm font-medium text-gray-300",children:["",a.jsx("span",{className:"text-blue-400 mx-1 cursor-pointer hover:underline",children:""})]})]}),a.jsx("div",{className:"md:col-span-2 flex justify-end mt-2",children:a.jsx("button",{type:"submit",disabled:L,className:"px-4 py-2 rounded bg-green-600 hover:bg-green-700 disabled:opacity-50",children:L?"...":""})})]}),Y&&a.jsx("div",{className:"text-red-400 mt-3",children:Y}),b&&a.jsx("div",{className:"text-green-400 mt-3",children:b}),M&&a.jsx("pre",{className:"mt-3 text-xs text-gray-400 whitespace-pre-wrap",children:M}),O&&a.jsxs("div",{className:"mt-4 bg-gray-700 rounded p-3",children:[a.jsxs("div",{children:["ID",O]}),k&&a.jsxs("div",{children:["",k]}),a.jsxs("div",{className:"text-xs text-gray-300 mt-1",children:["",Z]}),a.jsxs("div",{className:"mt-2 flex gap-2",children:[a.jsx("button",{onClick:()=>R(`/member/${O}`),className:"px-3 py-2 rounded bg-blue-600 hover:bg-blue-700",children:""}),a.jsx("a",{href:`mailto:${encodeURIComponent(t)}?subject=${encodeURIComponent("")}&body=${encodeURIComponent(` ${n}

${k||""}
Email${t}
${s}
${o||"-"}
${d||"-"}

`)}`,className:"px-3 py-2 rounded bg-indigo-600 hover:bg-indigo-700",children:" Email "})]})]})]})})},q_=()=>{const{id:t}=ai(),[e,n]=g.useState(!0),[r,s]=g.useState(null),[i,o]=g.useState(null),[l,c]=g.useState([]),[u,d]=g.useState(!1),[h,m]=g.useState(""),[y,x]=g.useState(""),[w,j]=g.useState(""),[v,f]=g.useState(null),[p,_]=g.useState(""),[E,T]=g.useState(""),[P,I]=g.useState(!1),B=g.useMemo(()=>{try{return JSON.parse(localStorage.getItem("memberSession")||"{}")}catch{return{}}},[]);if(g.useEffect(()=>{let O=!0;return(async()=>{s(null),n(!0);try{if(t)try{const F=await xm(K,t);O&&o(F.member??F)}catch(F){const k=decodeURIComponent(String(t));if(k.includes("@")){const A=localStorage.getItem("memberOptional")||"{}";let b={};try{b=JSON.parse(A)}catch{}const N=b[k]||{};let R,S,D;try{const z=localStorage.getItem("memberDirectory")||"{}",$=JSON.parse(z);$[k]&&(D=$[k].name,R=$[k].districtCode,S=$[k].memberCode)}catch{}if(!S||!R)try{const z=localStorage.getItem("pendingRegistrations")||"[]",V=JSON.parse(z).find(X=>String(X.email)===k);V&&(D=D||V.name,R=R||V.districtCode,S=S||V.memberCode)}catch{}O&&(o({id:k,email:k,name:D||"-",district_code:R||"-",created_at:Date.now(),member_code:S||null,optional:N}),s(null))}else throw F}else{if(!(B!=null&&B.email))throw new Error("");o({id:B.email,email:B.email,name:"-",district_code:"-",created_at:Date.now()})}}catch(F){O&&s(F.message||"")}finally{O&&n(!1)}})(),()=>{O=!1}},[t]),g.useEffect(()=>{i!=null&&i.id&&(async()=>{d(!0);try{const O=await bm(K,String(i.id));c(O.matches||[])}catch(O){console.error("Failed to load matches",O)}finally{d(!1)}})()},[i==null?void 0:i.id]),e)return a.jsx("div",{style:{padding:16},children:"..."});if(r)return a.jsx("div",{style:{padding:16,color:"red"},children:r});if(!i)return a.jsx("div",{style:{padding:16},children:""});const L=(()=>{try{const O=String(i.email||i.id||""),F=localStorage.getItem("memberOptional")||"{}";return JSON.parse(F)[O]||{}}catch{return{}}})(),Q=String((i.phone??L.phone??"")||"")||"-",Y=String((i.birthDate??L.birthDate??"")||"")||"-",J=(()=>{const O=i.membership_expires_at||i.membershipExpiresAt;if(!O)return"-";const F=new Date(O);return Number.isNaN(F.getTime())?String(O):F.toLocaleDateString()})();return a.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:a.jsxs("div",{className:"max-w-3xl mx-auto grid gap-6",children:[a.jsxs("div",{className:"bg-gray-800 rounded-xl p-4",children:[a.jsx("h2",{className:"text-xl font-bold mb-3",children:""}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:"ID"}),String(i.id||"-")]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:""}),String(i.name||"-")]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:"Email"}),String(i.email||"-")]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:""}),String(i.member_code||"")]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:""}),String(i.district_code||"")]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:""}),i.created_at?new Date(i.created_at).toLocaleString():"-"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:""}),Q]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:""}),Y]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:""}),J]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:""}),String(i.club_name||i.clubName||"")]})]}),a.jsx("div",{className:"text-xs text-gray-400 mt-2",children:""})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),a.jsx("div",{className:"mb-3",children:a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:""}),J]})}),a.jsx("button",{disabled:P||!i.id,onClick:async()=>{try{I(!0);const O=String(i.id),F=await Tm(K,"",O,3),k=F.member??F;o(A=>({...A||i,...k})),f(" 3 "),setTimeout(()=>f(null),3e3)}catch(O){f((O==null?void 0:O.message)||""),setTimeout(()=>f(null),3e3)}finally{I(!1)}},className:"px-4 py-2 rounded bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:P?"...":"+3 "})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:""}),a.jsx("input",{value:h,onChange:O=>m(O.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:""}),a.jsx("input",{type:"date",value:y,onChange:O=>x(O.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:""}),a.jsx("input",{value:w,onChange:O=>j(O.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-white"})]})]}),a.jsx("div",{className:"mt-3",children:a.jsx("button",{onClick:()=>{(async()=>{try{const F=new URLSearchParams(window.location.search).get("token")||"",k=localStorage.getItem("adminToken")||"",A=F||k;if(A){let b=i.id;if(String(b||"").includes("@"))try{const R=await Ps(K,A),S=((R==null?void 0:R.members)||[]).find(D=>String(D.email||"").trim()===String(i.email||"").trim());S&&(b=S.id)}catch{}if(b&&!String(b).includes("@")){await fu(K,A,b,{phone:h,birthDate:y,clubName:w}),f(" (Admin)"),setTimeout(()=>f(null),3e3),o(R=>({...R,phone:h,birth_date:y,club_name:w}));return}}if(i.id&&!String(i.id).includes("@"))try{await Xr(()=>Promise.resolve().then(()=>gx),void 0).then(b=>b.updateMemberSelf(K,i.id,{phone:h,birthDate:y,clubName:w})),f(""),setTimeout(()=>f(null),3e3),o(b=>({...b,phone:h,birth_date:y,club_name:w}));return}catch(b){console.warn("Self update failed, falling back to local storage",b)}}catch{}try{const O=localStorage.getItem("memberOptional"),F=O?JSON.parse(O):{},k=String(i.email||i.id);F[k]={phone:h,birthDate:y,clubName:w,updatedAt:Date.now()},localStorage.setItem("memberOptional",JSON.stringify(F)),f(""),setTimeout(()=>f(null),3e3)}catch{}})()},className:"px-4 py-2 rounded bg-green-600 hover:bg-green-700",children:""})})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:""}),a.jsx("input",{type:"password",value:p,onChange:O=>_(O.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:""}),a.jsx("input",{type:"password",value:E,onChange:O=>T(O.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-white"})]})]}),a.jsx("div",{className:"mt-3",children:a.jsx("button",{onClick:async()=>{if(!p||p!==E){f(""),setTimeout(()=>f(null),2e3);return}try{const O=new TextEncoder().encode(p),F=await crypto.subtle.digest("SHA-256",O),A=Array.from(new Uint8Array(F)).map(S=>S.toString(16).padStart(2,"0")).join(""),b=localStorage.getItem("memberPasswords"),N=b?JSON.parse(b):{},R=String(i.email||i.id);N[R]=A,localStorage.setItem("memberPasswords",JSON.stringify(N)),f(""),setTimeout(()=>f(null),3e3)}catch{}},className:"px-4 py-2 rounded bg-indigo-600 hover:bg-indigo-700",children:""})})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),u?a.jsx("div",{children:"..."}):l.length===0?a.jsx("div",{className:"text-gray-400 text-sm",children:""}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm text-left whitespace-nowrap",children:[a.jsx("thead",{className:"text-gray-400 border-b border-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-2 px-2",children:""}),a.jsx("th",{className:"py-2 px-2",children:""}),a.jsx("th",{className:"py-2 px-2",children:""}),a.jsx("th",{className:"py-2 px-2",children:""}),a.jsx("th",{className:"py-2 px-2",children:""}),a.jsx("th",{className:"py-2 px-2",children:""}),a.jsx("th",{className:"py-2 px-2",children:""}),a.jsx("th",{className:"py-2 px-2",children:""})]})}),a.jsx("tbody",{children:l.map(O=>{var N,R,S,D;if(!O.players||!Array.isArray(O.players))return null;const F=O.players.find(z=>{var $,V;return(($=z.member)==null?void 0:$.id)===i.id||((V=z.member)==null?void 0:V.name)===i.name})||O.players[0];if(!F)return null;const k=O.players.find(z=>z.id!==F.id),A=O.winner_member_id===((N=F.member)==null?void 0:N.id),b=O.started_at&&O.ended_at?Math.round((new Date(O.ended_at).getTime()-new Date(O.started_at).getTime())/6e4)+" ":"-";return a.jsxs("tr",{className:"border-b border-gray-700 hover:bg-gray-750",children:[a.jsxs("td",{className:"py-2 px-2",children:[new Date(O.started_at).toLocaleDateString(),a.jsx("br",{}),a.jsx("span",{className:"text-xs text-gray-400",children:new Date(O.started_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),a.jsxs("td",{className:"py-2 px-2",children:[a.jsx("div",{className:"font-medium",children:O.name}),a.jsxs("div",{className:"text-xs text-gray-400",children:[": ",O.frames_required,(O.handicap0>0||O.handicap1>0)&&` | : ${O.handicap0}/${O.handicap1}`]})]}),a.jsxs("td",{className:"py-2 px-2",children:[((R=O.operator)==null?void 0:R.name)||"-",a.jsx("br",{}),a.jsx("span",{className:"text-xs text-gray-400",children:((S=O.operator)==null?void 0:S.club_name)||"-"})]}),a.jsxs("td",{className:"py-2 px-2 font-bold",children:[F.frames_won," - ",(k==null?void 0:k.frames_won)||0]}),a.jsxs("td",{className:"py-2 px-2",children:[((D=k==null?void 0:k.member)==null?void 0:D.name)||"-",a.jsx("br",{})]}),a.jsx("td",{className:"py-2 px-2",children:a.jsx("span",{className:A?"text-green-400":"text-red-400",children:A?"":""})}),a.jsx("td",{className:"py-2 px-2",children:F.max_break_points}),a.jsx("td",{className:"py-2 px-2",children:b})]},O.id)})})]})})]}),v&&a.jsx("div",{className:"text-green-400",children:v})]})})},H_=()=>{const[t,e]=g.useState([]),[n,r]=g.useState(!0),[s,i]=g.useState(null),[o,l]=g.useState([]),[c,u]=g.useState([]),[d,h]=g.useState({}),[m,y]=g.useState(null),[x,w]=g.useState(""),[j,v]=g.useState(""),[f,p]=g.useState(""),[_,E]=g.useState(""),[T,P]=g.useState(""),[I,B]=g.useState(""),L=g.useMemo(()=>f?c.filter(k=>String(k.region_code||"").toUpperCase()===String(f).toUpperCase()||String(k.regionCode||"").toUpperCase()===String(f).toUpperCase()).sort((k,A)=>String(k.code3||"").localeCompare(String(A.code3||""))):[],[c,f]),Q=g.useMemo(()=>t.filter(k=>{if(x&&!String(k.name||"").toLowerCase().includes(x.toLowerCase())||j&&!String(k.email||"").toLowerCase().includes(j.toLowerCase())||T&&!String(k.member_code||"").toLowerCase().includes(T.toLowerCase())||I&&String(k.role||"MEMBER")!==I)return!1;const A=String(k.district_code||k.partition||"").trim();return!(f&&(!A||!c.filter(R=>String(R.region_code||"").toUpperCase()===String(f).toUpperCase()||String(R.regionCode||"").toUpperCase()===String(f).toUpperCase()).find(R=>String(R.code3||"").toUpperCase()===A.toUpperCase()||R.name===A)&&!A.toUpperCase().startsWith(f.toUpperCase()))||_&&A!==_)}),[t,x,j,f,_,T,I,c]);g.useEffect(()=>{E("")},[f]),g.useEffect(()=>{let k=!0;return(async()=>{i(null),r(!0);try{const b=new URLSearchParams(window.location.search).get("token")||"",N=localStorage.getItem("adminToken")||"",R=b||N;if(b&&localStorage.setItem("adminToken",b),!R)throw new Error("");const[S,D,z]=await Promise.all([Ps(K,R),pu(K,R).catch(()=>({regions:[]})),mu(K,R).catch(()=>({districts:[]}))]);k&&(e(S.members||[]),l(D.regions||[]),u(z.districts||[]))}catch(A){k&&i(A.message||"")}finally{k&&r(!1)}})(),()=>{k=!1}},[]),g.useMemo(()=>({}),[]);function Y(k){h(A=>({...A,[k.id]:{...k}}))}function J(k){h(A=>{const b={...A};return delete b[k],b})}async function O(k){const b=new URLSearchParams(window.location.search).get("token")||"",N=localStorage.getItem("adminToken")||"",R=b||N,S=d[k];if(!S)return;const D={name:S.name,email:S.email,district_code:S.district_code,member_code:S.member_code,phone:S.phone,birthDate:S.birthDate,role:S.role,membershipExpiresAt:S.membership_expires_at||S.membershipExpiresAt};if(!R){i("");return}await fu(K,R,k,D);try{const z=await Ps(K,R);e(z.members||[])}catch{}J(k)}async function F(k){const A=k.id,N=new URLSearchParams(window.location.search).get("token")||"",R=localStorage.getItem("adminToken")||"",S=N||R;try{if(!S){i("");return}if(m!==A){y(A);return}const D=String(k.member_code||"").trim(),$=String(k.name||"").trim()||D||A;if(!window.confirm(`${$}`))return;await Cm(K,S,A);try{const X=await Ps(K,S);e(X.members||[])}catch{}y(null)}catch(D){console.error("Failed to delete member",D),i((D==null?void 0:D.message)||""),y(null)}}return a.jsxs("div",{style:{maxWidth:840,margin:"40px auto",padding:16},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[a.jsx("h2",{children:""}),a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx(Ot,{to:"/members/register",style:{padding:"6px 10px",borderRadius:6,background:"#6b7280",color:"#fff",textDecoration:"none"},children:""}),a.jsx("button",{onClick:()=>{const k=localStorage.getItem("adminToken")||"",A=`${window.location.origin}/admin?apiUrl=${encodeURIComponent(K)}&socketUrl=${encodeURIComponent($t)}&socketPath=${encodeURIComponent(tr)}${k?`&token=${encodeURIComponent(k)}`:""}&v=admin`;window.location.href=A},style:{padding:"6px 10px",borderRadius:6,background:"#2563eb",color:"#fff",border:"none"},children:"Admin Panel"})]})]}),n&&a.jsx("div",{children:"..."}),s&&a.jsx("div",{style:{color:"red"},children:s}),!n&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:a.jsx("div",{style:{fontSize:13,color:"#666"},children:s?"":""})}),a.jsxs("div",{style:{background:"#f9fafb",padding:12,borderRadius:8,marginBottom:16,border:"1px solid #e5e7eb"},children:[a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:12,alignItems:"center"},children:[a.jsx("input",{placeholder:"",value:x,onChange:k=>w(k.target.value),style:{padding:"6px 10px",borderRadius:4,border:"1px solid #d1d5db",fontSize:14}}),a.jsx("input",{placeholder:"Email",value:j,onChange:k=>v(k.target.value),style:{padding:"6px 10px",borderRadius:4,border:"1px solid #d1d5db",fontSize:14}}),a.jsxs("select",{value:f,onChange:k=>p(k.target.value),style:{padding:"6px 10px",borderRadius:4,border:"1px solid #d1d5db",fontSize:14,minWidth:120},children:[a.jsx("option",{value:"",children:""}),o.map(k=>a.jsxs("option",{value:k.code3,children:[k.name," (",k.code3,")"]},k.code3))]}),a.jsxs("select",{value:_,onChange:k=>E(k.target.value),disabled:!f,style:{padding:"6px 10px",borderRadius:4,border:"1px solid #d1d5db",fontSize:14,minWidth:120,opacity:f?1:.6},children:[a.jsx("option",{value:"",children:""}),L.map(k=>a.jsxs("option",{value:k.code3,children:[k.name," (",k.code3,")"]},k.code3))]}),a.jsx("input",{placeholder:"",value:T,onChange:k=>P(k.target.value),style:{padding:"6px 10px",borderRadius:4,border:"1px solid #d1d5db",fontSize:14}}),a.jsxs("select",{value:I,onChange:k=>B(k.target.value),style:{padding:"6px 10px",borderRadius:4,border:"1px solid #d1d5db",fontSize:14},children:[a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"MEMBER",children:""}),a.jsx("option",{value:"ADMIN",children:""})]}),a.jsx("button",{onClick:()=>{w(""),v(""),p(""),E(""),P(""),B("")},style:{padding:"6px 12px",borderRadius:4,background:"#e5e7eb",color:"#374151",border:"none",cursor:"pointer",fontSize:14},children:""})]}),a.jsxs("div",{style:{marginTop:10,fontSize:13,color:"#4b5563"},children:["",a.jsx("span",{style:{fontWeight:"bold",color:"#111827"},children:Q.length})," / ",t.length," "]})]}),a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:8},children:"ID"}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:8},children:""}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:8},children:"Email"}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:8},children:""}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:8},children:""}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:8},children:""}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:8},children:""}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:8},children:""}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:8},children:""}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:8},children:""})]})}),a.jsx("tbody",{children:Q.map(k=>a.jsxs(Ph.Fragment,{children:[a.jsx("tr",{children:a.jsx("td",{colSpan:10,style:{borderBottom:"1px solid #eee",padding:6},children:d[k.id]?a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("button",{onClick:()=>O(k.id),style:{padding:"4px 8px",borderRadius:6,background:"#16a34a",color:"#fff",border:"none"},children:""}),a.jsx("button",{onClick:()=>J(k.id),style:{padding:"4px 8px",borderRadius:6,background:"#6b7280",color:"#fff",border:"none"},children:""})]}):a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("button",{onClick:()=>Y(k),style:{padding:"4px 8px",borderRadius:6,background:"#2563eb",color:"#fff",border:"none"},children:""}),a.jsx("button",{onClick:()=>F(k),style:{padding:"4px 8px",borderRadius:6,background:"#dc2626",color:"#fff",border:"none"},children:m===k.id?"":""})]})})}),a.jsxs("tr",{children:[a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:k.id}),a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:d[k.id]?a.jsx("input",{value:d[k.id].name||"",onChange:A=>h(b=>({...b,[k.id]:{...b[k.id]||k,name:A.target.value}})),style:{width:"100%"}}):k.name}),a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:d[k.id]?a.jsx("input",{value:d[k.id].email||"",onChange:A=>h(b=>({...b,[k.id]:{...b[k.id]||k,email:A.target.value}})),style:{width:"100%"}}):k.email||"-"}),a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:d[k.id]?a.jsx("input",{value:d[k.id].district_code||"",onChange:A=>h(b=>({...b,[k.id]:{...b[k.id]||k,district_code:A.target.value}})),style:{width:"100%"}}):k.district_code??k.partition??"-"}),a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:d[k.id]?a.jsx("input",{value:d[k.id].member_code||"",onChange:A=>h(b=>({...b,[k.id]:{...b[k.id]||k,member_code:A.target.value}})),style:{width:"100%"}}):k.member_code||"-"}),a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:d[k.id]?a.jsxs("select",{value:d[k.id].role||k.role||"MEMBER",onChange:A=>h(b=>({...b,[k.id]:{...b[k.id]||k,role:A.target.value}})),style:{width:"100%"},children:[a.jsx("option",{value:"MEMBER",children:""}),a.jsx("option",{value:"ADMIN",children:""})]}):k.role==="ADMIN"?"":""}),a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:d[k.id]?a.jsx("input",{value:d[k.id].phone||"",onChange:A=>h(b=>({...b,[k.id]:{...b[k.id]||k,phone:A.target.value}})),style:{width:"100%"}}):k.phone??"-"}),a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:d[k.id]?a.jsx("input",{value:d[k.id].birthDate||"",onChange:A=>h(b=>({...b,[k.id]:{...b[k.id]||k,birthDate:A.target.value}})),style:{width:"100%"}}):k.birthDate??k.birth_date??"-"}),a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:d[k.id]?a.jsx("input",{type:"date",value:d[k.id].membershipExpiresAt||d[k.id].membership_expires_at||(k.membership_expires_at?new Date(k.membership_expires_at).toISOString().slice(0,10):""),onChange:A=>h(b=>({...b,[k.id]:{...b[k.id]||k,membershipExpiresAt:A.target.value}})),style:{width:"100%"}}):k.membership_expires_at?new Date(k.membership_expires_at).toLocaleDateString():"-"}),a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:k.created_at?new Date(k.created_at).toLocaleString():"-"})]},k.id)]},k.id))})]})]})]})},V_=()=>{const[t,e]=g.useState([]),[n,r]=g.useState(!0),[s,i]=g.useState(null),[o,l]=g.useState(""),[c,u]=g.useState(0),[d,h]=g.useState(1),[m]=g.useState(50);function y(){const _=new URLSearchParams(window.location.search).get("token")||"",E=typeof window<"u"&&localStorage.getItem("adminToken")||"",T=_||E;return _&&typeof window<"u"&&localStorage.setItem("adminToken",_),T}async function x(p,_){i(null),r(!0);try{const E=y();if(!E)throw new Error("");const T=await Rm(K,E,{memberId:_&&_.trim()||void 0,page:p,pageSize:m});e(T.matches||[]),u(Number(T.total||0)),h(Number(T.page||p))}catch(E){i(E.message||"")}finally{r(!1)}}g.useEffect(()=>{x(1)},[]);function w(p){if(!p)return"-";try{return new Date(p).toLocaleString()}catch{return p}}function j(p){return!Array.isArray(p.players)||p.players.length===0?"-":p.players.map(_=>{var B,L;const E=((B=_.member)==null?void 0:B.name)||"-",T=((L=_.member)==null?void 0:L.member_code)||"",P=_.member_id,I=[E];return T&&I.push(`(${T})`),I.push(`[${P}]`),I.join(" ")}).join(" / ")}function v(p){if(!p.winner_member_id)return"-";const _=p.winner_member;if(!_)return p.winner_member_id;const E=[_.name||"-"];return _.member_code&&E.push(`(${_.member_code})`),E.push(`[${_.id}]`),E.join(" ")}const f=Math.max(1,Math.ceil(c/m));return a.jsxs("div",{style:{maxWidth:1e3,margin:"40px auto",padding:16},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[a.jsx("h2",{style:{margin:0},children:""}),a.jsx("div",{style:{display:"flex",gap:8},children:a.jsx("button",{onClick:()=>{const p=localStorage.getItem("adminToken")||"",_=`${window.location.origin}/admin?apiUrl=${encodeURIComponent(K)}&socketUrl=${encodeURIComponent($t)}&socketPath=${encodeURIComponent(tr)}${p?`&token=${encodeURIComponent(p)}`:""}&v=admin`;window.location.href=_},style:{padding:"6px 10px",borderRadius:6,background:"#2563eb",color:"#fff",border:"none"},children:"Admin Panel"})})]}),s&&a.jsx("div",{style:{color:"red",marginBottom:8},children:s}),a.jsxs("div",{style:{marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[a.jsxs("label",{style:{fontSize:14},children:["Member ID",a.jsx("input",{value:o,onChange:p=>l(p.target.value),style:{marginLeft:4,padding:4,borderRadius:4,border:"1px solid #ccc",minWidth:200},placeholder:" Member ID "})]}),a.jsx("button",{onClick:()=>x(1,o),style:{padding:"6px 10px",borderRadius:6,background:"#16a34a",color:"#fff",border:"none"},children:""}),o&&a.jsx("button",{onClick:()=>{l(""),x(1)},style:{padding:"6px 10px",borderRadius:6,background:"#6b7280",color:"#fff",border:"none"},children:""}),a.jsxs("div",{style:{marginLeft:"auto",fontSize:13,color:"#444"},children:[" ",c,"  ID = ROOM_ID / MATCH_ID"]})]}),n&&a.jsx("div",{children:"..."}),!n&&a.jsxs(a.Fragment,{children:[a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:6},children:"Match ID / ROOM_ID"}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:6},children:""}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:6},children:"Match Code"}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:6},children:"Frames"}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:6},children:"Red Balls"}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:6},children:""}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:6},children:""}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:6},children:""}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:6},children:""})]})}),a.jsxs("tbody",{children:[t.map(p=>a.jsxs("tr",{children:[a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:p.room_id}),a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:p.name}),a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:p.match_code||"-"}),a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:p.frames_required}),a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:p.red_balls}),a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:j(p)}),a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:v(p)}),a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:w(p.started_at)}),a.jsx("td",{style:{borderBottom:"1px solid #eee",padding:6},children:w(p.ended_at)})]},p.id)),t.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:9,style:{padding:10,textAlign:"center",color:"#666"},children:""})})]})]}),a.jsxs("div",{style:{marginTop:12,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{style:{fontSize:13,color:"#444"},children:[" ",d," / ",f," "]}),a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("button",{onClick:()=>d>1&&x(d-1,o),disabled:d<=1,style:{padding:"4px 8px",borderRadius:4,border:"1px solid #ccc",background:d<=1?"#e5e7eb":"#fff",cursor:d<=1?"default":"pointer"},children:""}),a.jsx("button",{onClick:()=>d<f&&x(d+1,o),disabled:d>=f,style:{padding:"4px 8px",borderRadius:4,border:"1px solid #ccc",background:d>=f?"#e5e7eb":"#fff",cursor:d>=f?"default":"pointer"},children:""})]})]})]})]})},K_=()=>{const[t,e]=g.useState(""),[n,r]=g.useState([]),[s,i]=g.useState([]),[o,l]=g.useState(!0),[c,u]=g.useState(null),[d,h]=g.useState(""),[m,y]=g.useState(""),[x,w]=g.useState(!0),[j,v]=g.useState(""),[f,p]=g.useState(""),[_,E]=g.useState(""),[T,P]=g.useState(!0),[I,B]=g.useState(""),[L,Q]=g.useState(null),[Y,J]=g.useState(null),[O,F]=g.useState(null);function k(){const D=new URLSearchParams(window.location.search).get("token")||"",z=typeof window<"u"&&localStorage.getItem("adminToken")||"",$=D||z||t;return D&&typeof window<"u"&&localStorage.setItem("adminToken",D),$}g.useEffect(()=>{let S=!0;return(async()=>{u(null),l(!0);try{const D=k();if(!D)throw new Error("");let z,$;try{z=await pu(K,D),$=await mu(K,D)}catch{const V=await Ts(K),X=await Is(K);z={regions:(V.regions||[]).map(Z=>({...Z,active:!0}))},$={districts:(X.districts||[]).map(Z=>({region_code:Z.regionCode||Z.region_code||"",code3:Z.code3,name:Z.name,active:!0}))},u(" API")}if(!S)return;e(D),r(z.regions||[]),i($.districts||[])}catch(D){S&&u(D.message||"")}finally{S&&l(!1)}})(),()=>{S=!1}},[]);const A=async S=>{S.preventDefault(),u(null);const D=k(),z=d.trim().toUpperCase(),$=m.trim();if(!D){u("");return}if(!z||!$){u("");return}const V=n.some(Z=>String(Z.code3||"").toUpperCase()===z),X=(L||"").toUpperCase()===z&&!!L;if(V&&!X){u("");return}try{const Z=await Pm(K,D,{code3:z,name:$,active:x}),ne=Z.region||Z;r(C=>{const M=Array.isArray(C)?[...C]:[],q=M.findIndex(he=>String(he.code3).toUpperCase()===String(ne.code3).toUpperCase());return q>=0?M[q]={...M[q],...ne}:M.push(ne),M.sort((he,ce)=>String(he.code3).localeCompare(String(ce.code3)))}),h(ne.code3||z),y(ne.name||$),w(typeof ne.active=="boolean"?ne.active:x),Q(ne.code3||z)}catch{u(" API ")}},b=async S=>{S.preventDefault(),u(null);const D=k(),z=j.trim().toUpperCase(),$=f.trim().toUpperCase(),V=_.trim();if(!D){u("");return}if(!z||!$||!V){u("");return}const X=`${z}::${$}`,Z=s.some(C=>`${String(C.region_code||"").toUpperCase()}::${String(C.code3||"").toUpperCase()}`===X),ne=(Y||"").toUpperCase()===X&&!!Y;if(Z&&!ne){u("");return}try{const C=await Em(K,D,{regionCode:z,code3:$,name:V,active:T}),M=C.district||C;i(q=>{const he=Array.isArray(q)?[...q]:[],ce=he.findIndex(G=>String(G.region_code).toUpperCase()===String(M.region_code).toUpperCase()&&String(G.code3).toUpperCase()===String(M.code3).toUpperCase());return ce>=0?he[ce]={...he[ce],...M}:he.push(M),he.sort((G,jt)=>{const W=String(G.region_code||"").localeCompare(String(jt.region_code||""));return W!==0?W:String(G.code3||"").localeCompare(String(jt.code3||""))})}),v(M.region_code||z),p(M.code3||$),E(M.name||V),P(typeof M.active=="boolean"?M.active:T),J(X)}catch{u(" API ")}},N=s.filter(S=>I?String(S.region_code||"").toUpperCase()===I.toUpperCase():!0),R=async S=>{const D=String(S.region_code||"").trim().toUpperCase(),z=String(S.code3||"").trim().toUpperCase();if(!D||!z)return;const $=`${D}::${z}`,V=k();if(!V){u("");return}if(O!==$){F($);return}const X=`${D}-${z}`;if(!window.confirm(`${X}`)){F(null);return}try{await Nm(K,V,D,z),i(ne=>ne.filter(C=>!(String(C.region_code||"").toUpperCase()===D&&String(C.code3||"").toUpperCase()===z))),Y===$&&(J(null),v(""),p(""),E(""),P(!0)),F(null)}catch(ne){u((ne==null?void 0:ne.message)||""),F(null)}};return a.jsxs("div",{style:{maxWidth:840,margin:"40px auto",padding:16},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[a.jsx("h2",{style:{margin:0},children:" / "}),a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx(Ot,{to:"/members/register",style:{padding:"6px 12px",backgroundColor:"#6b7280",color:"white",borderRadius:"4px",textDecoration:"none",fontSize:"14px"},children:""}),a.jsx(Ot,{to:`/admin/members${t?`?token=${t}`:""}`,style:{padding:"6px 12px",backgroundColor:"#4b5563",color:"white",borderRadius:"4px",textDecoration:"none",fontSize:"14px"},children:""})]})]}),c&&a.jsx("div",{style:{color:"red",marginBottom:8},children:c}),o&&a.jsx("div",{children:"..."}),!o&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{marginBottom:24,padding:12,border:"1px solid #ddd",borderRadius:8},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:8},children:""}),a.jsxs("form",{onSubmit:A,style:{display:"flex",alignItems:"center",gap:8,marginBottom:12,flexWrap:"wrap"},children:[a.jsxs("label",{children:[a.jsx("span",{style:{fontSize:13},children:""}),a.jsx("input",{value:d,onChange:S=>h(S.target.value),style:{marginLeft:4,padding:4,borderRadius:4,border:"1px solid #ccc",width:80},disabled:!!L,placeholder:"NTW"})]}),a.jsxs("label",{children:[a.jsx("span",{style:{fontSize:13},children:""}),a.jsx("input",{value:m,onChange:S=>y(S.target.value),style:{marginLeft:4,padding:4,borderRadius:4,border:"1px solid #ccc",minWidth:160},placeholder:""})]}),a.jsxs("label",{style:{display:"flex",alignItems:"center",fontSize:13},children:[a.jsx("input",{type:"checkbox",checked:x,onChange:S=>w(S.target.checked),style:{marginRight:4},disabled:!!L}),""]}),L&&a.jsx("span",{style:{fontSize:12,color:"#6b7280"},children:""}),L&&a.jsx("button",{type:"button",onClick:()=>{Q(null),h(""),y(""),w(!0)},style:{padding:"6px 12px",borderRadius:4,border:"1px solid #ddd",background:"#fff",color:"#374151"},children:""}),a.jsx("button",{type:"submit",style:{padding:"6px 12px",borderRadius:4,border:"none",background:"#2563eb",color:"#fff"},children:""})]}),a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:6},children:""}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:6},children:""}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:6},children:""})]})}),a.jsxs("tbody",{children:[n.map(S=>a.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[a.jsx("td",{style:{padding:6},children:a.jsx("button",{type:"button",onClick:()=>{h(S.code3||""),y(S.name||""),w(typeof S.active=="boolean"?S.active:!0),Q(String(S.code3||"").toUpperCase())},style:{background:"transparent",border:"none",padding:0,color:"#2563eb",cursor:"pointer"},children:S.code3})}),a.jsx("td",{style:{padding:6},children:S.name}),a.jsx("td",{style:{padding:6},children:S.active?"":""})]},S.code3)),n.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:3,style:{padding:6,color:"#666"},children:""})})]})]})]}),a.jsxs("div",{style:{padding:12,border:"1px solid #ddd",borderRadius:8},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:8},children:""}),a.jsxs("form",{onSubmit:b,style:{display:"flex",alignItems:"center",gap:8,marginBottom:12,flexWrap:"wrap"},children:[a.jsxs("label",{children:[a.jsx("span",{style:{fontSize:13},children:""}),a.jsxs("select",{value:j,onChange:S=>v(S.target.value),style:{marginLeft:4,padding:4,borderRadius:4,border:"1px solid #ccc",minWidth:100},disabled:!!Y,children:[a.jsx("option",{value:"",children:""}),n.map(S=>a.jsxs("option",{value:S.code3,children:[S.code3,"  ",S.name]},S.code3))]})]}),a.jsxs("label",{children:[a.jsx("span",{style:{fontSize:13},children:""}),a.jsx("input",{value:f,onChange:S=>p(S.target.value),style:{marginLeft:4,padding:4,borderRadius:4,border:"1px solid #ccc",width:80},disabled:!!Y,placeholder:"YK"})]}),a.jsxs("label",{children:[a.jsx("span",{style:{fontSize:13},children:""}),a.jsx("input",{value:_,onChange:S=>E(S.target.value),style:{marginLeft:4,padding:4,borderRadius:4,border:"1px solid #ccc",minWidth:160},placeholder:""})]}),a.jsxs("label",{style:{display:"flex",alignItems:"center",fontSize:13},children:[a.jsx("input",{type:"checkbox",checked:T,onChange:S=>P(S.target.checked),style:{marginRight:4},disabled:!!Y}),""]}),Y&&a.jsx("span",{style:{fontSize:12,color:"#6b7280"},children:""}),Y&&a.jsx("button",{type:"button",onClick:()=>{J(null),v(""),p(""),E(""),P(!0)},style:{padding:"6px 12px",borderRadius:4,border:"1px solid #ddd",background:"#fff",color:"#374151"},children:""}),a.jsx("button",{type:"submit",style:{padding:"6px 12px",borderRadius:4,border:"none",background:"#16a34a",color:"#fff"},children:""})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[a.jsx("span",{style:{fontSize:13},children:""}),a.jsxs("select",{value:I,onChange:S=>B(S.target.value),style:{padding:4,borderRadius:4,border:"1px solid #ccc",minWidth:120},children:[a.jsx("option",{value:"",children:""}),n.map(S=>a.jsxs("option",{value:S.code3,children:[S.code3,"  ",S.name]},S.code3))]})]}),a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:6},children:""}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:6},children:""}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:6},children:""}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:6},children:""}),a.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:6},children:""})]})}),a.jsxs("tbody",{children:[N.map(S=>a.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[a.jsx("td",{style:{padding:6},children:S.region_code}),a.jsx("td",{style:{padding:6},children:a.jsx("button",{type:"button",onClick:()=>{v(S.region_code||""),p(S.code3||""),E(S.name||""),P(typeof S.active=="boolean"?S.active:!0),J(`${String(S.region_code||"").toUpperCase()}::${String(S.code3||"").toUpperCase()}`)},style:{background:"transparent",border:"none",padding:0,color:"#2563eb",cursor:"pointer"},children:S.code3})}),a.jsx("td",{style:{padding:6},children:S.name}),a.jsx("td",{style:{padding:6},children:S.active?"":""}),a.jsx("td",{style:{padding:6},children:a.jsx("button",{type:"button",onClick:()=>R(S),style:{padding:"4px 8px",borderRadius:4,border:"none",background:"#dc2626",color:"#fff",fontSize:12,cursor:"pointer"},children:O===`${String(S.region_code||"").toUpperCase()}::${String(S.code3||"").toUpperCase()}`?"":""})})]},`${S.region_code}-${S.code3}`)),N.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,style:{padding:6,color:"#666"},children:""})})]})]})]})]})]})},vh=({mode:t="member"})=>{const[e,n]=g.useState("login"),[r,s]=g.useState(""),[i,o]=g.useState(""),[l,c]=g.useState(""),[u,d]=g.useState(""),[h,m]=g.useState(""),[y,x]=g.useState(!1),[w,j]=g.useState(null),[v,f]=g.useState(null),p=ir(),_=async P=>{var I,B;P.preventDefault(),j(null),x(!0);try{const L=await wm(K,{email:r.trim().toLowerCase(),password:i}),Q=(L==null?void 0:L.id)||((I=L==null?void 0:L.member)==null?void 0:I.id),Y=(L==null?void 0:L.role)||((B=L==null?void 0:L.member)==null?void 0:B.role);if(!Q)throw new Error("");localStorage.setItem("memberSession",JSON.stringify({email:r.trim().toLowerCase(),id:Q,role:Y})),p(t==="operator"?"/operator/dashboard":`/member/${Q}`)}catch(L){j(L.message||"")}finally{x(!1)}},E=async P=>{P.preventDefault(),j(null),x(!0);try{await _m(K,r.trim().toLowerCase()),n("forgot-reset"),f(" Email")}catch(I){j(I.message||"")}finally{x(!1)}},T=async P=>{if(P.preventDefault(),j(null),f(null),u!==h){j("");return}x(!0);try{await km(K,{email:r.trim().toLowerCase(),code:l.trim(),newPassword:u}),n("login"),f(""),o(""),c(""),d(""),m("")}catch(I){j(I.message||"")}finally{x(!1)}};return a.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-6 flex items-center justify-center",children:a.jsxs("div",{className:"w-full max-w-md bg-gray-800 rounded-xl p-6 shadow-lg",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"text-xl font-bold text-yellow-400 uppercase tracking-wider",children:"Snooker Live HK"}),a.jsxs("h2",{className:"text-2xl font-bold mt-1",children:[e==="login"&&(t==="operator"?"":""),e==="forgot-request"&&"",e==="forgot-reset"&&""]})]}),e==="login"&&a.jsxs("form",{onSubmit:_,className:"grid gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),a.jsx("input",{type:"email",value:r,onChange:P=>s(P.target.value.toLowerCase()),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600 lowercase",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),a.jsx("input",{type:"password",value:i,onChange:P=>o(P.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",required:!0})]}),a.jsx("button",{type:"submit",disabled:y,className:"px-4 py-2 rounded bg-green-600 hover:bg-green-700 disabled:opacity-50 font-bold",children:y?"...":""}),a.jsxs("div",{className:"flex justify-between mt-2 text-sm text-gray-400",children:[a.jsx("button",{type:"button",onClick:()=>{n("forgot-request"),j(null),f(null)},className:"hover:text-white underline",children:""}),a.jsx("button",{type:"button",onClick:()=>p("/members/register"),className:"hover:text-white underline",children:""})]})]}),e==="forgot-request"&&a.jsxs("form",{onSubmit:E,className:"grid gap-4",children:[a.jsx("p",{className:"text-sm text-gray-300",children:" Email"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),a.jsx("input",{type:"email",value:r,onChange:P=>s(P.target.value.toLowerCase()),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600 lowercase",required:!0})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{n("login"),j(null),f(null)},className:"flex-1 px-4 py-2 rounded bg-gray-600 hover:bg-gray-700",children:""}),a.jsx("button",{type:"submit",disabled:y,className:"flex-1 px-4 py-2 rounded bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50",children:y?"...":""})]})]}),e==="forgot-reset"&&a.jsxs("form",{onSubmit:T,className:"grid gap-4",children:[a.jsxs("div",{className:"bg-gray-700 p-3 rounded text-sm mb-2",children:[" ",a.jsx("span",{className:"text-yellow-400 font-mono",children:r})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),a.jsx("input",{type:"text",value:l,onChange:P=>c(P.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",placeholder:"6",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),a.jsx("input",{type:"password",value:u,onChange:P=>d(P.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",placeholder:"8",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),a.jsx("input",{type:"password",value:h,onChange:P=>m(P.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",required:!0})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:()=>n("forgot-request"),className:"flex-1 px-4 py-2 rounded bg-gray-600 hover:bg-gray-700",children:""}),a.jsx("button",{type:"submit",disabled:y,className:"flex-1 px-4 py-2 rounded bg-green-600 hover:bg-green-700 disabled:opacity-50",children:y?"...":""})]})]}),w&&a.jsx("div",{className:"text-red-400 mt-4 text-center p-2 bg-red-900/30 rounded border border-red-800/50",children:w}),v&&a.jsx("div",{className:"text-green-400 mt-4 text-center p-2 bg-green-900/30 rounded border border-green-800/50",children:v})]})})},J_=()=>{const t=ir(),[e,n]=g.useState(!0),[r,s]=g.useState(!1),[i,o]=g.useState(null),[l,c]=g.useState(null),[u,d]=g.useState([]),[h,m]=g.useState([]),y=g.useMemo(()=>{try{return JSON.parse(localStorage.getItem("memberSession")||"{}")}catch{return{}}},[]),[x,w]=g.useState(y.phone||""),[j,v]=g.useState(y.birthDate||y.birth_date?new Date(y.birthDate||y.birth_date).toISOString().split("T")[0]:""),[f,p]=g.useState(y.clubName||y.club_name||""),[_,E]=g.useState(""),[T,P]=g.useState(""),[I,B]=g.useState(null),L=y.id,Q=y.name||y.email,Y="/".replace(/\/+$/,""),J=`${window.location.origin}${Y}`;g.useEffect(()=>{if(!L){t("/operator/login");return}O()},[L,t]);const O=async()=>{try{n(!0);const[b,N]=await Promise.all([jm(K,L),to(K,L)]);d(b.matches||[]),m(N.rooms||[])}catch(b){c(b.message||"")}finally{n(!1)}},F=async()=>{if(!r){s(!0),c(null);try{await Sm(K,L);const b=await to(K,L);m(b.rooms||[])}catch(b){c(b.message||"")}finally{s(!1)}}},k=async b=>{if(!i&&window.confirm("")){o(b);try{await mm(K,b),B(""),setTimeout(()=>B(null),2e3);const N=await to(K,L);m(N.rooms||[])}catch(N){c(N.message||"")}finally{o(null)}}},A=b=>{const N=`?enableSocket=1&socketUrl=${encodeURIComponent($t)}&apiUrl=${encodeURIComponent(K)}`,R=`${J}${b}${N}`;navigator.clipboard.writeText(R).then(()=>{alert(`
${R}`)})};return L?a.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto grid gap-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Snooker Live HK - "}),a.jsx("button",{onClick:()=>{localStorage.removeItem("memberSession"),t("/members/login")},className:"px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-white transition-colors",children:""})]}),l&&a.jsx("div",{className:"bg-red-900 text-red-200 p-3 rounded-lg",children:l}),I&&a.jsx("div",{className:"fixed bottom-4 right-4 bg-green-600 text-white px-4 py-2 rounded shadow-lg z-50",children:I}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-lg",children:[a.jsx("h2",{className:"text-xl font-bold mb-4 border-b border-gray-700 pb-2",children:""}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:""}),Q]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Email"}),y.email]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:""}),f||""]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:""}),x||"-"]})]})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1 text-gray-400",children:""}),a.jsx("input",{value:x,onChange:b=>w(b.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1 text-gray-400",children:""}),a.jsx("input",{type:"date",value:j,onChange:b=>v(b.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1 text-gray-400",children:""}),a.jsx("input",{value:f,onChange:b=>p(b.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-white"})]})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{onClick:async()=>{try{if(!L)return;const N=(await Vl(K,L,{phone:x,birthDate:j,clubName:f})).member,R={...y,...N,clubName:N.club_name,birthDate:N.birth_date};localStorage.setItem("memberSession",JSON.stringify(R)),B(""),setTimeout(()=>B(null),3e3)}catch(b){B(b.message||""),setTimeout(()=>B(null),3e3)}},className:"px-4 py-2 rounded bg-green-600 hover:bg-green-700 transition-colors",children:""})})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1 text-gray-400",children:""}),a.jsx("input",{type:"password",value:_,onChange:b=>E(b.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1 text-gray-400",children:""}),a.jsx("input",{type:"password",value:T,onChange:b=>P(b.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-white"})]})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{onClick:async()=>{if(!_||_!==T){B(""),setTimeout(()=>B(null),2e3);return}try{if(!L)return;await Vl(K,L,{password:_});try{const b=new TextEncoder().encode(_),N=await crypto.subtle.digest("SHA-256",b),S=Array.from(new Uint8Array(N)).map(V=>V.toString(16).padStart(2,"0")).join(""),D=localStorage.getItem("memberPasswords"),z=D?JSON.parse(D):{},$=String(y.email||y.id);z[$]=S,localStorage.setItem("memberPasswords",JSON.stringify(z))}catch{}B(""),E(""),P(""),setTimeout(()=>B(null),3e3)}catch(b){B(b.message||""),setTimeout(()=>B(null),3e3)}},className:"px-4 py-2 rounded bg-indigo-600 hover:bg-indigo-700 transition-colors",children:""})})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-700 pb-2",children:[a.jsx("h2",{className:"text-xl font-bold",children:""}),a.jsxs("span",{className:"text-sm text-gray-400",children:[h.length," / 5"]})]}),a.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:" 5 "}),a.jsx("button",{onClick:F,disabled:r||h.length>=5,className:`w-full py-3 rounded-lg font-bold mb-8 transition-colors ${r||h.length>=5?"bg-gray-600 cursor-not-allowed text-gray-400":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:r?"...":h.length>=5?"":""}),h.length>0?a.jsx("div",{className:"space-y-4",children:h.map(b=>a.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg flex flex-col md:flex-row justify-between items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-gray-900 px-3 py-1 rounded font-mono text-yellow-400 font-bold",children:b.code}),a.jsx("div",{className:"text-lg font-semibold",children:b.name})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[a.jsx("button",{onClick:()=>A(`/room/${b.code}/setup`),className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 rounded text-sm font-medium transition-colors",children:"Copy Setup"}),a.jsx("button",{onClick:()=>A(`/room/${b.code}/live`),className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 rounded text-sm font-medium transition-colors",children:"Copy Live"}),a.jsx("button",{onClick:()=>A(`/room/${b.code}/overlay`),className:"px-3 py-1.5 bg-purple-600 hover:bg-purple-700 rounded text-sm font-medium transition-colors",children:"Copy Overlay"}),a.jsx("button",{onClick:()=>k(b.id),disabled:i===b.id,className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${i===b.id?"bg-gray-600 cursor-not-allowed text-gray-400":"bg-red-600 hover:bg-red-700 text-white"}`,children:i===b.id?"...":""})]})]},b.id))}):a.jsx("div",{className:"text-center text-gray-500 py-8 bg-gray-900/50 rounded-lg border border-gray-700 border-dashed",children:""})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-700 pb-2",children:[a.jsx("h2",{className:"text-xl font-bold",children:""}),a.jsx("button",{onClick:O,className:"text-sm bg-gray-700 hover:bg-gray-600 px-3 py-1 rounded transition-colors",children:""})]}),e&&u.length===0?a.jsx("div",{className:"text-center py-8",children:"..."}):u.length===0?a.jsx("div",{className:"text-center text-gray-500 py-8",children:""}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm text-left whitespace-nowrap",children:[a.jsx("thead",{className:"text-gray-400 bg-gray-900/50 border-b border-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:""}),a.jsx("th",{className:"py-3 px-4",children:"/"}),a.jsx("th",{className:"py-3 px-4",children:""}),a.jsx("th",{className:"py-3 px-4",children:""}),a.jsx("th",{className:"py-3 px-4 text-center",children:""}),a.jsx("th",{className:"py-3 px-4",children:""}),a.jsx("th",{className:"py-3 px-4",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700",children:u.map(b=>{const N=b.startedAt?new Date(b.startedAt).toLocaleString():"-",R=b.durationSeconds?`${Math.floor(b.durationSeconds/60)}${b.durationSeconds%60}`:"-";return a.jsxs("tr",{className:"hover:bg-gray-700/50 transition-colors",children:[a.jsx("td",{className:"py-3 px-4 align-top",children:N}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:"font-mono bg-gray-900 px-2 py-0.5 rounded text-gray-300",children:b.matchCode||"-"})}),a.jsxs("td",{className:"py-3 px-4 align-top",children:[a.jsx("div",{className:"font-medium",children:b.matchName}),b.framesRequired>1&&a.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[b.framesRequired," "]})]}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:b.p0.name}),b.p0.handicap!==0&&a.jsxs("span",{className:"text-xs bg-gray-600 px-1.5 rounded",children:[b.p0.handicap>0?"+":"",b.p0.handicap]}),b.p0.maxBreak>0&&a.jsxs("span",{className:"text-xs text-yellow-400 border border-yellow-400/30 px-1.5 rounded",children:[": ",b.p0.maxBreak]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:b.p1.name}),b.p1.handicap!==0&&a.jsxs("span",{className:"text-xs bg-gray-600 px-1.5 rounded",children:[b.p1.handicap>0?"+":"",b.p1.handicap]}),b.p1.maxBreak>0&&a.jsxs("span",{className:"text-xs text-yellow-400 border border-yellow-400/30 px-1.5 rounded",children:[": ",b.p1.maxBreak]})]})]})}),a.jsxs("td",{className:"py-3 px-4 text-center font-bold text-lg align-top",children:[b.p0.score," - ",b.p1.score]}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs ${b.result==="In Progress"?"bg-yellow-900 text-yellow-200":"bg-green-900 text-green-200"}`,children:b.result})}),a.jsx("td",{className:"py-3 px-4 align-top text-gray-400",children:R})]},b.id)})})]})})]})]})}):null},Q_=()=>{var l;const[t,e]=g.useState(null),[n,r]=g.useState(null),[s,i]=g.useState(!0);function o(){try{return new URLSearchParams(window.location.search).get("token")||localStorage.getItem("adminToken")||""}catch{return localStorage.getItem("adminToken")||""}}return g.useEffect(()=>{let c=!1;async function u(){i(!0),r(null);const d=o();try{const h=`${K.replace(/\/$/,"")}/admin/overview?token=${encodeURIComponent(d)}&format=json`,m=await fetch(h,{cache:"no-store"});if(m.ok){const y=await m.json();c||e(y)}else{const y=await fetch(`${K.replace(/\/$/,"")}/admin/overview`,{headers:{"x-admin-token":d},cache:"no-store"});if(!y.ok){const w=await y.json().catch(()=>({}));throw new Error(w.error||` (${y.status})`)}const x=await y.json();c||e(x)}}catch(h){c||r((h==null?void 0:h.message)||"")}finally{c||i(!1)}}return u(),()=>{c=!0}},[]),s?a.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:"..."}):n?a.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:["",n]}):a.jsx("div",{className:"brand-page p-8",children:a.jsxs("div",{className:"max-w-3xl mx-auto glass rounded-xl p-6",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4 accent-yellow",children:""}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-black/40 border border-white/10 rounded p-4",children:[a.jsx("div",{className:"text-sm text-gray-300/80",children:""}),a.jsx("div",{className:"text-lg",children:(t==null?void 0:t.status)||"-"})]}),a.jsxs("div",{className:"bg-black/40 border border-white/10 rounded p-4",children:[a.jsx("div",{className:"text-sm text-gray-300/80",children:""}),a.jsx("div",{className:"text-lg",children:t==null?void 0:t.port})]}),a.jsxs("div",{className:"bg-black/40 border border-white/10 rounded p-4",children:[a.jsx("div",{className:"text-sm text-gray-300/80",children:""}),a.jsx("div",{className:"text-lg",children:Math.floor((t==null?void 0:t.uptime)||0)})]}),a.jsxs("div",{className:"bg-black/40 border border-white/10 rounded p-4",children:[a.jsx("div",{className:"text-sm text-gray-300/80",children:""}),a.jsx("div",{className:"text-lg",children:((l=t==null?void 0:t.db)==null?void 0:l.members)??"-"})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsx("div",{className:"text-sm text-gray-300/80",children:"CORS Origins"}),a.jsx("pre",{className:"text-xs bg-black/40 border border-white/10 rounded p-3 whitespace-pre-wrap break-all",children:JSON.stringify(t==null?void 0:t.corsOrigins,null,2)})]})]})})},G_=()=>{const[t,e]=g.useState(""),[n,r]=g.useState(""),[s,i]=g.useState(""),[o,l]=g.useState(""),[c,u]=g.useState(""),[d,h]=g.useState(!1),[m,y]=g.useState(null),[x,w]=g.useState(null),j=async v=>{v.preventDefault(),y(null),h(!0);try{if(!t.trim()||!n.trim())throw new Error(" Email  ");const f={email:t.trim().toLowerCase(),name:n.trim(),districtCode:s.trim()||"",phone:o.trim()||void 0,birthDate:c.trim()||void 0},p=await fetch(`${K.replace(/\/$/,"")}/api/members/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(!p.ok){const E=await p.json().catch(()=>({}));throw new Error(E.error||` (${p.status})`)}const _=await p.json();w(_)}catch(f){y((f==null?void 0:f.message)||"")}finally{h(!1)}};return a.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:a.jsxs("div",{className:"max-w-xl mx-auto bg-gray-800 rounded-xl shadow-lg p-6",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:""}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:" /api/members/register"}),a.jsxs("form",{onSubmit:j,className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:"Email"}),a.jsx("input",{type:"email",value:t,onChange:v=>e(v.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:""}),a.jsx("input",{type:"text",value:n,onChange:v=>r(v.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:""}),a.jsx("input",{type:"text",value:s,onChange:v=>i(v.target.value),placeholder:"HKI",className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:""}),a.jsx("input",{type:"tel",value:o,onChange:v=>l(v.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:""}),a.jsx("input",{type:"date",value:c,onChange:v=>u(v.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600"})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-green-600 hover:bg-green-700 disabled:opacity-50",children:d?"...":""})})]}),m&&a.jsx("div",{className:"text-red-400 mt-3",children:m}),x&&a.jsxs("div",{className:"mt-4 bg-gray-700 rounded p-3",children:[a.jsxs("div",{children:["ID",x.id]}),a.jsxs("div",{children:["",x.memberCode]})]})]})})};function wh(){const[t,e]=g.useState(null),n=r=>{const s=new Ne({playersInfo:r.playersInfo,settings:r.settings,startingPlayerIndex:r.startingPlayerIndex});e(s)};return a.jsxs(Ev,{children:[a.jsx(Fe,{path:"/",element:a.jsx(Wd,{to:"/admin",replace:!0})}),a.jsx(Fe,{path:"/admin",element:a.jsx(ps,{children:a.jsx(vw,{})})}),a.jsx(Fe,{path:"/admin/overview",element:a.jsx(ps,{children:a.jsx(Q_,{})})}),a.jsx(Fe,{path:"/members/register",element:a.jsx(W_,{})}),a.jsx(Fe,{path:"/members/simple-register",element:a.jsx(G_,{})}),a.jsx(Fe,{path:"/members/login",element:a.jsx(vh,{mode:"member"})}),a.jsx(Fe,{path:"/operator/login",element:a.jsx(vh,{mode:"operator"})}),a.jsx(Fe,{path:"/member/:id",element:a.jsx(q_,{})}),a.jsx(Fe,{path:"/operator/dashboard",element:a.jsx(J_,{})}),a.jsx(Fe,{path:"/admin/members",element:a.jsx(ps,{children:a.jsx(H_,{})})}),a.jsx(Fe,{path:"/admin/matches",element:a.jsx(ps,{children:a.jsx(V_,{})})}),a.jsx(Fe,{path:"/admin/regions",element:a.jsx(ps,{children:a.jsx(K_,{})})}),a.jsx(Fe,{path:"/room/:roomId",element:a.jsx(M_,{gameState:t,setGameState:e})}),a.jsx(Fe,{path:"/room/:roomId/setup",element:a.jsx(U_,{onStartMatch:n})}),a.jsx(Fe,{path:"/room/:roomId/live",element:a.jsx(F_,{})}),a.jsx(Fe,{path:"/room/:roomId/overlay",element:a.jsx(z_,{})}),a.jsx(Fe,{path:"*",element:a.jsx(Wd,{to:"/admin",replace:!0})})]})}document.title=Yp;(()=>{try{const t=new URLSearchParams(window.location.search),e=t.get("redirect"),n="/";if(e){const r=e.startsWith(n)?e.slice(n.length):e.startsWith("/")?e.slice(1):e,s=`${n}${r}`;t.delete("redirect");const i=t.toString(),o=i?`${s}?${i}`:s;window.history.replaceState(null,"",o)}}catch{}})();const Y_=(()=>{try{const t=new URLSearchParams(window.location.search);return(t.get("hash")||t.get("useHashRouter"))==="true"}catch{return!1}})();Va.createRoot(document.getElementById("root")).render(a.jsx(Ph.StrictMode,{children:Y_?a.jsx(Yv,{children:a.jsx(wh,{})}):a.jsx(Gv,{basename:"/",children:a.jsx(wh,{})})}));
